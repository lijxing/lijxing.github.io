<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>CPP核心 | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="C++核心编程内存分区模型1234561.代码区:存放函数体的二进制代码,操作系统分配。2.全局区:存放全局变量和静态变量以及常量。3.栈区:编译器自动分配和释放,存放函数参数和局部变量。4.堆区:开发人员自主分配和释放,程序结束时由操作系统回收不同的区域赋予不同的生命周期。  代码区1234567891011121314程序编译后，生成的.exe文件，在未执行前分为两个区域:	1.代码区:">
<meta property="og:type" content="article">
<meta property="og:title" content="CPP核心">
<meta property="og:url" content="http://example.com/2026/01/10/cpp%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="C++核心编程内存分区模型1234561.代码区:存放函数体的二进制代码,操作系统分配。2.全局区:存放全局变量和静态变量以及常量。3.栈区:编译器自动分配和释放,存放函数参数和局部变量。4.堆区:开发人员自主分配和释放,程序结束时由操作系统回收不同的区域赋予不同的生命周期。  代码区1234567891011121314程序编译后，生成的.exe文件，在未执行前分为两个区域:	1.代码区:">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/butterfly-icon.png">
<meta property="article:published_time" content="2026-01-10T03:52:10.213Z">
<meta property="article:modified_time" content="2026-01-10T03:54:10.274Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CPP核心",
  "url": "http://example.com/2026/01/10/cpp%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/",
  "image": "http://example.com/img/butterfly-icon.png",
  "datePublished": "2026-01-10T03:52:10.213Z",
  "dateModified": "2026-01-10T03:54:10.274Z",
  "author": [
    {
      "@type": "Person",
      "name": "John Doe",
      "url": "http://example.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2026/01/10/cpp%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CPP核心',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Hexo</span></a><a class="nav-page-title" href="/"><span class="site-name">CPP核心</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">CPP核心</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2026-01-10T03:52:10.213Z" title="Created 2026-01-10 11:52:10">2026-01-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2026-01-10T03:54:10.274Z" title="Updated 2026-01-10 11:54:10">2026-01-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h4 id="C-核心编程"><a href="#C-核心编程" class="headerlink" title="C++核心编程"></a>C++核心编程</h4><h5 id="内存分区模型"><a href="#内存分区模型" class="headerlink" title="内存分区模型"></a>内存分区模型</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.代码区:存放函数体的二进制代码,操作系统分配。</span><br><span class="line">2.全局区:存放全局变量和静态变量以及常量。</span><br><span class="line">3.栈区:编译器自动分配和释放,存放函数参数和局部变量。</span><br><span class="line">4.堆区:开发人员自主分配和释放,程序结束时由操作系统回收</span><br><span class="line"></span><br><span class="line">不同的区域赋予不同的生命周期。</span><br></pre></td></tr></table></figure>

<h5 id="代码区"><a href="#代码区" class="headerlink" title="代码区"></a>代码区</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">程序编译后，生成的.exe文件，在未执行前分为两个区域:</span><br><span class="line">	1.代码区:</span><br><span class="line">    	存放CPU执行的机器指令。</span><br><span class="line">		代码区是共享的，只读的。</span><br><span class="line">	</span><br><span class="line">	2.全局区:</span><br><span class="line">		全局变量，静态变量，包含了常量区(字符常量和其他常量)。程序结束后操作系统释放。</span><br><span class="line">			全局变量:不在函数体中的变量</span><br><span class="line">			静态变量:static修饰</span><br><span class="line">			常量:</span><br><span class="line">				a.字符串常量。</span><br><span class="line">				b.const修饰的变量:</span><br><span class="line">					局部变量:非全局区</span><br><span class="line">					全局变量:全局区</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> MAX = <span class="number">10</span>;<span class="comment">//全局变量</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MINI = <span class="number">1</span>;<span class="comment">//全局常量，全局区</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span>  a = <span class="number">13</span>;<span class="comment">//局部变量，非全局区</span></span><br><span class="line"></span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> b = <span class="number">12</span>;<span class="comment">//静态变量，全局区</span></span><br><span class="line">	std::cout &lt;&lt; (<span class="type">int</span>)&amp;a &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; (<span class="type">int</span>)&amp;MAX &lt;&lt; std::endl;<span class="comment">//看内存地址的距离判断是不是同区。</span></span><br><span class="line">	std::cout &lt;&lt; (<span class="type">int</span>)&amp;b&lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	常量:</span></span><br><span class="line"><span class="comment">		1.字符串常量:&quot;hello word&quot;</span></span><br><span class="line"><span class="comment">		2.const修饰的变量</span></span><br><span class="line"><span class="comment">			a.const修饰的全局变量</span></span><br><span class="line"><span class="comment">			b.const修饰的局部变量</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> c = <span class="number">15</span>;</span><br><span class="line">	std::cout &lt;&lt; (<span class="type">int</span>)&amp;<span class="string">&quot;你好&quot;</span> &lt;&lt; std::endl;<span class="comment">//字符串常量，全局区</span></span><br><span class="line">	std::cout &lt;&lt; (<span class="type">int</span>)&amp;MINI &lt;&lt; std::endl;<span class="comment">//全局常量，全局区</span></span><br><span class="line">	std::cout &lt;&lt; (<span class="type">int</span>)&amp;c &lt;&lt; std::endl;<span class="comment">//局部常量，非全局区</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">程序运行后:</span><br><span class="line">	栈区:</span><br><span class="line">		编译器自动分配，存放函数的参数值,局部变量。不要返回局部变量的地址，会被释放掉。</span><br><span class="line">		第一次会保留，第二次就不会了。</span><br><span class="line">	</span><br><span class="line">	堆区:</span><br><span class="line">		由开发者去负责和维护的区域。使用new来开辟</span><br></pre></td></tr></table></figure>

<h5 id="new"><a href="#new" class="headerlink" title="new"></a>new</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用new在堆区开辟内存空间,返回该数据对应的类型的指针。</span><br><span class="line">使用delete回收。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		指针保存在栈上，但是new int(10)的数据保存在堆上</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="type">int</span>* int_ptr = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);<span class="comment">//初始值为10</span></span><br><span class="line">	<span class="type">int</span>* array_ptr = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];<span class="comment">//在堆区创建包含10个整型的数组</span></span><br><span class="line">	</span><br><span class="line">	array_ptr[<span class="number">0</span>] = *int_ptr;</span><br><span class="line">	<span class="keyword">delete</span> int_ptr;</span><br><span class="line">	<span class="keyword">delete</span>[] array_ptr;<span class="comment">//释放数组需要[]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">作用:给变量起别名</span><br><span class="line">语法: 数据类型  &amp;变量名</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引用传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> &amp;a)</span> </span>&#123;<span class="comment">//简化指针</span></span><br><span class="line">	a = <span class="number">13</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">change</span>(a);</span><br><span class="line">	std::cout &lt;&lt; a &lt;&lt; std::endl;</span><br><span class="line">	<span class="type">int</span> &amp;b = a;<span class="comment">//引用必须初始化,初始化后指向不可更改。</span></span><br><span class="line">	b = <span class="number">10</span>;</span><br><span class="line">	std::cout &lt;&lt; a &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用做函数返回值</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">returnNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> temp = <span class="number">12</span>;<span class="comment">//栈</span></span><br><span class="line">	<span class="keyword">return</span> temp;<span class="comment">//发生了复制,所以赋值没有问题</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//不要返回局部变量的引用</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">returnNum1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> temp = <span class="number">12</span>;<span class="comment">//栈</span></span><br><span class="line">	<span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数的调用可以作为左值:returnNum2() = 1000;</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">returnNum2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> temp = <span class="number">20</span>;<span class="comment">//使用static提升生命周期，全局区的静态变量。</span></span><br><span class="line">	<span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> &amp;ref = <span class="built_in">returnNum1</span>();</span><br><span class="line">	std::cout &lt;&lt; ref &lt;&lt; std::endl;<span class="comment">//第一次正确,12</span></span><br><span class="line">	std::cout &lt;&lt; ref &lt;&lt; std::endl;<span class="comment">//第二次错误</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>&amp; ref1 = <span class="built_in">returnNum2</span>();</span><br><span class="line">	std::cout &lt;&lt; ref1 &lt;&lt; std::endl;<span class="comment">//20</span></span><br><span class="line">	<span class="built_in">returnNum2</span>() = <span class="number">100</span>;</span><br><span class="line">	std::cout &lt;&lt; ref1 &lt;&lt; std::endl;<span class="comment">//100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="常量引用"><a href="#常量引用" class="headerlink" title="常量引用"></a>常量引用</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintNum</span><span class="params">(<span class="type">const</span> <span class="type">int</span> &amp;b)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//b = 12;不可修改</span></span><br><span class="line">	std::cout &lt;&lt; b &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="comment">//int &amp;b = 10;报错，非常量引用的初始值必须为左值，要引用合法的内存空间</span></span><br><span class="line">	<span class="type">const</span> <span class="type">int</span>&amp; b = <span class="number">10</span>;<span class="comment">//使用const之后，编译器做了修改 int temp = 10; const int &amp;b = temp;</span></span><br><span class="line">	<span class="comment">//b = 12; 使用const之后不可修改,用于修饰形参避免误操作。</span></span><br><span class="line">	<span class="built_in">PrintNum</span>(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="函数默认值"><a href="#函数默认值" class="headerlink" title="函数默认值"></a>函数默认值</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//默认参数必须排最后</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">12</span>, <span class="type">int</span> c = <span class="number">10</span>)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; a &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; b &lt;&lt;<span class="string">&quot;, &quot;</span> &lt;&lt; c &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数声明与函数实现不能同时有默认参数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">NotImport</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b =<span class="number">12</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">Print</span>(<span class="number">10</span>);</span><br><span class="line">	<span class="built_in">Print</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">NotImport</span><span class="params">(<span class="type">int</span> a = <span class="number">10</span>, <span class="type">int</span> b)</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h5 id="函数占位参数"><a href="#函数占位参数" class="headerlink" title="函数占位参数"></a>函数占位参数</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法: 返回值类型 函数名(数据类型)&#123;&#125;</span><br><span class="line">调用的时候必须填补位置</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">//占位参数可以有默认值</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> = <span class="number">12</span>)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">func</span>(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="函数重载"><a href="#函数重载" class="headerlink" title="函数重载"></a>函数重载</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.同一个作用域</span><br><span class="line">2.函数名相同</span><br><span class="line">3.参数类型，参数数量，参数顺序</span><br><span class="line"></span><br><span class="line">返回值类型不同不是重载 int func()&#123;&#125;;void func()&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//占位参数可以有默认值</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> = <span class="number">12</span>)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">func</span>(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//占位参数可以有默认值</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> &amp;a)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;int &amp;a&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; a)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;const int &amp;a&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> a , <span class="type">int</span> b =<span class="number">10</span>)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;默认参数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> a)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;无默认参数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">func</span>(a);<span class="comment">//int &amp;a</span></span><br><span class="line">	<span class="built_in">func</span>(<span class="number">10</span>);<span class="comment">//const int &amp;a</span></span><br><span class="line">	<span class="comment">//func1(12);有默认参数的无法定位,尽量避免函数重载时使用默认参数。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类与对象"><a href="#类与对象" class="headerlink" title="类与对象"></a>类与对象</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">三大特性:封装继承多态</span><br><span class="line">对象具有属性和行为</span><br></pre></td></tr></table></figure>

<h5 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将属性和行为封住到一个类里面</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> range;</span><br><span class="line">	<span class="function"><span class="type">double</span> <span class="title">square</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span>  (PI* range * range);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Circle</span>(<span class="type">int</span> range) </span><br><span class="line">	:<span class="built_in">range</span>(range)&#123;&#125;</span><br><span class="line">	<span class="built_in">Circle</span>()&#123;&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Circle cir;</span><br><span class="line">	cir.range = <span class="number">10</span>;</span><br><span class="line">	std::cout&lt;&lt;<span class="string">&quot;圆的面积是: &quot;</span> &lt;&lt; cir.<span class="built_in">square</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string name;</span><br><span class="line">	std::string id;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(<span class="type">const</span> std::string&amp; sname)</span> </span>&#123;</span><br><span class="line">		name = sname;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setId</span><span class="params">(<span class="type">const</span> std::string&amp; sid)</span> </span>&#123;</span><br><span class="line">		id = sid;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; name &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; id &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student stu;</span><br><span class="line">	stu.<span class="built_in">setName</span>(<span class="string">&quot;jim&quot;</span>);</span><br><span class="line">	stu.<span class="built_in">setId</span>(<span class="string">&quot;2025&quot;</span>);</span><br><span class="line">	stu.<span class="built_in">showInfo</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">公有:public,类内和类外都可以访问。</span><br><span class="line">受保护的:protected,类内可以访问，类外不可以访问，子类可以访问。</span><br><span class="line">私有:private,只有类内和类本身可以访问。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string name;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="type">int</span> score;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> id;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		name = <span class="string">&quot;himi&quot;</span>;</span><br><span class="line">		score = <span class="number">87</span>;</span><br><span class="line">		id = <span class="number">2025</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student stu;</span><br><span class="line">	stu.name = <span class="number">12</span>;<span class="comment">//public可以访问，protected和private不可以访问。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="struct和class的区别"><a href="#struct和class的区别" class="headerlink" title="struct和class的区别"></a>struct和class的区别</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">唯一的区别是默认的权限不同，struct默认为public,class默认为private</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; age &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; age &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student stu;</span><br><span class="line">	Teacher tea;</span><br><span class="line">	<span class="comment">//stu.age = 12;class默认私有,不可访问</span></span><br><span class="line">	tea.age = <span class="number">35</span>;</span><br><span class="line">	tea.<span class="built_in">showAge</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="private"><a href="#private" class="headerlink" title="private"></a>private</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">权限控制</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setAge</span><span class="params">(<span class="type">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (age &lt; <span class="number">0</span> || age &gt;<span class="number">150</span>) &#123; <span class="keyword">return</span>; &#125;<span class="comment">//使用return减少嵌套层次。</span></span><br><span class="line">		s_age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> s_age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; s_age &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> s_age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> age = <span class="number">9</span>;</span><br><span class="line">	<span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student stu;</span><br><span class="line">	stu.<span class="built_in">setAge</span>(<span class="number">14</span>);</span><br><span class="line">	<span class="type">int</span> age = stu.<span class="built_in">getAge</span>();</span><br><span class="line">	std::cout &lt;&lt; age &lt;&lt; std::endl;</span><br><span class="line">	stu.<span class="built_in">showAge</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setOx</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">		ox = x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setOy</span><span class="params">(<span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">		oy = y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setCr</span><span class="params">(<span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">		cr = r;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getOx</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ox;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getOy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> oy;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getCr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> cr;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> ox;</span><br><span class="line">	<span class="type">int</span> oy;</span><br><span class="line">	<span class="type">int</span> cr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setPx</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">		px = x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setPy</span><span class="params">(<span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">		py = y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Length</span><span class="params">(Circle&amp; c)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> ((c.<span class="built_in">getCr</span>() * c.<span class="built_in">getCr</span>()) == (px - c.<span class="built_in">getOx</span>()) * (px - c.<span class="built_in">getOx</span>()) + (py - c.<span class="built_in">getOy</span>()) * (py - c.<span class="built_in">getOy</span>()))</span><br><span class="line">		&#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;在圆上&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;又错了...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> px;</span><br><span class="line">	<span class="type">int</span> py;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Circle c;</span><br><span class="line">	Point p;</span><br><span class="line">	c.<span class="built_in">setCr</span>(<span class="number">5</span>);</span><br><span class="line">	c.<span class="built_in">setOx</span>(<span class="number">3</span>);</span><br><span class="line">	c.<span class="built_in">setOy</span>(<span class="number">4</span>);</span><br><span class="line">	p.<span class="built_in">setPx</span>(<span class="number">0</span>);</span><br><span class="line">	p.<span class="built_in">setPy</span>(<span class="number">0</span>);</span><br><span class="line">	p.<span class="built_in">Length</span>(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类的分文件编写"><a href="#类的分文件编写" class="headerlink" title="类的分文件编写"></a>类的分文件编写</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//student.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//声明属性和行为</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setInfo</span><span class="params">(<span class="type">const</span> std::string &amp;name, <span class="type">int</span> age)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::string sname;</span><br><span class="line">	<span class="type">int</span> sage;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//student.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;student.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//定义行为</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Student::setInfo</span><span class="params">(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age)</span> </span>&#123;</span><br><span class="line">	sname = name;</span><br><span class="line">	sage = age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Student::getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> sage;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main函数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;student.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student s;</span><br><span class="line">	s.<span class="built_in">setInfo</span>(<span class="string">&quot;James&quot;</span>,<span class="number">18</span>);</span><br><span class="line">	std::cout &lt;&lt; s.<span class="built_in">getAge</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="构造函数和析构函数"><a href="#构造函数和析构函数" class="headerlink" title="构造函数和析构函数"></a>构造函数和析构函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">由编译器自动调用，如果没有定义，编译器会自动提供构造函数和析构函数。</span><br><span class="line">构造函数:初始化，可以有参数，进行重载</span><br><span class="line">析构函数:清理内存。不可以有参数，不可以重载。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Student</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Student创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Student</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Student销毁&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test</span>();</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;栈上创建的，在作用域结束就销毁&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	Student s1;</span><br><span class="line">	std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="构造函数的分类与调用"><a href="#构造函数的分类与调用" class="headerlink" title="构造函数的分类与调用"></a>构造函数的分类与调用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">按参数分:</span><br><span class="line">	有参构造函数，无参构造函数</span><br><span class="line">	</span><br><span class="line">按类型分:</span><br><span class="line">	普通构造， 拷贝构造</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">调用:</span><br><span class="line">	括号、显示、隐式转换法</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> sage;</span><br><span class="line">	<span class="built_in">Student</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;无参构造函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Student</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">		sage = age;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;有参构造函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//拷贝构造函数</span></span><br><span class="line">	<span class="built_in">Student</span>(<span class="type">const</span> Student &amp;stu) &#123;</span><br><span class="line">		sage = stu.sage;</span><br><span class="line">		<span class="comment">//stu.sage = 13;使用const不可修改stu。</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;拷贝构造函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Student</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;析构函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//1.括号法</span></span><br><span class="line">	Student s;<span class="comment">//调用默认构造函数不能使用()</span></span><br><span class="line">	<span class="comment">// Student s();会被编译器识别为函数声明</span></span><br><span class="line"></span><br><span class="line">	<span class="function">Student <span class="title">s1</span><span class="params">(<span class="number">10</span>)</span></span>;<span class="comment">//有参构造函数</span></span><br><span class="line">	<span class="function">Student <span class="title">s2</span><span class="params">(s1)</span></span>;<span class="comment">//拷贝构造函数</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; s.sage &lt;&lt; std::endl;</span></span><br><span class="line">	std::cout &lt;&lt; s<span class="number">1.</span>sage &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; s<span class="number">2.</span>sage &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.显示法</span></span><br><span class="line">	Student s3;</span><br><span class="line">	Student s4 = <span class="built_in">Student</span>(<span class="number">11</span>);</span><br><span class="line">	Student s5 = <span class="built_in">Student</span>(s4);</span><br><span class="line">	<span class="built_in">Student</span>(<span class="number">9</span>);<span class="comment">//匿名对象，当前行执行结束后会立即回收释放</span></span><br><span class="line">	std::cout&lt;&lt;<span class="string">&quot;匿名对象&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"><span class="comment">//不要使用拷贝构造函数来初始一个匿名对象。编译器看来:Student(s4) === Student s4(等价于);重复定义</span></span><br><span class="line">	<span class="comment">//Student(s4);重定义</span></span><br><span class="line">	std::cout &lt;&lt; s<span class="number">4.</span>sage &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; s<span class="number">5.</span>sage &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.隐式转换法</span></span><br><span class="line">	Student s6 = <span class="number">10</span>;<span class="comment">//相当于 Student s6 = Student(10);</span></span><br><span class="line">	Student s7 = s6;<span class="comment">//隐式调用拷贝构造。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="拷贝构造函数的调用时机"><a href="#拷贝构造函数的调用时机" class="headerlink" title="拷贝构造函数的调用时机"></a>拷贝构造函数的调用时机</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.使用一个对象来初始化</span><br><span class="line">2.以值传递的方式给函数传参(本质就是拷贝)</span><br><span class="line">3.以值的方式返回局部对象</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> sage;</span><br><span class="line">	<span class="built_in">Student</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;默认构造函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//拷贝构造函数</span></span><br><span class="line">	<span class="built_in">Student</span>(<span class="type">const</span> Student &amp;stu) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;拷贝构造函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Student</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;析构函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">TestFunc</span><span class="params">(Student stu)</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//值方式返回</span></span><br><span class="line">	<span class="function">Student <span class="title">TestFunc1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Student s;</span><br><span class="line">		<span class="keyword">return</span> s;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student s1;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 1.初始化</span></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;初始化&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	Student s2 = <span class="built_in">Student</span>(s1);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2.值传递</span></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;值传递&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	s<span class="number">1.</span><span class="built_in">TestFunc</span>(s2);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.返回局部对象,c++17编译器优化会消除拷贝，</span></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;返回局部对象&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	Student s3 = s<span class="number">1.</span><span class="built_in">TestFunc1</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">默认构造函数</span><br><span class="line"></span><br><span class="line">初始化</span><br><span class="line">拷贝构造函数</span><br><span class="line"></span><br><span class="line">值传递</span><br><span class="line">拷贝构造函数</span><br><span class="line">析构函数  //回收值传递的拷贝对象</span><br><span class="line"></span><br><span class="line">返回局部对象</span><br><span class="line">默认构造函数  //编译器优化</span><br><span class="line"></span><br><span class="line">析构函数</span><br><span class="line">析构函数</span><br><span class="line">析构函数</span><br></pre></td></tr></table></figure>

<h5 id="构造函数的调用规则"><a href="#构造函数的调用规则" class="headerlink" title="构造函数的调用规则"></a>构造函数的调用规则</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">默认情况下,C++会给编译器添加3个默认规则:</span><br><span class="line">	1.默认构造函数(无参,函数体为空)</span><br><span class="line">	2.默认析构函数(无参,函数体为空)</span><br><span class="line">	3.默认拷贝构造函数堆属性进行拷贝*</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">调用规则如下:</span><br><span class="line">1.如果有有参构造函数，c++不再提供无参构造,但会提供默认拷贝构造函数。</span><br><span class="line">2.如果用户定义了拷贝函数,C++不提供其他构造函数</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> sage;</span><br><span class="line">	<span class="built_in">Student</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">		sage = age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Teacher</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> Person &amp;p) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student s1 = <span class="built_in">Student</span>(<span class="number">12</span>);<span class="comment">// 默认3个</span></span><br><span class="line">	Student s2 = <span class="built_in">Student</span>(s1);</span><br><span class="line">	std::cout &lt;&lt; s<span class="number">2.</span>sage &lt;&lt; std::endl;<span class="comment">//默认拷贝函数，将值复制。</span></span><br><span class="line"></span><br><span class="line">	Teacher t1 = <span class="built_in">Teacher</span>(<span class="number">12</span>);<span class="comment">//有有参则无无参</span></span><br><span class="line">	<span class="comment">//Teacher t2;</span></span><br><span class="line">	Teacher t3 = <span class="built_in">Teacher</span>(t1);<span class="comment">//拷贝构造函数</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//只有拷贝，则无其他</span></span><br><span class="line">	<span class="comment">//Person per1;</span></span><br><span class="line">	<span class="comment">//Person per2 = Person(12);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="深拷贝和浅拷贝"><a href="#深拷贝和浅拷贝" class="headerlink" title="深拷贝和浅拷贝"></a>深拷贝和浅拷贝</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">浅拷贝:简单的复制操作(堆区的内存重复释放)</span><br><span class="line">深拷贝:在堆区重新申请空间,进行拷贝操作</span><br><span class="line"></span><br><span class="line">如果属性有在堆开辟的,一定要提供拷贝构造函数,防止浅拷贝带来的问题。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span>* pid;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;默认构造函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> id, <span class="type">int</span> age) &#123;</span><br><span class="line">		pid = <span class="keyword">new</span> <span class="built_in">int</span>(id);<span class="comment">// 深拷贝，</span></span><br><span class="line">		page = age;<span class="comment">//浅拷贝</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;有参构造&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Person</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> pid;</span><br><span class="line">		pid = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">s</span><span class="params">(<span class="number">2025</span>,<span class="number">12</span>)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; *s.pid &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="function">Person <span class="title">s1</span><span class="params">(s)</span></span>;<span class="comment">// 浅拷贝，堆区的内存重复释放  报错</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span>* pid;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;默认构造函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> id, <span class="type">int</span> age) &#123;</span><br><span class="line">		pid = <span class="keyword">new</span> <span class="built_in">int</span>(id);<span class="comment">// 深拷贝，</span></span><br><span class="line">		page = age;<span class="comment">//浅拷贝</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;有参构造&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> Person &amp;p) &#123;</span><br><span class="line">        <span class="comment">//编译器默认实现 pid = p.id</span></span><br><span class="line">		pid = <span class="keyword">new</span> <span class="built_in">int</span>(*p.pid);</span><br><span class="line">		page = p.page;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Person</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> pid;</span><br><span class="line">		pid = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">s</span><span class="params">(<span class="number">2025</span>,<span class="number">12</span>)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; *s.pid &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="function">Person <span class="title">s1</span><span class="params">(s)</span></span>;<span class="comment">// 深拷贝，堆区的内存各自负责</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="初始化列表"><a href="#初始化列表" class="headerlink" title="初始化列表"></a>初始化列表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">构造函数():属性1(参数1),属性2(参数2)...&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> pid;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> id, <span class="type">int</span> age)</span><br><span class="line">		:<span class="built_in">pid</span>(id),<span class="built_in">page</span>(age) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;默认构造函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; id &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; age &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">p</span><span class="params">(<span class="number">2025</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类对象作为类的成员"><a href="#类对象作为类的成员" class="headerlink" title="类对象作为类的成员"></a>类对象作为类的成员</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Man</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Man</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;man创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Man</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;man销毁&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Man man; <span class="comment">// 对象成员</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Person创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Person</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Person销毁&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当其他类的对象作为类成员时,构造时先构造类成员，销毁时先销毁自身，再销毁类成员</span></span><br><span class="line"></span><br><span class="line">	Person p;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">man创建</span></span><br><span class="line"><span class="comment">Person创建</span></span><br><span class="line"><span class="comment">Person销毁</span></span><br><span class="line"><span class="comment">man销毁</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="静态成员"><a href="#静态成员" class="headerlink" title="静态成员"></a>静态成员</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用static修饰的成员变量和成员函数就是静态成员</span><br><span class="line"></span><br><span class="line">静态成员变量:</span><br><span class="line">	1.所有对象共享一份数据</span><br><span class="line">	2.编译阶段分配内存(全局区)</span><br><span class="line">	3.类内声明,类外初始化</span><br><span class="line">	</span><br><span class="line">静态成员函数:</span><br><span class="line">	1.所有对象共享一个静态函数</span><br><span class="line">	2.静态函数只能访问静态变量</span><br><span class="line">	</span><br><span class="line">访问方式:</span><br><span class="line">	对象访问	类名访问</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> pid;</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> pgrade; <span class="comment">// 所有对象都共享</span></span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">getHome</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> phome;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">setHome</span><span class="params">(<span class="type">int</span> home)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//pid = 100; 不能访问非静态成员变量</span></span><br><span class="line">		phome = home;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> phome;<span class="comment">//私有静态成员变量,类外无法访问</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Person::pgrade = <span class="number">1</span>;<span class="comment">//类内声明，类外初始化</span></span><br><span class="line"><span class="type">int</span> Person::phome = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Person p;</span><br><span class="line">	std::cout &lt;&lt; p.pgrade &lt;&lt; std::endl;</span><br><span class="line">	Person p1;</span><br><span class="line">	p<span class="number">1.</span>pgrade = <span class="number">3</span>;</span><br><span class="line">	std::cout &lt;&lt; p.pgrade &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	静态成员变量不属于某个对象,所有对象共享</span></span><br><span class="line"><span class="comment">		1.通过对象</span></span><br><span class="line"><span class="comment">		2.通过类</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	std::cout &lt;&lt; Person::pgrade &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//私有静态成员变量,类外无法访问</span></span><br><span class="line">	p.<span class="built_in">setHome</span>(<span class="number">999</span>);</span><br><span class="line">	std::cout &lt;&lt; p<span class="number">1.</span><span class="built_in">getHome</span>() &lt;&lt; std::endl;<span class="comment">// 999</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//静态函数通过类名访问或者对象访问</span></span><br><span class="line">	std::cout &lt;&lt; Person::<span class="built_in">getHome</span>() &lt;&lt; std::endl;<span class="comment">// 999</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//静态成员方法也有访问权限。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="成员变量和成员函数分开存储"><a href="#成员变量和成员函数分开存储" class="headerlink" title="成员变量和成员函数分开存储"></a>成员变量和成员函数分开存储</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在C++中类的成员变量和成员函数分开存储;</span><br><span class="line">只有非静态成员变量才属于类的对象上</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Person p;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; std::endl; <span class="comment">// 1</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	空对象占用的内存空间为1,编译器会为对象分配一个字节的空间用来区分空对象存放的位置。</span></span><br><span class="line"><span class="comment">	空对象的内存空间都是唯一的</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Person p;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; std::endl; <span class="comment">// 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> age;<span class="comment">//非静态的成员变量</span></span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> id;<span class="comment">//静态成员变量</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;&#125;<span class="comment">//非静态函数</span></span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func1</span><span class="params">()</span> </span>&#123;&#125;<span class="comment">//静态函数</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Person::id = <span class="number">12</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Person p;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; std::endl; <span class="comment">// 4, 只有非静态成员变量属于类的对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="this指针"><a href="#this指针" class="headerlink" title="this指针"></a>this指针</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">this指向被调用成员函数所属的对象</span><br><span class="line">this指针隐含在每一个非静态成员的函数内</span><br><span class="line">this指针不需要定义，直接使用</span><br><span class="line"></span><br><span class="line">用途:</span><br><span class="line">1.参数列表中参数名与成员变量同名使用this区分</span><br><span class="line">2.非静态函数返回对象本身，使用return *this;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">Person  <span class="title">returnPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">p</span><span class="params">(<span class="number">12</span>)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; p.age &lt;&lt; std::endl; <span class="comment">// 12</span></span><br><span class="line">	std::cout &lt;&lt; p.<span class="built_in">returnPerson</span>().age &lt;&lt; std::endl; <span class="comment">//12</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//始终是原对象</span></span><br><span class="line">	<span class="function">Person&amp; <span class="title">addAge</span><span class="params">(Person &amp;p)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;age += p.age;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	Person addAge(Person &amp;p) &#123;</span></span><br><span class="line"><span class="comment">		this-&gt;age += p.age;</span></span><br><span class="line"><span class="comment">		return *this;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	如果是这样就是p1.age=20,每次都重新复制到一个对象</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">p</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; p.age &lt;&lt; std::endl; <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//链式编程</span></span><br><span class="line">	p.<span class="built_in">addAge</span>(p1).<span class="built_in">addAge</span>(p1).<span class="built_in">addAge</span>(p1);</span><br><span class="line">	std::cout &lt;&lt; p.age &lt;&lt; std::endl;<span class="comment">//40</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="使用空指针来访问成员函数"><a href="#使用空指针来访问成员函数" class="headerlink" title="使用空指针来访问成员函数"></a>使用空指针来访问成员函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c++中空指针也可以调用成员函数，但是需要注意有没有使用this指针</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">PrintInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;你好!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">PrintAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == <span class="literal">NULL</span>) &#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;空指针&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		std::cout &lt;&lt; <span class="keyword">this</span>-&gt;page &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person* p = <span class="literal">NULL</span>;</span><br><span class="line">	p-&gt;<span class="built_in">PrintInfo</span>();<span class="comment">// 不会崩溃</span></span><br><span class="line">	p-&gt;<span class="built_in">PrintAge</span>();<span class="comment">// 会崩溃</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="const修饰成员函数"><a href="#const修饰成员函数" class="headerlink" title="const修饰成员函数"></a>const修饰成员函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">常函数:</span><br><span class="line">1.const写在函数名后面的为常函数</span><br><span class="line">2.常函数不可以修改成员属性</span><br><span class="line">3.成员属性使用mutable修饰后,常函数中依旧可以修改</span><br><span class="line"></span><br><span class="line">常对象:</span><br><span class="line">1.声明对象前加const即为常对象</span><br><span class="line">2.常对象只能调用常函数</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line">	<span class="keyword">mutable</span> <span class="type">int</span> pid;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	 <span class="function"><span class="type">void</span> <span class="title">showAge</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">		 <span class="comment">//this-&gt;page = 100; this指针的本质是一个指针常量，指向不可以修改,Person * const this;</span></span><br><span class="line"></span><br><span class="line">		 <span class="comment">//成员函数后面加的const相当于 const Person * const this;</span></span><br><span class="line"></span><br><span class="line">		 pid = <span class="number">100</span>;</span><br><span class="line">		 <span class="keyword">this</span>-&gt;pid = <span class="number">120</span>;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;----&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">const</span> Person p; <span class="comment">// 常对象</span></span><br><span class="line">	<span class="comment">//p.page = 10; 不可访问</span></span><br><span class="line">	p.pid = <span class="number">12</span>;</span><br><span class="line">	p.<span class="built_in">showAge</span>(); <span class="comment">// 常对象只能调用常函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="友元"><a href="#友元" class="headerlink" title="友元"></a>友元</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">作用:让函数或类来访问私有成员</span><br><span class="line">关键字: friend</span><br><span class="line">友元的实现:</span><br><span class="line">1.全局函数做友元 	2.类做友元	3.成员函数做友元</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">	<span class="comment">// 声明police是友元</span></span><br><span class="line">	<span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">police</span><span class="params">(Person* p)</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">mutable</span> <span class="type">int</span> pid;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> age, <span class="type">int</span> id)</span><br><span class="line">	:<span class="built_in">page</span>(age),<span class="built_in">pid</span>(id)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局函数做友元</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">police</span><span class="params">(Person* p)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; p-&gt;page &lt;&lt;<span class="string">&quot;, &quot;</span>&lt;&lt; p-&gt;pid &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">p</span><span class="params">(<span class="number">12</span>,<span class="number">2025</span>)</span></span>;</span><br><span class="line">	<span class="built_in">police</span>(&amp;p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类做友元"><a href="#类做友元" class="headerlink" title="类做友元"></a>类做友元</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//声明类做友元</span></span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">Police</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> pid;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 类外写成员函数</span></span><br><span class="line">Person::<span class="built_in">Person</span>() &#123;</span><br><span class="line">	page = <span class="number">13</span>;</span><br><span class="line">	pid = <span class="number">2025</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Police</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Person* p;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Police</span>();</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showInfo</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line">Police::<span class="built_in">Police</span>() &#123;</span><br><span class="line">	p = <span class="keyword">new</span> Person;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Police::showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; p-&gt;page &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; p-&gt;pid &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Police po;</span><br><span class="line">	po.<span class="built_in">showInfo</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> page;  <span class="comment">// 内置类型成员</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">PrintInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;你好!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">PrintAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="keyword">this</span>-&gt;page &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Person* p1 = <span class="keyword">new</span> Person;     <span class="comment">// page 未初始化（垃圾值）</span></span><br><span class="line">    Person* p2 = <span class="keyword">new</span> <span class="built_in">Person</span>();   <span class="comment">// page 被值初始化为 0</span></span><br><span class="line">    </span><br><span class="line">    p1-&gt;<span class="built_in">PrintAge</span>();  <span class="comment">// 输出不确定的值</span></span><br><span class="line">    p2-&gt;<span class="built_in">PrintAge</span>();  <span class="comment">// 输出 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="成员函数做友元"><a href="#成员函数做友元" class="headerlink" title="成员函数做友元"></a>成员函数做友元</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 前向声明</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Police</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Person* p;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Police</span>();</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showInfo</span><span class="params">()</span></span>;  <span class="comment">// 先声明，但不定义</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 现在 Police::showInfo 已经被声明，可以将其设为友元</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">Police::showInfo</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> page;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> pid;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 现在可以定义 Person 的构造函数</span></span><br><span class="line">Person::<span class="built_in">Person</span>() : <span class="built_in">page</span>(<span class="number">20</span>), <span class="built_in">pid</span>(<span class="number">123</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 现在可以定义 Police 的成员函数</span></span><br><span class="line">Police::<span class="built_in">Police</span>() &#123;</span><br><span class="line">    p = <span class="keyword">new</span> Person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Police::showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; p-&gt;page &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; p-&gt;pid &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Police po;</span><br><span class="line">    po.<span class="built_in">showInfo</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对已有的运算符重新定义，赋予另一种功能，用于处理其他数据类型的计算</span><br></pre></td></tr></table></figure>

<h5 id="号运算符重载"><a href="#号运算符重载" class="headerlink" title="+号运算符重载"></a>+号运算符重载</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员函数重载+</span></span><br><span class="line">   <span class="comment">/* Person operator+ (const Person&amp; p) &#123;</span></span><br><span class="line"><span class="comment">        return Person(p.page + this-&gt;page);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">&#125;;</span><br><span class="line">Person::<span class="built_in">Person</span>(<span class="type">int</span> age) : <span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局函数的重载+</span></span><br><span class="line">Person <span class="keyword">operator</span>+ (<span class="type">const</span> Person&amp; p1, <span class="type">const</span> Person&amp; p2) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Person</span>(p<span class="number">1.</span>page + p<span class="number">2.</span>page);</span><br><span class="line">&#125;</span><br><span class="line">Person <span class="keyword">operator</span>+ (Person&amp; p1, <span class="type">int</span> a) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Person</span>(p<span class="number">1.</span>page + a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 不安全，在作用域结束时，对象被销毁，引用变为空</span></span><br><span class="line"><span class="comment">const Person&amp; operator+ (Person&amp; p1, double a) &#123;</span></span><br><span class="line"><span class="comment">    return Person(p1.page + a);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Person <span class="title">p</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">6</span>)</span></span>;</span><br><span class="line">    <span class="comment">//Person p2 = p.operator+(p1);  可以简写成如下</span></span><br><span class="line">    Person p2 = p + p1;</span><br><span class="line"></span><br><span class="line">    Person p3 = <span class="keyword">operator</span>+(p1,p2); <span class="comment">// 可以简写为 Person p3 = p1 + p2;</span></span><br><span class="line">    std::cout &lt;&lt; p<span class="number">2.</span>page &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; p<span class="number">3.</span>page &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 运算符重载，也可以发生函数重载。</span></span><br><span class="line">    Person p4 = p + <span class="number">100</span>;</span><br><span class="line">    std::cout &lt;&lt; p<span class="number">4.</span>page &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="左移运算符重载"><a href="#左移运算符重载" class="headerlink" title="左移运算符重载"></a>左移运算符重载</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os, <span class="type">const</span> Person&amp; p);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 成员函数无法实现cout在左侧, p.operator&lt;&lt;(p1)  p &lt;&lt; p1;无法实现cout在左侧</span></span><br><span class="line"><span class="comment">    int operator&lt;&lt; (Person&amp; p1) &#123;</span></span><br><span class="line"><span class="comment">        return p1.page;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;;</span><br><span class="line">Person::<span class="built_in">Person</span>(<span class="type">int</span> age) : <span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//只能全局函数重载左移 cout &lt;&lt; p</span></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os,<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">    <span class="comment">// 因为os流对象会进行内部数据变更，所以不使用const std::ostream&amp; os</span></span><br><span class="line">    os &lt;&lt; p.page;</span><br><span class="line">    <span class="keyword">return</span> os; <span class="comment">// 链式编程</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Person <span class="title">p</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    std::cout &lt;&lt; p &lt;&lt; std::endl; <span class="comment">//链式编程</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="自增运算符重载"><a href="#自增运算符重载" class="headerlink" title="自增运算符重载"></a>自增运算符重载</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyInteger</span> &#123;</span><br><span class="line">	<span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os,<span class="type">const</span> MyInteger&amp; p);</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyInteger</span>():<span class="built_in">mNum</span>(<span class="number">10</span>) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mNum;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 前加加 : ++mNum;</span></span><br><span class="line">	MyInteger&amp; <span class="keyword">operator</span>++() &#123;</span><br><span class="line">	<span class="comment">// 返回引用是为了链式编程++(++num)</span></span><br><span class="line">		mNum++;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 后加加: mNum++, 这里的int代表占位参数,可以区分前置和后置</span></span><br><span class="line">	MyInteger <span class="keyword">operator</span>++(<span class="type">int</span>) &#123;</span><br><span class="line">		MyInteger temp = *<span class="keyword">this</span>; <span class="comment">// 不能使用引用,局部变量会被销毁</span></span><br><span class="line">		mNum++;</span><br><span class="line">		<span class="keyword">return</span> temp; </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> mNum;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os,<span class="type">const</span> MyInteger&amp; p) &#123;</span><br><span class="line">	<span class="comment">// 使用const MyInteger&amp; p的const是为了包装可以接受左值和右值</span></span><br><span class="line">	os &lt;&lt; p.mNum;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	MyInteger myInt;</span><br><span class="line">	std::cout &lt;&lt; myInt &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; ++myInt &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; myInt++ &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; myInt &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="赋值运算符重载"><a href="#赋值运算符重载" class="headerlink" title="赋值运算符重载"></a>赋值运算符重载</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C++编译器至少给一个类添加4个成员函数</span><br><span class="line">1.默认构造函数(无参，函数体为空)</span><br><span class="line">2.析构函数(无参，函数体为空)</span><br><span class="line">3.拷贝构造函数(对属性值拷贝)</span><br><span class="line">4.赋值运算符operator=(对属性值拷贝)</span><br><span class="line"></span><br><span class="line">如果类中有属性指向堆区,赋值操作也会出现深浅拷贝的问题</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span>* pAge;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> age)&#123;</span><br><span class="line">		pAge = <span class="keyword">new</span> <span class="built_in">int</span>(age);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 不重写赋值运算符的话，会发生指针指向同一块内存，析构的时候回回收两次</span></span><br><span class="line">	Person&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> != &amp;p) &#123;</span><br><span class="line">			<span class="type">int</span>* temp = p.pAge == <span class="literal">NULL</span> ?  <span class="literal">NULL</span> : <span class="keyword">new</span> <span class="built_in">int</span>(*p.pAge);</span><br><span class="line">			<span class="keyword">delete</span> pAge;</span><br><span class="line">			pAge = temp;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Person</span>() &#123;</span><br><span class="line">		<span class="keyword">if</span> (pAge != <span class="literal">NULL</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span> pAge;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="number">17</span>)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; *p<span class="number">1.</span>pAge &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; *p<span class="number">2.</span>pAge &lt;&lt; std::endl;</span><br><span class="line">	p1 = p2;</span><br><span class="line">	std::cout &lt;&lt; *p<span class="number">1.</span>pAge &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; *p<span class="number">2.</span>pAge &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	p1 = p2 = p3;</span><br><span class="line">	std::cout &lt;&lt; *p<span class="number">1.</span>pAge &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; *p<span class="number">2.</span>pAge &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; *p<span class="number">3.</span>pAge &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="关系运算符重在"><a href="#关系运算符重在" class="headerlink" title="关系运算符重在"></a>关系运算符重在</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string pName;</span><br><span class="line">	<span class="type">int</span> pAge;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> std::string name, <span class="type">int</span> age)</span><br><span class="line">		:<span class="built_in">pName</span>(name), <span class="built_in">pAge</span>(age)&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>== (<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAge == p.pAge &amp;&amp; <span class="keyword">this</span>-&gt;pName == p.pName) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>!= (<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAge == p.pAge &amp;&amp; <span class="keyword">this</span>-&gt;pName == p.pName) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;jim&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;jim&quot;</span>,<span class="number">18</span>)</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (p1 == p2) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;同一个人&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;不是同一个人&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (p1 != p2) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;不是同一个人&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;同一个人&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="函数调用运算符重载"><a href="#函数调用运算符重载" class="headerlink" title="函数调用运算符重载"></a>函数调用运算符重载</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">()也可以重载,由于重载后使用的方式十分像函数也称仿函数,仿函数没有固定写法,十分灵活。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//重载函数调用运算符</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(std::string test)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; test &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仿函数非常灵活</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Add</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span>  <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	MyPrint mp;</span><br><span class="line">	<span class="built_in">mp</span>(<span class="string">&quot;Hello World&quot;</span>);<span class="comment">// 由于非常像函数，因此又叫仿函数</span></span><br><span class="line"></span><br><span class="line">	Add add;</span><br><span class="line">	<span class="type">int</span> result = <span class="built_in">add</span>(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">	std::cout&lt;&lt;result &lt;&lt;std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//匿名函数对象</span></span><br><span class="line">	<span class="type">int</span> result1 = <span class="built_in">Add</span>()(<span class="number">12</span>,<span class="number">16</span>);<span class="comment">// 先创建匿名对象，再执行重载运算符</span></span><br><span class="line">	std::cout &lt;&lt; result1 &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">继承:减少重复代码</span><br><span class="line">语法:</span><br><span class="line">class 子类 :继承方法 父类</span><br><span class="line">子类也称为派生类,父类也为基类</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ultimate</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Base base;</span><br><span class="line">	base.<span class="built_in">test</span>();</span><br><span class="line"></span><br><span class="line">	Ultimate ul;</span><br><span class="line">	ul.<span class="built_in">test</span>();</span><br><span class="line">	ul.<span class="built_in">test1</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="继承方式"><a href="#继承方式" class="headerlink" title="继承方式"></a>继承方式</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">三种继承方式:</span><br><span class="line">public、protect、private</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">父类的private属性使用任意的继承方式都无法访问</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="type">int</span> b;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> c; <span class="comment">// 子类任何访问方式都不能访问父类的private</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PublicSon</span> : <span class="keyword">public</span> Father &#123;</span><br><span class="line"><span class="comment">//public:</span></span><br><span class="line"><span class="comment">//	int a;</span></span><br><span class="line"><span class="comment">//protected:</span></span><br><span class="line"><span class="comment">//	int b;</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		a = <span class="number">100</span>; <span class="comment">//公共继承中父类的公共属性在子类还是公共属性</span></span><br><span class="line">		b = <span class="number">120</span>;<span class="comment">//公共继承中父类的保护属性在子类还是保护属性</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProtectSon</span> : <span class="keyword">protected</span> Father &#123;</span><br><span class="line"><span class="comment">//protected:</span></span><br><span class="line"><span class="comment">//	int a;</span></span><br><span class="line"><span class="comment">//	int b;</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		a = <span class="number">100</span>;<span class="comment">//保护继承中父类的公共属性在子类是保护属性</span></span><br><span class="line">		b = <span class="number">120</span>;<span class="comment">//保护继承中父类的保护属性在子类还是保护属性</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrivateSon</span> : <span class="keyword">private</span> Father &#123;</span><br><span class="line"><span class="comment">//private:</span></span><br><span class="line"><span class="comment">//	int a;</span></span><br><span class="line"><span class="comment">//	int b;</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		a = <span class="number">100</span>;<span class="comment">//私有继承中父类的所有非私有属性在子类全是私有属性</span></span><br><span class="line">		b = <span class="number">120</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	PublicSon puson;</span><br><span class="line">	puson.a = <span class="number">100</span>;</span><br><span class="line">	<span class="comment">//puson.b =100 protected成员访问不到</span></span><br><span class="line"></span><br><span class="line">	ProtectSon proson;</span><br><span class="line">	<span class="comment">// 都是protect无法访问</span></span><br><span class="line"></span><br><span class="line">	PrivateSon prison;</span><br><span class="line">	<span class="comment">// 都是private无法访问</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="type">int</span> b;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> c; <span class="comment">// 子类任何访问方式都不能访问父类的private</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//父类中的所有非静态属性都会被继承下去</span></span><br><span class="line"><span class="comment">//父类中的私有属性被编译器隐藏了,虽然无法访问,但是客观存在</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PublicSon</span> : <span class="keyword">public</span> Father &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> d;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Father father;</span><br><span class="line">	PublicSon puson;</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(father) &lt;&lt; std::endl; <span class="comment">// 12</span></span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(puson) &lt;&lt; std::endl; <span class="comment">// 16</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用开发人员命令提示符</span><br><span class="line">D:</span><br><span class="line">cd 路径</span><br><span class="line">命令:cl /d1 reportSingleClassLayout类名 所属文件名</span><br><span class="line">ex: cl /d1 reportSingleClassLayoutFather &quot;Main.cpp&quot;</span><br></pre></td></tr></table></figure>

<h5 id="继承中构造和析构的顺序"><a href="#继承中构造和析构的顺序" class="headerlink" title="继承中构造和析构的顺序"></a>继承中构造和析构的顺序</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Father</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;父类创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Father</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;父类销毁&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Father &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Son</span>()&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;子类创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Son</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;子类销毁&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//Father father;</span></span><br><span class="line">	Son son;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">父类创建</span></span><br><span class="line"><span class="comment">子类创建</span></span><br><span class="line"><span class="comment">子类销毁</span></span><br><span class="line"><span class="comment">父类销毁</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="继承中同名的成员处理"><a href="#继承中同名的成员处理" class="headerlink" title="继承中同名的成员处理"></a>继承中同名的成员处理</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">对于同名对象:</span><br><span class="line">	1.子类中直接访问</span><br><span class="line">	2.父类中添加作用域访问</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;父类&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> c)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;父类重载函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Father &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a = <span class="number">50</span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;子类&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Son son;</span><br><span class="line">	std::cout &lt;&lt; son.a &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; son.Father::a &lt;&lt; std::endl;</span><br><span class="line">	son.<span class="built_in">func</span>();<span class="comment">//调用自己的函数</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//添加作用域访问父类的同名函数</span></span><br><span class="line">	std::cout &lt;&lt; son.Father::a &lt;&lt; std::endl;</span><br><span class="line">	son.Father::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果子类中同名函数在父类中有重载,那么子类无法直接调用父类中重载的同名函数</span></span><br><span class="line">	<span class="comment">//son.func(12);</span></span><br><span class="line"></span><br><span class="line">	son.Father::<span class="built_in">func</span>(<span class="number">12</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="继承中静态同名属性"><a href="#继承中静态同名属性" class="headerlink" title="继承中静态同名属性"></a>继承中静态同名属性</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.子类直接访问自己的</span><br><span class="line">2.访问父类的添加作用域</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> a;</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;父类&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;父类静态&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Father::a = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Father &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> a;</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;子类&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Son::a = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Son son;</span><br><span class="line">	std::cout &lt;&lt; son.a &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; son.Father::a &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; Son::a &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; Father::a &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; Son::Father::a &lt;&lt; std::endl;</span><br><span class="line">	</span><br><span class="line">	son.<span class="built_in">func</span>();</span><br><span class="line">	son.Father::<span class="built_in">func</span>();</span><br><span class="line">	Son::<span class="built_in">func</span>();</span><br><span class="line">	Son::Father::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//son.func(12);</span></span><br><span class="line">	son.Father::<span class="built_in">func</span>(<span class="number">12</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="多继承语法"><a href="#多继承语法" class="headerlink" title="多继承语法"></a>多继承语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法:</span><br><span class="line">class 类名 : 继承方式 父类1, 继承方式 父类2</span><br><span class="line">多继承会导致同名函数的出现，使用作用域区分</span><br><span class="line">c++中不建议使用多继承</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father1</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="built_in">Father1</span>() &#123;</span><br><span class="line">		a = <span class="number">100</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father2</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="built_in">Father2</span>() &#123;</span><br><span class="line">		a = <span class="number">200</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Father1, <span class="keyword">public</span> Father2 &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Son son;</span><br><span class="line">	std::cout &lt;&lt; son.Father1::a &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="菱形继承"><a href="#菱形继承" class="headerlink" title="菱形继承"></a>菱形继承</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">两个派生类继承于同一个基类</span><br><span class="line">此时又有一个派生类继承这两个派生类，这就是菱形继承或者派生继承。</span><br><span class="line"></span><br><span class="line">菱形继承的问题:</span><br><span class="line">1.二义性</span><br><span class="line">2.数据拷贝了多份</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> id;</span><br><span class="line">	<span class="built_in">Animal</span>() &#123;</span><br><span class="line">		id = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> id;</span><br><span class="line">	<span class="built_in">Cat</span>() &#123;</span><br><span class="line">		id = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tiger</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> id;</span><br><span class="line">	<span class="built_in">Tiger</span>() &#123;</span><br><span class="line">		id = <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CT</span> : <span class="keyword">public</span> Cat, <span class="keyword">public</span> Tiger&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CT</span>() &#123;</span><br><span class="line">		id = <span class="number">1000</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> id;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	CT ct;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(ct) &lt;&lt; std::endl; <span class="comment">// 4 * 5 = 20</span></span><br><span class="line">	std::cout &lt;&lt; ct.id &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; ct.Cat::id &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; ct.Tiger::id &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; ct.Animal::id &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; ct.Cat::Animal::id &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 虚继承解决，使用virtual</span></span><br><span class="line"><span class="comment">// 父类又为虚基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> id;  <span class="comment">// 在偏移8处</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :  <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tiger</span> :  <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CT</span> : <span class="keyword">public</span> Cat, <span class="keyword">public</span> Tiger &#123;&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	CT ct;</span><br><span class="line">	ct.Cat::id = <span class="number">12</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">class CT        size(8):</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment"> 0      | +--- (base class Cat)</span></span><br><span class="line"><span class="comment"> 0      | | +--- (base class Animal)</span></span><br><span class="line"><span class="comment"> 0      | | | id</span></span><br><span class="line"><span class="comment">        | | +---</span></span><br><span class="line"><span class="comment">        | +---</span></span><br><span class="line"><span class="comment"> 4      | +--- (base class Tiger)</span></span><br><span class="line"><span class="comment"> 4      | | +--- (base class Animal)</span></span><br><span class="line"><span class="comment"> 4      | | | id</span></span><br><span class="line"><span class="comment">        | | +---</span></span><br><span class="line"><span class="comment">        | +---</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 虚继承解决，使用virtual</span></span><br><span class="line"><span class="comment">// 父类又为虚基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> id;  <span class="comment">// 在偏移8处</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">    <span class="comment">// 没有自己的成员变量，只有虚基表指针</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tiger</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;</span><br><span class="line">    <span class="comment">// 没有自己的成员变量，只有虚基表指针  </span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CT</span> : <span class="keyword">public</span> Cat, <span class="keyword">public</span> Tiger &#123;</span><br><span class="line">    <span class="comment">// 没有自己的成员变量</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	CT ct;</span><br><span class="line">	ct.id = <span class="number">12</span>;</span><br><span class="line">	<span class="comment">// 虚继承的本质是依靠一个虚基表维护</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">class CT        size(12):</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment"> 0      | +--- (base class Cat)</span></span><br><span class="line"><span class="comment"> 0      | | &#123;vbptr&#125;</span></span><br><span class="line"><span class="comment">        | +---</span></span><br><span class="line"><span class="comment"> 4      | +--- (base class Tiger)</span></span><br><span class="line"><span class="comment"> 4      | | &#123;vbptr&#125;</span></span><br><span class="line"><span class="comment">        | +---</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment">        +--- (virtual base Animal)</span></span><br><span class="line"><span class="comment"> 8      | id</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">CT::$vbtable@Cat@:</span></span><br><span class="line"><span class="comment"> 0      | 0</span></span><br><span class="line"><span class="comment"> 1      | 8 (CTd(Cat+0)Animal)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">CT::$vbtable@Tiger@:</span></span><br><span class="line"><span class="comment"> 0      | 0</span></span><br><span class="line"><span class="comment"> 1      | 4 (CTd(Tiger+0)Animal)</span></span><br><span class="line"><span class="comment">vbi:       class  offset o.vbptr  o.vbte fVtorDisp</span></span><br><span class="line"><span class="comment">          Animal       8       0       4 0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">多态的分类:</span><br><span class="line"></span><br><span class="line">1.静态多态:函数重载和运算符重载</span><br><span class="line">2.动态多态:派生类和虚函数运行时多态</span><br><span class="line"></span><br><span class="line">区别:</span><br><span class="line">静态多态:编译时地址就确定了</span><br><span class="line">动态多态:运行时确定地址</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;动物嗷嗷&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :  <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;小猫喵喵~&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 地址早绑定,在编译阶段就确认了地址</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">(Animal&amp; animal)</span> </span>&#123;</span><br><span class="line">	animal.<span class="built_in">Speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Cat cat;</span><br><span class="line">	<span class="built_in">Speak</span>(cat);  <span class="comment">// 动物嗷嗷</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;动物嗷嗷&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :  <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123; <span class="comment">// 前面的virtual可写可不写</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;小猫喵喵~&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父类使用了virtual修饰，地址广域晚绑定，运行时确定</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">(Animal&amp; animal)</span> </span>&#123;</span><br><span class="line">	animal.<span class="built_in">Speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Cat cat;</span><br><span class="line">	<span class="built_in">Speak</span>(cat);  <span class="comment">// 小猫喵喵~</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	动态多态的条件:</span></span><br><span class="line"><span class="comment">	1.继承关系</span></span><br><span class="line"><span class="comment">	2.子类要重写父类的虚函数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	重写:函数返回类型，函数名，参数列表要完全相同，只是函数体不同</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 动态多态的使用</span></span><br><span class="line">	<span class="comment">//父类的指针或者引用执行子类对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="动态多态的原理"><a href="#动态多态的原理" class="headerlink" title="动态多态的原理"></a>动态多态的原理</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	 <span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;动物嗷嗷&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :  <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;小猫喵喵~&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">(Animal&amp; animal)</span> </span>&#123;</span><br><span class="line">	animal.<span class="built_in">Speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(Animal) &lt;&lt; std::endl; <span class="comment">// 1</span></span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(Cat) &lt;&lt; std::endl; <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	 <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;动物嗷嗷&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :  <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;小猫喵喵~&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">(Animal&amp; animal)</span> </span>&#123;</span><br><span class="line">	animal.<span class="built_in">Speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(Animal) &lt;&lt; std::endl; <span class="comment">// 4 存储虚函数指针 vfptr</span></span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(Cat) &lt;&lt; std::endl; <span class="comment">// 4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">class Animal    size(4):</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment"> 0      | &#123;vfptr&#125;</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Animal::$vftable@:</span></span><br><span class="line"><span class="comment">        | &amp;Animal_meta</span></span><br><span class="line"><span class="comment">        |  0</span></span><br><span class="line"><span class="comment"> 0      | &amp;Animal::Speak</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Animal::Speak this adjustor: 0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">class Cat       size(4):</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment"> 0      | +--- (base class Animal)</span></span><br><span class="line"><span class="comment"> 0      | | &#123;vfptr&#125;</span></span><br><span class="line"><span class="comment">        | +---</span></span><br><span class="line"><span class="comment">        +---</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Cat::$vftable@:</span></span><br><span class="line"><span class="comment">        | &amp;Cat_meta</span></span><br><span class="line"><span class="comment">        |  0</span></span><br><span class="line"><span class="comment"> 0      | &amp;Cat::Speak</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// </span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	 <span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;动物嗷嗷&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :  <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>&#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;小猫喵喵~&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Speak</span><span class="params">(Animal&amp; animal)</span> </span>&#123;</span><br><span class="line">	animal.<span class="built_in">Speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(Animal) &lt;&lt; std::endl; <span class="comment">// 8 </span></span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">sizeof</span>(Cat) &lt;&lt; std::endl; <span class="comment">// 12</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="多态的好处"><a href="#多态的好处" class="headerlink" title="多态的好处"></a>多态的好处</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.可读性好</span><br><span class="line">2.复用高</span><br><span class="line">3.利于维护与扩展</span><br><span class="line"></span><br><span class="line">代码量大了</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">开闭原则:扩展开放，修改关闭。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多态</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractCalutor</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="type">int</span> b;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">result</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Add</span> : <span class="keyword">public</span> AbstractCalutor &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">result</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; a + b &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Reduce</span> : <span class="keyword">public</span> AbstractCalutor &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">result</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; a - b &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> a - b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">result</span><span class="params">(AbstractCalutor* abc)</span> </span>&#123;</span><br><span class="line">	abc-&gt;<span class="built_in">result</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Reduce add;</span><br><span class="line">	add.a = <span class="number">10</span>;</span><br><span class="line">	add.b = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">result</span>(&amp;add);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="纯虚函数和抽象类"><a href="#纯虚函数和抽象类" class="headerlink" title="纯虚函数和抽象类"></a>纯虚函数和抽象类</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">多态中父类的虚函数的实现没有意义，主要是调用子类的重写内容</span><br><span class="line">语法:</span><br><span class="line"> virtual 函数返回类型 函数名(函数返回列表) = 0;</span><br><span class="line"> </span><br><span class="line"> 包含纯虚函数的类为抽象类</span><br><span class="line"> </span><br><span class="line"> 抽象类的特定:</span><br><span class="line"> 1.不可以实例化</span><br><span class="line"> 2.子类必须重写虚函数，否则也是抽象类</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">// 多态</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="type">int</span> b;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">result</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 不重写就是抽象类</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">result</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;我不是抽象类&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//Animal animal; 无法实例化</span></span><br><span class="line">	Cat cat;</span><br><span class="line">	cat.<span class="built_in">result</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.煮水</span></span><br><span class="line"><span class="comment">	2.泡</span></span><br><span class="line"><span class="comment">	3.倒入杯子</span></span><br><span class="line"><span class="comment">	4.加料</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractDrink</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">hot</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">make</span><span class="params">(<span class="type">const</span> std::string&amp; str)</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">transfor</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">const</span> std::string&amp; str1, <span class="type">const</span> std::string&amp; str2)</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">(<span class="type">const</span> std::string&amp; str, <span class="type">const</span> std::string&amp; str1, <span class="type">const</span> std::string&amp; str2)</span> </span>&#123;</span><br><span class="line">		<span class="built_in">hot</span>();</span><br><span class="line">		<span class="built_in">make</span>(str);</span><br><span class="line">		<span class="built_in">transfor</span>();</span><br><span class="line">		<span class="built_in">add</span>(str1,str2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Coffee</span> : <span class="keyword">public</span> AbstractDrink &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">hot</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;加热中...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">make</span><span class="params">(<span class="type">const</span> std::string&amp; str)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;冲跑&quot;</span> &lt;&lt; str &lt;&lt; <span class="string">&quot;中...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">transfor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;移入杯子&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">const</span> std::string&amp; str1, <span class="type">const</span> std::string&amp; str2)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; str1 &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; str2 &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MakeDrink</span><span class="params">(AbstractDrink* adr)</span> </span>&#123;</span><br><span class="line">	adr-&gt;<span class="built_in">work</span>(<span class="string">&quot;咖啡&quot;</span>,<span class="string">&quot;糖&quot;</span>,<span class="string">&quot;牛奶&quot;</span>);</span><br><span class="line">	<span class="keyword">delete</span> adr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">MakeDrink</span>(<span class="keyword">new</span> Coffee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="虚析构和纯虚析构"><a href="#虚析构和纯虚析构" class="headerlink" title="虚析构和纯虚析构"></a>虚析构和纯虚析构</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">使用多态时，如果子类有属性开辟到堆区，父类指针在释放时无法调用子类的析构代码</span><br><span class="line"></span><br><span class="line">解决方法:将父类的析构函数改为虚析构或纯虚析构。</span><br><span class="line"></span><br><span class="line">虚析构和纯虚析构:</span><br><span class="line">	可以解决父类指针释放子类对象</span><br><span class="line">	都需要具体的函数实现</span><br><span class="line">虚析构和纯虚析构:</span><br><span class="line">	有纯虚析构的类是抽象类</span><br><span class="line">	</span><br><span class="line">语法:</span><br><span class="line">	virtual ~类名()&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	virtual ~类名() = 0；</span><br><span class="line">	~类名()&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;动物叫...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*virtual ~Animal() = 0;*/</span></span><br><span class="line">	<span class="built_in">Animal</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;万物生&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;万物死&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string* cname;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Cat</span>(<span class="type">const</span> std::string&amp; name) &#123;</span><br><span class="line">		cname = <span class="keyword">new</span> std::<span class="built_in">string</span>(name);</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;猫生&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt;*cname&lt;&lt; <span class="string">&quot;猫叫...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Cat</span>() &#123;</span><br><span class="line">		<span class="keyword">if</span> (cname != <span class="literal">NULL</span>)&#123; <span class="keyword">delete</span> cname; &#125;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;猫死&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(Animal* animal)</span> </span>&#123;</span><br><span class="line">	animal-&gt;<span class="built_in">speak</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	父类指针在析构的时候，不会调用子类的析构函数，导致堆区属性无法</span></span><br><span class="line"><span class="comment">	释放，出现内存泄漏。</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">delete</span> animal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test</span>(<span class="keyword">new</span> <span class="built_in">Cat</span>(<span class="string">&quot;Tom&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;动物叫...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*virtual ~Animal() = 0;*/</span></span><br><span class="line">	<span class="built_in">Animal</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;万物生&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() = <span class="number">0</span>; <span class="comment">// 纯虚析构函数需要声明和定义</span></span><br><span class="line">&#125;;</span><br><span class="line">Animal::~<span class="built_in">Animal</span>() &#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;万物死&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string* cname;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Cat</span>(<span class="type">const</span> std::string&amp; name) &#123;</span><br><span class="line">		cname = <span class="keyword">new</span> std::<span class="built_in">string</span>(name);</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;猫生&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt;*cname&lt;&lt; <span class="string">&quot;猫叫...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Cat</span>() &#123;</span><br><span class="line">		<span class="keyword">if</span> (cname != <span class="literal">NULL</span>)&#123; <span class="keyword">delete</span> cname; &#125;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;猫死&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(Animal* animal)</span> </span>&#123;</span><br><span class="line">	animal-&gt;<span class="built_in">speak</span>();</span><br><span class="line">	<span class="keyword">delete</span> animal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test</span>(<span class="keyword">new</span> <span class="built_in">Cat</span>(<span class="string">&quot;Tom&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">通过文件来实现持久化</span><br><span class="line">&lt;fstream&gt;</span><br><span class="line"></span><br><span class="line">文件的分类:</span><br><span class="line">	1.文本文件:以文本的ASCII码形式存储。</span><br><span class="line">	2.二进制文件:以二进制的形式存储在计算机中。</span><br><span class="line">	</span><br><span class="line">操作文件3大类:</span><br><span class="line">ofstream 写操作</span><br><span class="line">ifstream 读操作</span><br><span class="line">fstream 读写操作</span><br></pre></td></tr></table></figure>

<h5 id="文本写文件"><a href="#文本写文件" class="headerlink" title="文本写文件"></a>文本写文件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">流程:</span><br><span class="line">1.包含头文件</span><br><span class="line">#include &lt;fstream&gt;</span><br><span class="line"></span><br><span class="line">2.创建流对象</span><br><span class="line">std::fstream ofs;</span><br><span class="line"></span><br><span class="line">3.打开文件</span><br><span class="line">ofs.open(&quot;路径&quot;, 打开方式);</span><br><span class="line"></span><br><span class="line">4.写数据</span><br><span class="line">ofs &lt;&lt; &quot;代写入的数据&quot;;</span><br><span class="line"></span><br><span class="line">5.关闭文件</span><br><span class="line">ofs.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">文件打开方式:</span><br><span class="line">	std::ios::in		为读文件而打开文件</span><br><span class="line">	std::ios::out    为写文件而打开文件</span><br><span class="line">	std::ios::ate    初始位置:文件尾</span><br><span class="line">	std::ios::app    追加方式写文件</span><br><span class="line">	std::ios::trunc  如果文件存在先删除再创建</span><br><span class="line">	std::ios::binary 二级制方式</span><br><span class="line">	</span><br><span class="line">打开方式可以配合使用|来隔开。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::ofstream ofs;</span><br><span class="line">	ofs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>,std::ios::out);</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;你好啊！&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	ofs &lt;&lt; <span class="string">&quot;你也好啊！&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="文本读文件"><a href="#文本读文件" class="headerlink" title="文本读文件"></a>文本读文件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">读文件的步骤:</span><br><span class="line">1.包含头文件	#include &lt;fstream&gt;</span><br><span class="line">2.创建流对象 std::ifstream ifs;</span><br><span class="line">3.打开文件并判断文件是否打开成功 ifs.open(&quot;文件路径&quot;, 打开方式);</span><br><span class="line">4.读数据(四种方式读取)</span><br><span class="line">5.关闭文件 ifs.close();</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::ifstream ifs;</span><br><span class="line">	ifs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>,std::ios::in);</span><br><span class="line">	<span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;文件打开失败!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一种</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	char buf[1024] = &#123; 0 &#125;;</span></span><br><span class="line"><span class="comment">	while (ifs &gt;&gt; buf) &#123;</span></span><br><span class="line"><span class="comment">		std::cout &lt;&lt; buf &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第二种</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	char buf[1024] = &#123; 0 &#125;;</span></span><br><span class="line"><span class="comment">	while (ifs.getline(buf, sizeof(buf))) &#123;</span></span><br><span class="line"><span class="comment">		std::cout &lt;&lt; buf &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第三种</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	std::string buf;</span></span><br><span class="line"><span class="comment">	while (getline(ifs,buf)) &#123;</span></span><br><span class="line"><span class="comment">		std::cout &lt;&lt; buf &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第四种:不推荐</span></span><br><span class="line">	<span class="type">char</span> c;</span><br><span class="line">	<span class="keyword">while</span> ((c=ifs.<span class="built_in">get</span>())!= EOF) &#123;</span><br><span class="line">		std::cout &lt;&lt; c &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	ifs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="二进制写文件"><a href="#二进制写文件" class="headerlink" title="二进制写文件"></a>二进制写文件</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">char</span> m_Name[<span class="number">64</span>]; <span class="comment">// 姓名。推荐使用c的字符串</span></span><br><span class="line">	<span class="type">int</span> m_Age; <span class="comment">//年龄</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::ofstream ofs;</span><br><span class="line">	ofs.<span class="built_in">open</span>(<span class="string">&quot;person.txt&quot;</span>, std::ios::out | std::ios::binary);</span><br><span class="line">	Person p = &#123;<span class="string">&quot;张三&quot;</span>, <span class="number">18</span>&#125;;</span><br><span class="line">	ofs.<span class="built_in">write</span>((<span class="type">const</span> <span class="type">char</span>*)&amp;p, <span class="built_in">sizeof</span>(p));</span><br><span class="line">	ofs.<span class="built_in">close</span>(); <span class="comment">// 二进制写会乱码，但是读的时候是正常的</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="二进制读文件"><a href="#二进制读文件" class="headerlink" title="二进制读文件"></a>二进制读文件</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">char</span> m_Name[<span class="number">64</span>]; <span class="comment">// 姓名。推荐使用c的字符串</span></span><br><span class="line">	<span class="type">int</span> m_Age; <span class="comment">//年龄</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::ifstream ifs;</span><br><span class="line">	ifs.<span class="built_in">open</span>(<span class="string">&quot;person.txt&quot;</span>, std::ios::in | std::ios::binary);</span><br><span class="line">	<span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>()) &#123; <span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line">	Person p;</span><br><span class="line">	ifs.<span class="built_in">read</span>((<span class="type">char</span>*) &amp;p,<span class="built_in">sizeof</span>(Person));</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot;; age: &quot;</span> &lt;&lt; p.m_Age &lt;&lt; std::endl;</span><br><span class="line">	ifs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">模板不可以直接使用，通用但不万能，复用性好</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">泛型编程:利用模板</span><br><span class="line">c++提供两种模板机制:</span><br><span class="line">	1.函数模板	2.类模板</span><br></pre></td></tr></table></figure>

<h5 id="函数模板"><a href="#函数模板" class="headerlink" title="函数模板"></a>函数模板</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">作用:建立一个通用函数,其函数返回值类型和形参类型可以不具体指定，使用虚拟类型代替</span><br><span class="line"></span><br><span class="line">语法: template &lt;typename T&gt;</span><br><span class="line">函数声明或定义</span><br><span class="line">	template:声明创建模板</span><br><span class="line">	typename:表明修饰的是数据类型,可以使用class替代</span><br><span class="line">	T:通用的数据类型,名称可以替换,通常为大写字母</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="comment">// 声明T是一个通用的数据类型</span></span><br><span class="line"><span class="function">T <span class="title">add</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span>  a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">4</span>;</span><br><span class="line">	<span class="built_in">add</span>(a,b); <span class="comment">// 自动类型推导</span></span><br><span class="line"></span><br><span class="line">	<span class="type">float</span> c = <span class="number">0.4f</span>;</span><br><span class="line">	<span class="type">float</span> d = <span class="number">3.6f</span>;</span><br><span class="line">	<span class="built_in">add</span>&lt;<span class="type">float</span>&gt;(c, d);<span class="comment">// 显示指定类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 自动类型推导,必须要推导出一致的数据类型,T才可以使用</span><br><span class="line"># 模板必须要确定出T的数据类型才可以使用</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="comment">// typename可以使用class替代</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(T* a, T* b)</span></span>&#123;</span><br><span class="line">	<span class="comment">// T* temp = NULL; 指针一定要初始化</span></span><br><span class="line">	<span class="comment">// *temp = *a; NULL解引用未定义事件</span></span><br><span class="line">	T temp = *a;</span><br><span class="line">	*a = *b;</span><br><span class="line">	*b = temp;</span><br><span class="line">	<span class="comment">// 只有使用new创建的才要delete</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">12</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">13</span>;</span><br><span class="line">	<span class="built_in">swap</span>&lt;<span class="type">int</span>&gt;(&amp;a,&amp;b);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;a: &quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;,b: &quot;</span> &lt;&lt; b &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">float</span> d = <span class="number">1.2f</span>;</span><br><span class="line">	<span class="type">float</span> e = <span class="number">2.3f</span>;</span><br><span class="line">	<span class="built_in">swap</span>&lt;<span class="type">float</span>&gt;(&amp;d, &amp;e);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;d: &quot;</span> &lt;&lt; d &lt;&lt; <span class="string">&quot;,e: &quot;</span> &lt;&lt; e &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sort</span><span class="params">(T* ptr, <span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size - <span class="number">1</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; size; j++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (ptr[j] &gt; ptr[i]) &#123;</span><br><span class="line">				<span class="type">int</span> temp;</span><br><span class="line">				temp = ptr[j];</span><br><span class="line">				ptr[j] = ptr[i];</span><br><span class="line">				ptr[i] = temp;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(T* ptr, <span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">		std::cout &lt;&lt; ptr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> size;</span><br><span class="line">	<span class="type">int</span> arr[<span class="number">5</span>] = &#123; <span class="number">5</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span> &#125;;</span><br><span class="line">	size = <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(<span class="type">int</span>);</span><br><span class="line">	<span class="built_in">printInfo</span>(arr,size);</span><br><span class="line">	<span class="built_in">sort</span>(arr, size);</span><br><span class="line">	<span class="built_in">printInfo</span>(arr, size);</span><br><span class="line"></span><br><span class="line">	<span class="type">char</span> arr1[<span class="number">5</span>] = &#123; <span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;G&#x27;</span> &#125;;</span><br><span class="line">	size = <span class="built_in">sizeof</span>(arr1) / <span class="built_in">sizeof</span>(<span class="type">char</span>);</span><br><span class="line">	<span class="built_in">printInfo</span>(arr1, size);</span><br><span class="line">	<span class="built_in">sort</span>(arr1, size);</span><br><span class="line">	<span class="built_in">printInfo</span>(arr1, size);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="普通函数和函数模板的区别"><a href="#普通函数和函数模板的区别" class="headerlink" title="普通函数和函数模板的区别"></a>普通函数和函数模板的区别</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">普通函数会发生自动类型转换(隐式转换)。</span><br><span class="line">函数模板调用时,使用了自动类型推导,就不会发生隐式类型转换。如果使用了显示指定类型,则可以发生隐式类型转换。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add1</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; a + b &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 普通函数可以发生隐式类型转换</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">float</span> a, <span class="type">double</span> b)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; a + b &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">12</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">13</span>;</span><br><span class="line">	<span class="built_in">add</span>(a,b);</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> a1 = <span class="number">15</span>;</span><br><span class="line">	<span class="type">double</span> b1 = <span class="number">12</span>;</span><br><span class="line">	<span class="comment">//add1(a1, b1);自动类型推导无法类型转换</span></span><br><span class="line">	<span class="built_in">add1</span>&lt;<span class="type">double</span>&gt;(a1,b1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="普通函数与函数模板的调用规则"><a href="#普通函数与函数模板的调用规则" class="headerlink" title="普通函数与函数模板的调用规则"></a>普通函数与函数模板的调用规则</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.如果普通函数和模板函数都可以实现,优先普通函数</span><br><span class="line">2.可以通过空模板参数来强制调用函数模板</span><br><span class="line">3.函数模板可以发生重载</span><br><span class="line">4.如果函数模板更好匹配优先使用函数模板</span><br><span class="line"></span><br><span class="line">普通函数最好不要和模板函数一起出现，容易二义性</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;函数模板&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(T a, T b, T c)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;函数模板重载&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;普通函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">12</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">25</span>;</span><br><span class="line">	<span class="built_in">add</span>(a,b);</span><br><span class="line">	add&lt;&gt;(a,b);</span><br><span class="line">	<span class="type">int</span> c = <span class="number">10</span>;</span><br><span class="line">	add&lt;&gt;(a,b,c);</span><br><span class="line"></span><br><span class="line">	<span class="type">char</span> a2 = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">	<span class="type">char</span> b2 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">	<span class="built_in">add</span>(a2,b2);<span class="comment">//使用函数模板，更好匹配，只要推出T，不用进行类型转换</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="函数模板的局限性"><a href="#函数模板的局限性" class="headerlink" title="函数模板的局限性"></a>函数模板的局限性</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string pname;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age) </span><br><span class="line">	:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">compare</span><span class="params">(T  &amp;a, T &amp;b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (a == b) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="function"><span class="type">bool</span> <span class="title">compare</span><span class="params">(Person &amp;a,Person &amp;b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (a.pname == b.pname &amp;&amp; a.page == b.page) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">101</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">compare</span>(a,b) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;tom&quot;</span>,<span class="number">12</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;tom&quot;</span>,<span class="number">12</span>)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">compare</span>(p1, p2) &lt;&lt; std::endl;<span class="comment">//还可以重写==来实现</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类模板"><a href="#类模板" class="headerlink" title="类模板"></a>类模板</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">建立一个通用的类,类中的成员数据类型可以不具体制定,使用虚拟的数据类型代替</span><br><span class="line"></span><br><span class="line">语法: template &lt;typename T&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	NameType pname;</span><br><span class="line">	AgeType page;</span><br><span class="line"><span class="keyword">public</span>:	</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> NameType &amp;name,<span class="type">const</span> AgeType &amp;age) </span><br><span class="line">	:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; pname &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; page &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string name = <span class="string">&quot;jim&quot;</span>;</span><br><span class="line">	<span class="type">int</span> age = <span class="number">24</span>;</span><br><span class="line">	<span class="function">Person&lt;std::string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(name, age)</span></span>;</span><br><span class="line">	p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类模板和函数模板的区别"><a href="#类模板和函数模板的区别" class="headerlink" title="类模板和函数模板的区别"></a>类模板和函数模板的区别</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">区别:</span><br><span class="line">1.类模板没有自动类型推导</span><br><span class="line">2.类模板在模板参数列表中可以有默认参数</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	NameType pname;</span><br><span class="line">	AgeType page;</span><br><span class="line"><span class="keyword">public</span>:	</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> NameType &amp;name, <span class="type">const</span> AgeType&amp; age = <span class="number">10</span>)</span><br><span class="line">	:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; pname &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; page &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string name = <span class="string">&quot;jim&quot;</span>;</span><br><span class="line">	<span class="type">int</span> age = <span class="number">24</span>;</span><br><span class="line">	<span class="comment">//Person p(name, age); 不能自动推导</span></span><br><span class="line">	<span class="function">Person&lt;std::string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(name)</span></span>;  <span class="comment">// 只有类模板可以使用默认参数</span></span><br><span class="line">	p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类模板中的成员函数的创建时机"><a href="#类模板中的成员函数的创建时机" class="headerlink" title="类模板中的成员函数的创建时机"></a>类模板中的成员函数的创建时机</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">普通类中的成员函数一开始就创建</span><br><span class="line">使用类模板的成员函数调用时创建</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person1</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showPerson1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Person1&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person2</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showPerson2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Person1&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Show</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T obj;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		obj.<span class="built_in">showPerson1</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		obj.<span class="built_in">showPerson2</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Show&lt;Person1&gt; show;</span><br><span class="line">	show.<span class="built_in">func1</span>();</span><br><span class="line">	<span class="comment">// show.func2(); 无法调用，调用的时候才创建对应的。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类模板对象做函数参数"><a href="#类模板对象做函数参数" class="headerlink" title="类模板对象做函数参数"></a>类模板对象做函数参数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">类模板实例化出来的对象,向函数传参</span><br><span class="line"></span><br><span class="line">1.指定传入类型,直接显示对象的数据类型</span><br><span class="line">2.参数模板化,将对象中的参数变为模板传递</span><br><span class="line">3.整个类模板化,将对象类型模板化进行传递。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	NameType pname;</span><br><span class="line">	AgeType page;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> NameType&amp; name, <span class="type">const</span> AgeType&amp; age)</span><br><span class="line">	:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="built_in">typeid</span>(NameType).<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(AgeType).<span class="built_in">name</span>() &lt;&lt; std::endl;<span class="comment">// 查看数据类型</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="comment">// 常量函数的调用被this调用时,this的数据类型const Person* </span></span><br><span class="line">		<span class="comment">// 普通函数的this被调用时,this的数据类型为Person*</span></span><br><span class="line">		std::cout &lt;&lt; <span class="keyword">this</span>-&gt;pname &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;page &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1, <span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson</span><span class="params">(<span class="type">const</span> Person&lt;T1, T2&gt;&amp; obj)</span> </span>&#123;</span><br><span class="line">	obj.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T3&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson1</span><span class="params">(<span class="type">const</span> T3&amp; obj)</span> </span>&#123;</span><br><span class="line">	obj.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person&lt;std::string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;jim&quot;</span>,<span class="number">24</span>)</span></span>; <span class="comment">// 指定传入的类型</span></span><br><span class="line">	p.<span class="built_in">showPerson</span>();</span><br><span class="line"></span><br><span class="line">	<span class="function">Person&lt;std::string, <span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;lili&quot;</span>, <span class="number">23</span>)</span></span>;</span><br><span class="line">	<span class="built_in">printPerson</span>(p1); <span class="comment">// 参数模板化</span></span><br><span class="line"></span><br><span class="line">	<span class="function">Person&lt;std::string, <span class="type">int</span>&gt; <span class="title">p2</span><span class="params">(<span class="string">&quot;ollma&quot;</span>, <span class="number">16</span>)</span></span>;</span><br><span class="line">	<span class="built_in">printPerson1</span>(p2); <span class="comment">// 类模板化</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类模板和继承"><a href="#类模板和继承" class="headerlink" title="类模板和继承"></a>类模板和继承</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">子类继承的父类是类模板时,子类在声明的时候要指定父类的类型</span><br><span class="line">如果不指定编译器无法给子类分配内存</span><br><span class="line">如果想要灵活指定父类的类型，子类也要变成类模板</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T id;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal&lt;<span class="type">int</span>&gt; &#123;&#125;; <span class="comment">// 必须指定父类的数据类型才能继承</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>,<span class="keyword">class</span> <span class="title class_">T2</span>&gt; <span class="comment">// 灵活构建</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">public</span> Animal&lt;T1&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T2 age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Cat cat;</span><br><span class="line">	cat.id = <span class="number">12</span>;</span><br><span class="line">	std::cout &lt;&lt; cat.id &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	Dog&lt;<span class="type">char</span>, <span class="type">int</span>&gt; dog;</span><br><span class="line">	dog.id = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">	dog.age = <span class="number">10</span>;</span><br><span class="line">	std::cout &lt;&lt; dog.id&lt;&lt;<span class="string">&quot;, &quot;</span>&lt;&lt;dog.age &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类模板成员函数的类外实现"><a href="#类模板成员函数的类外实现" class="headerlink" title="类模板成员函数的类外实现"></a>类模板成员函数的类外实现</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类模板成员函数的类外实现</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T1 aId;</span><br><span class="line">	T2 aName;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name);</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAnimal</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Animal&lt;T1,T2&gt;::<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name) </span><br><span class="line">:<span class="built_in">aId</span>(id),<span class="built_in">aName</span>(name)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Animal&lt;T1,T2&gt;::<span class="built_in">showAnimal</span>() &#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="keyword">this</span>-&gt;aId &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;aName &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Animal&lt;<span class="type">int</span>, std::string&gt; <span class="title">animal</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;yoyo&quot;</span>)</span></span>;</span><br><span class="line">	animal.<span class="built_in">showAnimal</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类模板文件分文件编写"><a href="#类模板文件分文件编写" class="headerlink" title="类模板文件分文件编写"></a>类模板文件分文件编写</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">问题:类模板文件是在调用时创建的，分文件导致链接不到。</span><br><span class="line"></span><br><span class="line">解决方案:</span><br><span class="line">	1.直接包含.cpp原文件而不是.h</span><br><span class="line">	2.将声明和定义写在同一个文件中,并修改后缀为.hpp,hpp是约定的名称,并不是强制。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">方法一:引用.cpp而不是.h</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T1 aId;</span><br><span class="line">	T2 aName;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name);</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAnimal</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// Animal.h</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Animal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Animal&lt;T1, T2&gt;::<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name)</span><br><span class="line">	:<span class="built_in">aId</span>(id), <span class="built_in">aName</span>(name) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Animal&lt;T1, T2&gt;::<span class="built_in">showAnimal</span>() &#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="keyword">this</span>-&gt;aId &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;aName &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Animal.cpp</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Animal.cpp&quot;</span> <span class="comment">// 从Animal.h改为Animal.cpp</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Animal&lt;<span class="type">int</span>, std::string&gt; <span class="title">animal</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;yoyo&quot;</span>)</span></span>;</span><br><span class="line">	animal.<span class="built_in">showAnimal</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">方法二:.h和cpp写一块使用hpp,推荐</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	T1 aId;</span><br><span class="line">	T2 aName;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name);</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showAnimal</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Animal&lt;T1, T2&gt;::<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name)</span><br><span class="line">	:<span class="built_in">aId</span>(id), <span class="built_in">aName</span>(name) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Animal&lt;T1, T2&gt;::<span class="built_in">showAnimal</span>() &#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="keyword">this</span>-&gt;aId &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;aName &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Animal.hpp&quot;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Animal&lt;<span class="type">int</span>, std::string&gt; <span class="title">animal</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;yoyo&quot;</span>)</span></span>;</span><br><span class="line">	animal.<span class="built_in">showAnimal</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="类模板与友元"><a href="#类模板与友元" class="headerlink" title="类模板与友元"></a>类模板与友元</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">全局函数类内实现,直接在类内声明友元(推荐)</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T1 aId;</span><br><span class="line">	T2 aName;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">// 全局函数类内实现</span></span><br><span class="line">	<span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">showInfo</span><span class="params">(Animal&lt;T1, T2&gt; &amp;animal)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; animal.aId &lt;&lt; <span class="string">&quot; ,&quot;</span> &lt;&lt; animal.aName &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Animal&lt;T1, T2&gt;::<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name)</span><br><span class="line">	:<span class="built_in">aId</span>(id), <span class="built_in">aName</span>(name) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Animal&lt;<span class="type">int</span>, std::string&gt; <span class="title">animal</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;yoyo&quot;</span>)</span></span>;</span><br><span class="line">	<span class="built_in">showInfo</span>(animal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">全局函数类外实现,想要提前让编译器知道全局函数的存在</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt; <span class="comment">// 提前让编译器知道Person</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1, <span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showInfo</span><span class="params">(Animal&lt;T1, T2&gt;&amp; animal)</span></span>; <span class="comment">// 提前让编译器知道函数存在</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T1 aId;</span><br><span class="line">	T2 aName;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">// 全局函数类外实现</span></span><br><span class="line">	<span class="comment">// 加上空参数模板列表(因为声明为普通函数,但是定义的时候是模板函数,使用&lt;&gt;就改声明为函数模板)</span></span><br><span class="line">	<span class="keyword">friend</span> <span class="type">void</span> showInfo&lt;&gt;(Animal&lt;T1, T2&gt;&amp; animal);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Animal&lt;T1, T2&gt;::<span class="built_in">Animal</span>(<span class="type">const</span> T1&amp; id, <span class="type">const</span> T2&amp; name)</span><br><span class="line">	:<span class="built_in">aId</span>(id), <span class="built_in">aName</span>(name) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1, <span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showInfo</span><span class="params">(Animal&lt;T1, T2&gt;&amp; animal)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; animal.aId &lt;&lt; <span class="string">&quot; ,&quot;</span> &lt;&lt; animal.aName &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Animal&lt;<span class="type">int</span>, std::string&gt; <span class="title">animal</span><span class="params">(<span class="number">12</span>, <span class="string">&quot;yoyo&quot;</span>)</span></span>;</span><br><span class="line">	<span class="built_in">showInfo</span>(animal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="封住数组类"><a href="#封住数组类" class="headerlink" title="封住数组类"></a>封住数组类</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Array</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> capacity;<span class="comment">// 容量</span></span><br><span class="line">	T* array; <span class="comment">//数组</span></span><br><span class="line">	<span class="type">int</span> size; <span class="comment">// 大小</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Array</span>(<span class="type">int</span> size)</span><br><span class="line">		:<span class="built_in">capacity</span>(size) &#123;</span><br><span class="line">		array = <span class="keyword">new</span> T[size];</span><br><span class="line">		<span class="keyword">this</span>-&gt;size = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Array</span>(<span class="type">const</span> Array&amp; array)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;size = array.size;</span><br><span class="line">		<span class="keyword">this</span>-&gt;capacity = array.capacity;</span><br><span class="line">		<span class="keyword">this</span>-&gt;array = <span class="keyword">new</span> T[array.capacity];</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; array.size; i++) &#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;array[i] = array.array[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Array</span>() &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;array != <span class="literal">NULL</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;array;</span><br><span class="line">			array = <span class="literal">NULL</span>;<span class="comment">// 置空复制野指针</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			std::cout &lt;&lt; array[i] &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">addMember</span><span class="params">(<span class="type">const</span> T* <span class="type">const</span> array)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (size &lt; capacity) &#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;array[size] = *array;</span><br><span class="line">			size++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;空间不足！&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">deleteMember</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (size != <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;array[size<span class="number">-1</span>] = <span class="literal">NULL</span>;</span><br><span class="line">			size--;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;已经没有其他元素了！&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getCapacity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> capacity;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> size;</span><br><span class="line">	&#125;</span><br><span class="line">	T&amp; <span class="keyword">operator</span>[] (<span class="type">int</span> index)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;array[index];</span><br><span class="line">	&#125;</span><br><span class="line">	Array&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Array&amp; array) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;size = array.size;</span><br><span class="line">		<span class="keyword">this</span>-&gt;capacity = array.capacity;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;array != <span class="literal">NULL</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;array;</span><br><span class="line">			<span class="keyword">this</span>-&gt;array = <span class="literal">NULL</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;capacity = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;size = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">this</span>-&gt;array = <span class="keyword">new</span> T[array.capacity];</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; array.size; i++) &#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;array[i] = array.array[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">	<span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os, <span class="type">const</span>  Animal&amp; animal);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> Aage;</span><br><span class="line">	<span class="type">int</span>* p;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Animal</span>(<span class="type">int</span> age):<span class="built_in">Aage</span>(age) &#123;</span><br><span class="line">		p = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">4</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Animal</span>() &#123;</span><br><span class="line">		p = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">4</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Animal</span>(<span class="type">const</span> Animal&amp; animal) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;Aage = animal.Aage;</span><br><span class="line">		<span class="keyword">this</span>-&gt;p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">4</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	Animal&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Animal&amp; animal) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;Aage = animal.Aage;</span><br><span class="line">		<span class="keyword">this</span>-&gt;p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">4</span>);</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Animal</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> p;</span><br><span class="line">		p = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os, <span class="type">const</span>  Animal&amp; animal) &#123;</span><br><span class="line">	os &lt;&lt; animal.Aage;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Array&lt;<span class="type">int</span>&gt; <span class="title">array</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">2</span>;</span><br><span class="line">	<span class="type">int</span> c = <span class="number">3</span>;</span><br><span class="line">	array.<span class="built_in">addMember</span>(&amp;a);</span><br><span class="line">	array.<span class="built_in">addMember</span>(&amp;b);</span><br><span class="line">	array.<span class="built_in">addMember</span>(&amp;c);</span><br><span class="line">	array.<span class="built_in">show</span>();</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;----&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="comment">/*std::cout &lt;&lt; array.getArray()[0] &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	array.deleteMember();</span></span><br><span class="line"><span class="comment">	array.deleteMember();</span></span><br><span class="line"><span class="comment">	array.deleteMember();*/</span></span><br><span class="line">	<span class="function">Array&lt;<span class="type">int</span>&gt; <span class="title">array1</span><span class="params">(array)</span></span>;</span><br><span class="line">	array<span class="number">1.</span><span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;----&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	Array&lt;<span class="type">int</span>&gt; array2 = array1;</span><br><span class="line">	array<span class="number">2.</span><span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Array&lt;Animal&gt; <span class="title">array</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="function">Animal <span class="title">animal1</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">	array.<span class="built_in">addMember</span>(&amp;animal1);</span><br><span class="line">	<span class="function">Animal <span class="title">animal2</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">	array.<span class="built_in">addMember</span>(&amp;animal2);</span><br><span class="line">	<span class="function">Animal <span class="title">animal3</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">	array.<span class="built_in">addMember</span>(&amp;animal3);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//array.deleteMember();</span></span><br><span class="line">	<span class="comment">//array.deleteMember(); </span></span><br><span class="line">	<span class="comment">//array.deleteMember();</span></span><br><span class="line">	<span class="comment">//array.deleteMember();</span></span><br><span class="line">	array.<span class="built_in">show</span>();</span><br><span class="line">	<span class="function">Array&lt;Animal&gt; <span class="title">array1</span><span class="params">(array)</span></span>;</span><br><span class="line">	array.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">	Array&lt;Animal&gt; array2 = array1;</span><br><span class="line">	array<span class="number">2.</span><span class="built_in">show</span>();</span><br><span class="line">	std::cout &lt;&lt; array2[<span class="number">1</span>] &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//test1();</span></span><br><span class="line">	<span class="built_in">test2</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="STL基本概念"><a href="#STL基本概念" class="headerlink" title="STL基本概念"></a>STL基本概念</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stl的诞生:为了提高代码的复用性,提高标准的数据结构和算法</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stl(standard template libarry, 标准模板库)</span><br><span class="line">stl从广义上分为容器(container),算法(algorithm),迭代器(iterator)。</span><br><span class="line">容器和算法通过迭代器无缝衔接</span><br><span class="line">stl几乎所有的代码都采用了模板类或者函数模板</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">stl六大主件:</span><br><span class="line">1.容器:各种数据结构,set,list,map,vector.deque...存放数据</span><br><span class="line">2.算法:常用算法,sort,find,copy,for_each...</span><br><span class="line">3.迭代器:扮演了容器和算法的粘合剂</span><br><span class="line">4.仿函数:行为类似函数,可作为算法的某种策略</span><br><span class="line">5.适配器(配接器):修饰容器/仿函数/迭代器接口</span><br><span class="line">6.空间配置器:负责空间配置和管理</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">容器:数据结构</span><br><span class="line">容器划分:</span><br><span class="line">	1.序列式器:强调值的位置</span><br><span class="line">	2.关联式容器:树结构,各元素没有严格的物理顺序</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">算法(algorithms):逻辑</span><br><span class="line">算法的分类:</span><br><span class="line">1.质变算法:运算过程中会改变元素的内容。拷贝,替换,删除...</span><br><span class="line">2.非质变算法:运算过程中不改变元素的内容。查找...</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">迭代器:</span><br><span class="line">提供方法使得可以依序寻访容器中的所有元素，而不用暴露容器内部的表示方式</span><br><span class="line">每个容器都有自己的专属的迭代器</span><br><span class="line">每个迭代器类似于指针</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>种类</th>
<th>功能</th>
<th>支持运算</th>
</tr>
</thead>
<tbody><tr>
<td>输入迭代器</td>
<td>对数据只读</td>
<td>只读:++,&#x3D;&#x3D;,!&#x3D;</td>
</tr>
<tr>
<td>输出迭代器</td>
<td>对数据只写</td>
<td>只写:++</td>
</tr>
<tr>
<td>前向迭代器</td>
<td>读写操作,可以向前推进迭代器</td>
<td>读写:++,&#x3D;&#x3D;,!&#x3D;</td>
</tr>
<tr>
<td>双向迭代器</td>
<td>读写操作,可以向前或向后操作</td>
<td>读写:++,–</td>
</tr>
<tr>
<td>随机访问迭代器</td>
<td>读写操作,可以随意跳跃访问容易数据,最强</td>
<td>读写:++,–,[n],-n,&lt;,&lt;&#x3D;,&gt;,&gt;&#x3D;</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">常用的容器中迭代器种类为双向迭代器和随机访问迭代器。</span><br></pre></td></tr></table></figure>

<h5 id="vector"><a href="#vector" class="headerlink" title="vector"></a>vector</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">容器: vector</span><br><span class="line">算法: for_each</span><br><span class="line">迭代器: vector&lt;int&gt;::iterator</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span> <span class="comment">//标准算法头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 创建了一个vector容器</span></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">11</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过迭代器访问</span></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator itBegin = v.<span class="built_in">begin</span>(); <span class="comment">// 起始迭代器</span></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator itEnd = v.<span class="built_in">end</span>(); <span class="comment">// 结束迭代器，指向容器中最后一个元素位置的下一个位置</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 第一种遍历</span></span><br><span class="line">	<span class="keyword">while</span> (itBegin != itEnd) &#123;</span><br><span class="line">		std::cout &lt;&lt; *itBegin &lt;&lt; std::endl;</span><br><span class="line">		itBegin++;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;--------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//第二种</span></span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 第三种,标准算法的工具</span></span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test1</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vector存放自定义数据类型"><a href="#vector存放自定义数据类型" class="headerlink" title="vector存放自定义数据类型"></a>vector存放自定义数据类型</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string pname;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age) </span><br><span class="line">	:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line">	~<span class="built_in">Person</span>() &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os, <span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">	os &lt;&lt; p.pname&lt;&lt;<span class="string">&quot;, &quot;</span>&lt;&lt;p.page;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;Person&gt; v;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;jim&quot;</span>, <span class="number">12</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;kimi&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">	v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">	v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it).pname &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; it-&gt;page &lt;&lt; std::endl;<span class="comment">//it是指针</span></span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; std::endl; <span class="comment">// 直接输出对象</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;Person*&gt; v;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;ken&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bili&quot;</span>, <span class="number">16</span>)</span></span>;</span><br><span class="line">	v.<span class="built_in">push_back</span>(&amp;p1);</span><br><span class="line">	v.<span class="built_in">push_back</span>(&amp;p2);</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;Person*&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; **it &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; (*it)-&gt;pname&lt;&lt;<span class="string">&quot;, &quot;</span>&lt;&lt;(*it)-&gt;page &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//test01();</span></span><br><span class="line">	<span class="built_in">test02</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="容器中嵌套容器"><a href="#容器中嵌套容器" class="headerlink" title="容器中嵌套容器"></a>容器中嵌套容器</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;std::vector&lt;<span class="type">int</span>&gt;&gt; v;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v4;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">		v<span class="number">2.</span><span class="built_in">push_back</span>(i<span class="number">+3</span>);</span><br><span class="line">		v<span class="number">3.</span><span class="built_in">push_back</span>(i<span class="number">+6</span>);</span><br><span class="line">		v<span class="number">4.</span><span class="built_in">push_back</span>(i<span class="number">+9</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	v.<span class="built_in">push_back</span>(v1);</span><br><span class="line">	v.<span class="built_in">push_back</span>(v2);</span><br><span class="line">	v.<span class="built_in">push_back</span>(v3);</span><br><span class="line">	v.<span class="built_in">push_back</span>(v4);</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;std::vector&lt;<span class="type">int</span>&gt;&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">        <span class="comment">// *it 就是个容器 std::vector&lt;int&gt;</span></span><br><span class="line">		<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator vit = (*it).<span class="built_in">begin</span>();vit != (*it).<span class="built_in">end</span>();vit++) &#123;</span><br><span class="line">			std::cout &lt;&lt; *vit &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="string"><a href="#string" class="headerlink" title="string"></a>string</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">string是C++风格的字符串,string本质是一个类</span><br><span class="line"></span><br><span class="line">string和char*的区别:</span><br><span class="line">	char*是一个指针。</span><br><span class="line">	string是一个类,类内部封装了char*,管理这个字符串,是一个char*的容器</span><br><span class="line">	</span><br><span class="line">特点:</span><br><span class="line">string类封装了成员方法</span><br><span class="line">ex: find,copy,delete,replace,insert</span><br><span class="line">string管理char*所分配的内存,不用担心数组越界和取值越界的问题,由类内部保证</span><br></pre></td></tr></table></figure>

<h5 id="string构造函数"><a href="#string构造函数" class="headerlink" title="string构造函数"></a>string构造函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string();	创建空字符串</span><br><span class="line">string(const char* s);	使用字符串s初始化</span><br><span class="line">string(const string&amp; str); 使用string对象初始化另一个对象,拷贝构造</span><br><span class="line">string(int n,char c); 使用n字符初始化</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line"></span><br><span class="line">	<span class="type">const</span> <span class="type">char</span>* str = <span class="string">&quot;dream&quot;</span>;</span><br><span class="line">	<span class="function">std::string <span class="title">s2</span><span class="params">(str)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; s2 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="function">std::string <span class="title">s3</span><span class="params">(s2)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; s3 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="function">std::string <span class="title">s4</span><span class="params">(<span class="number">3</span>, <span class="string">&#x27;A&#x27;</span>)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; s4 &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="string赋值"><a href="#string赋值" class="headerlink" title="string赋值"></a>string赋值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">功能描述:给string字符串赋值</span><br><span class="line"></span><br><span class="line">string&amp; operator=(const char* s);	char*类型的字符串</span><br><span class="line">string&amp; operator=(const string&amp; s);	  string类型的赋值</span><br><span class="line">string&amp; operator=(char c);	 字符赋值给当前字符串</span><br><span class="line">string&amp; assign(const char* s);  字符串赋值给当前字符串</span><br><span class="line">string&amp; assign(const char* s, int n);  字符串的前n个字符赋值给当前字符串</span><br><span class="line">string&amp; assign(const string&amp; s); 	字符串S赋值给单前字符串</span><br><span class="line">string&amp; assign(int n, char c);	n个字符c赋予当前字符串</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line"></span><br><span class="line">	s1 = <span class="string">&quot;taiwang&quot;</span>;</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="function">std::string <span class="title">s2</span><span class="params">(<span class="string">&quot;taibei&quot;</span>)</span></span>;</span><br><span class="line">	s1 = s2;</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s1 = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">1.</span><span class="built_in">assign</span>(<span class="string">&quot;hover&quot;</span>);</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">1.</span><span class="built_in">assign</span>(<span class="string">&quot;hover&quot;</span>,<span class="number">4</span>);</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">1.</span><span class="built_in">assign</span>(s2);</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">1.</span><span class="built_in">assign</span>(<span class="number">4</span>, <span class="string">&#x27;Q&#x27;</span>);</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="string字符串拼接"><a href="#string字符串拼接" class="headerlink" title="string字符串拼接"></a>string字符串拼接</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">实现在字符串尾部拼接字符串</span><br><span class="line"></span><br><span class="line">string&amp; operator+= (const  char* str);	重载+=</span><br><span class="line">string&amp; operator+= (const  char str);	重载+=</span><br><span class="line">string&amp; operator+= (const  string&amp; str);	重载+=</span><br><span class="line">string&amp; append(const char* s);  字符串连接到当前字符串的尾部</span><br><span class="line">string&amp; append(const char* s, int n);	 拼接前n个字符串</span><br><span class="line">string&amp; append(const string&amp; str);	 </span><br><span class="line">string&amp; append(const string&amp; s, int pos, int n); 从pos(索引)开始拼接n个字符</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line">	s1 = <span class="string">&quot;taiwang&quot;</span>;</span><br><span class="line">	s1 += <span class="string">&quot;id&quot;</span>;</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::string s2;</span><br><span class="line">	s2 = <span class="string">&quot;taiwang&quot;</span>;</span><br><span class="line">	s2 += <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">	std::cout &lt;&lt; s2 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::string s3;</span><br><span class="line">	s3 = <span class="string">&quot;taiwang&quot;</span>;</span><br><span class="line">	s3 += s2;</span><br><span class="line">	std::cout &lt;&lt; s3 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">3.</span><span class="built_in">append</span>(<span class="string">&quot;ken&quot;</span>);</span><br><span class="line">	std::cout &lt;&lt; s3 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">3.</span><span class="built_in">append</span>(<span class="string">&quot;oppo&quot;</span>, <span class="number">3</span>);</span><br><span class="line">	std::cout &lt;&lt; s3 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">3.</span><span class="built_in">append</span>(s2);</span><br><span class="line">	std::cout &lt;&lt; s3 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">3.</span><span class="built_in">append</span>(s2, <span class="number">1</span>, <span class="number">3</span>);<span class="comment">// 起始位置是索引</span></span><br><span class="line">	std::cout &lt;&lt; s3 &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="string查找和替换"><a href="#string查找和替换" class="headerlink" title="string查找和替换"></a>string查找和替换</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int find(const string&amp; str, int pos=0) const ;		查找第一次出现的位置,从pos开始</span><br><span class="line">int find(const char* str, int pos=0) const ;	查找第一次出现的位置,从pos开始</span><br><span class="line">int find(const char* str, int pos=0, int n) const ;		从n开始查找前n个字符出现str的第一次位置</span><br><span class="line">int find(const char c, int pos=0) const ;	查找字符c第一次出现的位置</span><br><span class="line">int rfind(const string&amp; str, int pos=npos) const ;	从pos开始找查找str出现的最后一次位置</span><br><span class="line">int rfind(const char* s, int pos=npos) const ;	从pos开始找查找s出现的最后一次位置</span><br><span class="line">int rfind(const char* s, int pos, int n) const ;	从pos开始查找s的前n个字符出现的最后一个位置</span><br><span class="line">int rfind(const char c,int pos = 0)const ; 查找c最后一次出现的位置</span><br><span class="line">string&amp; replace(int pos, int n, const string&amp; str);	替换从pos开始n个字符为str</span><br><span class="line">string&amp; replce(int pos, int n,const char* s);替换从pos开始n个字符为s</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line">	s1 = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> pos = s<span class="number">1.f</span>ind(<span class="string">&quot;de&quot;</span>);</span><br><span class="line">	std::cout &lt;&lt; pos &lt;&lt; std::endl; <span class="comment">// 找到为索引</span></span><br><span class="line">	pos = s<span class="number">1.f</span>ind(<span class="string">&quot;er&quot;</span>); <span class="comment">// 找不到为-1 </span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// rfind是从右往左查</span></span><br><span class="line">	pos = s<span class="number">1.</span><span class="built_in">rfind</span>(<span class="string">&quot;de&quot;</span>);</span><br><span class="line">	std::cout &lt;&lt; pos &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 从pos开始，n个字符，全部替换为。</span></span><br><span class="line">	s<span class="number">1.</span><span class="built_in">replace</span>(<span class="number">0</span>,<span class="number">2</span>,<span class="string">&quot;joooo&quot;</span>);</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">字符串的比较是依据ASCII码进行比对</span><br><span class="line">= 返回 0</span><br><span class="line">&gt; 返回 1</span><br><span class="line">&lt; 返回 -1</span><br><span class="line">函数原型:</span><br><span class="line">int compare(const string&amp; str) const;</span><br><span class="line">int compare(const char* s) const;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line">	s1 = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	std::string s2;</span><br><span class="line">	s2 = <span class="string">&quot;bbcdefg&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	std::cout &lt;&lt; s<span class="number">1.</span><span class="built_in">compare</span>(s2) &lt;&lt; std::endl; <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (s<span class="number">1.</span><span class="built_in">compare</span>(s2) == <span class="number">0</span>) &#123; std::cout &lt;&lt; <span class="string">&quot;same&quot;</span> &lt;&lt; std::endl; &#125; <span class="comment">// 比较两个字符串是不是相等</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字符串中compare用于比较两个字符串是不是相等</span><br></pre></td></tr></table></figure>

<h5 id="字符存取"><a href="#字符存取" class="headerlink" title="字符存取"></a>字符存取</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">char&amp; operator[](int n); 通过[]取字符</span><br><span class="line">char&amp; at(int n);	通过at取字符</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line">	s1 = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s<span class="number">1.</span><span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">		std::cout &lt;&lt; s1[i];</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s<span class="number">1.</span><span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">		std::cout &lt;&lt; s<span class="number">1.</span><span class="built_in">at</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="字符插入和输出"><a href="#字符插入和输出" class="headerlink" title="字符插入和输出"></a>字符插入和输出</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string&amp; insert(int pos, const char* s);  插在pos位置前</span><br><span class="line">string&amp; insert(int pos, const string&amp; str);</span><br><span class="line">string&amp; insert(int pos, int n, char c); 在指定位置插入n个字符c</span><br><span class="line">string&amp; erase(int pos, int n = npos); 删除从pos开始的n个字符</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line">	s1 = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">1</span>,<span class="string">&quot;---&quot;</span>); <span class="comment">// 插在第一个位置前</span></span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	s<span class="number">1.</span><span class="built_in">erase</span>(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">	std::cout &lt;&lt; s1 &lt;&lt; std::endl; <span class="comment">// abcdefg</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="string子串"><a href="#string子串" class="headerlink" title="string子串"></a>string子串</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string substr(int pos =0; int n = npos) const; 返回由pos开始的n个字符组成的字符串</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line">	s1 = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	std::string substr = s<span class="number">1.</span><span class="built_in">substr</span>(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">	std::cout &lt;&lt; substr &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::string s1;</span><br><span class="line">	s1 = <span class="string">&quot;zhangsan@sina.com&quot;</span>;</span><br><span class="line">	<span class="comment">// 从邮件地址中获取用户名</span></span><br><span class="line">	std::string substr = s<span class="number">1.</span><span class="built_in">substr</span>(<span class="number">0</span>,s<span class="number">1.f</span>ind(<span class="string">&#x27;@&#x27;</span>));</span><br><span class="line">	std::cout &lt;&lt; substr &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test02</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vector-1"><a href="#vector-1" class="headerlink" title="vector"></a>vector</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vector数据结构和数组非常相似,也称为单端数组</span><br><span class="line">vector不同于普通数组(静态空间), vector可以动态扩展</span><br><span class="line">动态扩展:并不是在原空间后续添加新空间，而是找更大的空间，进行拷贝到新空间,释放原空间</span><br><span class="line"></span><br><span class="line">vector:</span><br><span class="line">	begin(); end(); render(); insert(); rbegin(); fron(); banck(); push_back(); pop_back();</span><br><span class="line">	</span><br><span class="line">vector容器的迭代器支持随机访问的迭代器</span><br></pre></td></tr></table></figure>

<h5 id="vector的构造函数"><a href="#vector的构造函数" class="headerlink" title="vector的构造函数"></a>vector的构造函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;T&gt; v;   默认构造函数</span><br><span class="line">vector(v.begin(), v.end());  将v[begin(), end())区间中的元素拷贝给本身</span><br><span class="line">vector(n, elem); 将n个elem拷贝给本身</span><br><span class="line">vector(const vector &amp; vec)； 拷贝构造</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; v)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printVector</span>(v);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 区间构造</span></span><br><span class="line">	<span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(v.begin(), v.end())</span></span>;</span><br><span class="line">	<span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// n个ele构造</span></span><br><span class="line">	<span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">v2</span><span class="params">(<span class="number">2</span>,<span class="number">100</span>)</span></span>;<span class="comment">// 2个100</span></span><br><span class="line">	<span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 拷贝构造</span></span><br><span class="line">	<span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">v3</span><span class="params">(v2)</span></span>;</span><br><span class="line">	<span class="built_in">printVector</span>(v3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vector赋值"><a href="#vector赋值" class="headerlink" title="vector赋值"></a>vector赋值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vector&amp; operator= (const vector&amp; v);</span><br><span class="line">assign(begm, end);将[beg,end)区间中的数据拷贝给本身</span><br><span class="line">assign(n,elem);将n个elem拷贝赋值个给本身</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showVector</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it ;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2 = v1;</span><br><span class="line">	<span class="built_in">showVector</span>(v2);</span><br><span class="line"></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">	v<span class="number">3.</span><span class="built_in">assign</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">showVector</span>(v3);</span><br><span class="line"></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v4;</span><br><span class="line">	v<span class="number">4.</span><span class="built_in">assign</span>(<span class="number">4</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">showVector</span>(v4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vector大小"><a href="#vector大小" class="headerlink" title="vector大小"></a>vector大小</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">empty();	判断容器是否为空,空时返回1 </span><br><span class="line">capactity();  容器容量</span><br><span class="line">size();	返回容器的元素个数</span><br><span class="line">resize(int num); 重新指定容器的大小，如果发生扩容使用默认值0填充。若发生缩小，超出长度的被删除</span><br><span class="line">resize(int num, elem);如果发生扩容使用elem填充。若发生缩小，超出长度的被删除</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showVector</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it ;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">empty</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">5</span>);</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">7</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;-----&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">empty</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vector插入和删除"><a href="#vector插入和删除" class="headerlink" title="vector插入和删除"></a>vector插入和删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">push_back(); 尾部插入</span><br><span class="line">pop_back(); 删除最后以一个元素</span><br><span class="line">insert(const_iterator pos, ele); 迭代器指向的pos位插入ele</span><br><span class="line">insert(const_iterator pos,int count, ele); 迭代器指向的pos位插入count个ele</span><br><span class="line">erase(const_iterator pos);删除迭代器指向的元素</span><br><span class="line">erase(const_iterator start, const_iterator end); // 删除迭代器从start到end之间的元素</span><br><span class="line">clear(); 清空容器</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showVector</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (v.<span class="built_in">size</span>() == <span class="number">0</span>) &#123; std::cout &lt;&lt; <span class="string">&quot;空&quot;</span>; &#125;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it ;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line"></span><br><span class="line">	v<span class="number">1.</span><span class="built_in">pop_back</span>();</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line"></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator it = v<span class="number">1.</span><span class="built_in">begin</span>();</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">insert</span>(it,<span class="number">9</span>);</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line"></span><br><span class="line">	it = v<span class="number">1.</span><span class="built_in">begin</span>(); <span class="comment">// insert之后可能导致迭代器失效</span></span><br><span class="line">	it++;</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">insert</span>(it, <span class="number">3</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line"></span><br><span class="line">	it = v<span class="number">1.</span><span class="built_in">begin</span>();</span><br><span class="line">	it += <span class="number">3</span>;</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">erase</span>(it);</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line"></span><br><span class="line">	v<span class="number">1.</span><span class="built_in">clear</span>();</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vector数据存取"><a href="#vector数据存取" class="headerlink" title="vector数据存取"></a>vector数据存取</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">at(int dex);返回对应索引的数据</span><br><span class="line">operator[];返回对应索引的数据</span><br><span class="line">front();返回容器的第一个数据</span><br><span class="line">back();返回容器的最后一个数据</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showVector</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (v.<span class="built_in">size</span>() == <span class="number">0</span>) &#123; std::cout &lt;&lt; <span class="string">&quot;空&quot;</span>; &#125;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it ;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">at</span>(<span class="number">2</span>) &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; v1[<span class="number">2</span>] &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.f</span>ront() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">back</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vector互换容器"><a href="#vector互换容器" class="headerlink" title="vector互换容器"></a>vector互换容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">实现两个容器内元素的互换</span><br><span class="line">swap(vec);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showVector</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (v.<span class="built_in">size</span>() == <span class="number">0</span>) &#123; std::cout &lt;&lt; <span class="string">&quot;空&quot;</span>; &#125;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it ;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line"></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">9</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">		v<span class="number">2.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showVector</span>(v2);</span><br><span class="line"></span><br><span class="line">	v<span class="number">1.</span><span class="built_in">swap</span>(v2);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">showVector</span>(v1);</span><br><span class="line">	<span class="built_in">showVector</span>(v2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用用途:收缩内存空间，由于拷贝时容器的容量等于size数而不是capatiy</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">capacity</span>() &lt;&lt; std::endl; <span class="comment">// 9</span></span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; std::endl; <span class="comment">// 7</span></span><br><span class="line">	v<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">3</span>); <span class="comment">// capacity还是9</span></span><br><span class="line">	std::<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(v1).<span class="built_in">swap</span>(v1); <span class="comment">//匿名对象依据v1拷贝构造，二者进行交换</span></span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">capacity</span>() &lt;&lt; std::endl; <span class="comment">// 3</span></span><br><span class="line">	std::cout &lt;&lt; v<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; std::endl; <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test02</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vector预留空间"><a href="#vector预留空间" class="headerlink" title="vector预留空间"></a>vector预留空间</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">功能:减少vector动态扩容时的扩展次数</span><br><span class="line"></span><br><span class="line">reserve(int len); 容器预留len个元素长度,预留位置不初始化,元素不可访问。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showVector</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (v.<span class="built_in">size</span>() == <span class="number">0</span>) &#123; std::cout &lt;&lt; <span class="string">&quot;空&quot;</span>; &#125;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it ;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">reserve</span>(<span class="number">3</span>);</span><br><span class="line">	<span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span>* ptr = <span class="literal">NULL</span>;</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">reserve</span>(<span class="number">7</span>);<span class="comment">// 预留空间</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">		<span class="keyword">if</span> (ptr != &amp;v1[<span class="number">0</span>]) &#123;</span><br><span class="line">			ptr = &amp;v1[<span class="number">0</span>]; <span class="comment">// 记录动态扩展发生的次数</span></span><br><span class="line">			num++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; num &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="deque容器"><a href="#deque容器" class="headerlink" title="deque容器"></a>deque容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">双端数组,可以对头端进行删除和插入操作。</span><br><span class="line"></span><br><span class="line">deque和vector的区别:</span><br><span class="line">1.vector对头部的删除和插入效率低,数据量越大,效率越低</span><br><span class="line">2.deque对头部的删除插入速度比vector快</span><br><span class="line">3.vector访问元素的速度比deque快     </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">push_front() pop_front() insert() begin() banck() push_back() pop_back()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deque的工作原理:</span><br><span class="line">	deque内部有中控器,维护每段缓冲区的内容,缓冲区中存放真实的数据</span><br><span class="line">	中控器实际维护的是每个缓冲区的地址,使得使用deque时像一片连续的内存</span><br><span class="line">	</span><br><span class="line">deque的迭代器是支持随机访问的迭代器</span><br></pre></td></tr></table></figure>

<h5 id="deque构造函数"><a href="#deque构造函数" class="headerlink" title="deque构造函数"></a>deque构造函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deque&lt;T&gt; deqT;  默认构造函数</span><br><span class="line">deque(beg, end);  将[beg,end)区间的数据拷贝</span><br><span class="line">deque(n ,elem); n个elem拷贝</span><br><span class="line">deque(const deque&amp; deq); 拷贝构造</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showDeque</span><span class="params">(std::deque&lt;<span class="type">int</span>&gt; &amp;deq)</span> </span>&#123; <span class="comment">// const容器调用const迭代器, 非const容器调用普通迭代器。</span></span><br><span class="line">    <span class="comment">// const_iterator只读迭代器,不可修改迭代器所指的值</span></span><br><span class="line">	<span class="keyword">for</span> (std::deque&lt;<span class="type">int</span>&gt;::iterator it = deq.<span class="built_in">begin</span>(); it != deq.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; deq;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		deq.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::deque&lt;<span class="type">int</span>&gt; <span class="title">deq2</span><span class="params">(deq.begin(), deq.end())</span></span>;</span><br><span class="line">	<span class="built_in">showDeque</span>(deq2);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::deque&lt;<span class="type">int</span>&gt; <span class="title">deq3</span><span class="params">(<span class="number">3</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="built_in">showDeque</span>(deq3);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::deque&lt;<span class="type">int</span>&gt; <span class="title">deq4</span><span class="params">(deq)</span></span>;</span><br><span class="line">	<span class="built_in">showDeque</span>(deq4);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="deque赋值操作"><a href="#deque赋值操作" class="headerlink" title="deque赋值操作"></a>deque赋值操作</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">给deque容器进行赋值</span><br><span class="line"></span><br><span class="line">deque operator=(const deque&amp; deq); 重载等号操作符</span><br><span class="line">assign(be, end); 将[begin, end) 区间的数据拷贝到赋值</span><br><span class="line">assign(n, ele); 将n个ele拷贝赋值给本身</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showDeque</span><span class="params">(std::deque&lt;<span class="type">int</span>&gt; &amp;deq)</span> </span>&#123; <span class="comment">// const容器调用const迭代器, 非const容器调用普通迭代器。</span></span><br><span class="line">	<span class="keyword">for</span> (std::deque&lt;<span class="type">int</span>&gt;::iterator it = deq.<span class="built_in">begin</span>(); it != deq.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; deq;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		deq.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line"></span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; deq1 = deq;</span><br><span class="line">	<span class="built_in">showDeque</span>(deq1);</span><br><span class="line"></span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; deq2;</span><br><span class="line">	deq<span class="number">2.</span><span class="built_in">assign</span>(deq<span class="number">1.</span><span class="built_in">begin</span>(), deq<span class="number">1.</span><span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">showDeque</span>(deq2);</span><br><span class="line"></span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; deq3;</span><br><span class="line">	deq<span class="number">3.</span><span class="built_in">assign</span>(<span class="number">5</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">showDeque</span>(deq3);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="deque容器的大小操作"><a href="#deque容器的大小操作" class="headerlink" title="deque容器的大小操作"></a>deque容器的大小操作</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">deque.empty()； 判断容器是否为空</span><br><span class="line">deque.szie(); 返回容器中的数据个数</span><br><span class="line">deques.resize(size); 重新指定容器的大小,如果发生扩容,默认值填充,如果容器变短,超出元素删除</span><br><span class="line">deque.resize(num, elem); 重新指定容器的大小,如果发生扩容,elem填充,如果容器变短,超出元素删除</span><br><span class="line"></span><br><span class="line">deque没有容量的说法,可以无限存放数据</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showDeque</span><span class="params">(std::deque&lt;<span class="type">int</span>&gt; &amp;deq)</span> </span>&#123; <span class="comment">// const容器调用const迭代器, 非const容器调用普通迭代器。</span></span><br><span class="line">	<span class="keyword">for</span> (std::deque&lt;<span class="type">int</span>&gt;::iterator it = deq.<span class="built_in">begin</span>(); it != deq.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; deq;</span><br><span class="line">	<span class="keyword">if</span> (deq.<span class="built_in">empty</span>() == <span class="number">1</span>) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		deq.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (deq.<span class="built_in">empty</span>() == <span class="number">1</span>) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		std::cout &lt;&lt; deq.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	deq.<span class="built_in">resize</span>(<span class="number">2</span>);</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line">	deq.<span class="built_in">resize</span>(<span class="number">5</span>, <span class="number">9</span>);</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="deque插入和删除"><a href="#deque插入和删除" class="headerlink" title="deque插入和删除"></a>deque插入和删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">两端插入:</span><br><span class="line">push_back(elem);  容器尾部添加一个数据。</span><br><span class="line">push_front(elem);	容器前插入一个数据</span><br><span class="line">pop_back();	删除最后一个数据</span><br><span class="line">pop_ front(); 删除第一个数据</span><br><span class="line"></span><br><span class="line">指定位置操作:</span><br><span class="line">	insert(pos, elem); 在pos位插入elem</span><br><span class="line">	insert(pos,n, elem); 在pos位插入n个elem</span><br><span class="line">	insert(pos, beg, end); 在pos位插入区间[begin, end)的数据,无返回值</span><br><span class="line">	clear();</span><br><span class="line">	erase(beg, end); 删除区间[begin, end)的数据,返回下一个数据的位置</span><br><span class="line">	erase(pos); 删除pos位置的数据,返回下一个数据的位置</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showDeque</span><span class="params">(std::deque&lt;<span class="type">int</span>&gt; &amp;deq)</span> </span>&#123; <span class="comment">// const容器调用const迭代器, 非const容器调用普通迭代器。</span></span><br><span class="line">	<span class="keyword">for</span> (std::deque&lt;<span class="type">int</span>&gt;::iterator it = deq.<span class="built_in">begin</span>(); it != deq.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; deq;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		deq.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	deq.<span class="built_in">push_back</span>(<span class="number">9</span>);</span><br><span class="line">	deq.<span class="built_in">push_front</span>(<span class="number">9</span>);</span><br><span class="line">	deq.<span class="built_in">pop_back</span>();</span><br><span class="line">	deq.<span class="built_in">pop_front</span>();</span><br><span class="line">	deq.<span class="built_in">insert</span>(deq.<span class="built_in">begin</span>(), <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line"></span><br><span class="line">	deq.<span class="built_in">insert</span>(deq.<span class="built_in">begin</span>(),deq.<span class="built_in">begin</span>(), deq.<span class="built_in">end</span>()); <span class="comment">// 区间</span></span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt;::iterator it = deq.<span class="built_in">erase</span>(deq.<span class="built_in">begin</span>());</span><br><span class="line">	std::cout &lt;&lt; *it &lt;&lt; std::endl;</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line"></span><br><span class="line">	deq.<span class="built_in">erase</span>(deq.<span class="built_in">begin</span>(), deq.<span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line">	deq.<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="deque数据存取"><a href="#deque数据存取" class="headerlink" title="deque数据存取"></a>deque数据存取</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">at(int dex); 索引</span><br><span class="line">operator[]; 索引</span><br><span class="line">front(); 最前面一位</span><br><span class="line">back(); 最后面一位</span><br></pre></td></tr></table></figure>

<h5 id="deque排序"><a href="#deque排序" class="headerlink" title="deque排序"></a>deque排序</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用algorithm算法</span><br><span class="line">sort(begin, end);  默认从小到大  对于支持随机访问的迭代器都支持sort排序</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showDeque</span><span class="params">(std::deque&lt;<span class="type">int</span>&gt; &amp;deq)</span> </span>&#123; <span class="comment">// const容器调用const迭代器, 非const容器调用普通迭代器。</span></span><br><span class="line">	<span class="keyword">for</span> (std::deque&lt;<span class="type">int</span>&gt;::iterator it = deq.<span class="built_in">begin</span>(); it != deq.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; deq;</span><br><span class="line">	deq.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">	deq.<span class="built_in">push_front</span>(<span class="number">5</span>);</span><br><span class="line">	deq.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">	deq.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">	deq.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line"></span><br><span class="line">	std::<span class="built_in">sort</span>(deq.<span class="built_in">begin</span>(), deq.<span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">showDeque</span>(deq);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">test01</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> pid;</span><br><span class="line">	<span class="type">int</span> pscore;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> id, <span class="type">int</span> score)</span><br><span class="line">		:<span class="built_in">pid</span>(id), <span class="built_in">pscore</span>(score) &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os,<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">	os &lt;&lt; p.pid &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; p.pscore;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">(Person** p)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *(p[i]) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Person* p[<span class="number">3</span>]; <span class="comment">// 包含3个Person指针的数组</span></span><br><span class="line">    <span class="comment">// p的类型是 Person*[3] (Person指针的数组)</span></span><br><span class="line">    <span class="comment">// 但在表达式和函数参数中，p会退化为 Person**</span></span><br><span class="line"></span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">0</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">	p[<span class="number">0</span>] = &amp;p1;</span><br><span class="line"></span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">1</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">	p[<span class="number">1</span>] = &amp;p2;</span><br><span class="line"></span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="number">2</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">	p[<span class="number">2</span>] = &amp;p3;</span><br><span class="line">    </span><br><span class="line">	<span class="built_in">showPerson</span>(p);	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> pid;</span><br><span class="line">	<span class="type">int</span> pscore;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> id, <span class="type">int</span> score)</span><br><span class="line">		:<span class="built_in">pid</span>(id), <span class="built_in">pscore</span>(score) &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os,<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">	os &lt;&lt; p.pid &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; p.pscore;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPersonScore</span><span class="params">(std::vector&lt;Person&gt; &amp;pv)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;Person&gt;::iterator it = pv.<span class="built_in">begin</span>(); it != pv.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">shownScore</span><span class="params">(std::deque&lt;<span class="type">int</span>&gt;&amp; ds)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::deque&lt;<span class="type">int</span>&gt;::iterator it = ds.<span class="built_in">begin</span>(); it != ds.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it)&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;Person&gt; pv;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		<span class="function">Person <span class="title">p</span><span class="params">(i, i)</span></span>;</span><br><span class="line">		pv.<span class="built_in">push_back</span>(p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showPersonScore</span>(pv);</span><br><span class="line"></span><br><span class="line">	std::deque&lt;<span class="type">int</span>&gt; ds;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;Person&gt;::iterator it = pv.<span class="built_in">begin</span>(); it != pv.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		ds.<span class="built_in">push_back</span>((*it).pscore);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">shownScore</span>(ds);</span><br><span class="line">	std::<span class="built_in">sort</span>(ds.<span class="built_in">begin</span>(), ds.<span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">shownScore</span>(ds);</span><br><span class="line">	ds.<span class="built_in">pop_back</span>();</span><br><span class="line">	ds.<span class="built_in">pop_front</span>();</span><br><span class="line">	<span class="built_in">shownScore</span>(ds);</span><br><span class="line">	<span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (std::deque&lt;<span class="type">int</span>&gt;::iterator it = ds.<span class="built_in">begin</span>(); it != ds.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		score += (*it);</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; score / <span class="number">3</span>&lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="stack容器"><a href="#stack容器" class="headerlink" title="stack容器"></a>stack容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">栈:stack先进后出,只有一个出口。</span><br><span class="line"></span><br><span class="line">push(), pop(), top(), size(), empty()</span><br><span class="line">栈中只有顶端的元素可以被访问,所以不可以被遍历</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::stack&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">	std::cout &lt;&lt; st.<span class="built_in">empty</span>() &lt;&lt; std::endl; <span class="comment">// 1为true</span></span><br><span class="line">	st.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">	st.<span class="built_in">push</span>(<span class="number">2</span>);</span><br><span class="line">	st.<span class="built_in">push</span>(<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::stack&lt;<span class="type">int</span>&gt; <span class="title">st1</span><span class="params">(st)</span></span>;</span><br><span class="line">	<span class="keyword">while</span> (!st<span class="number">1.</span><span class="built_in">empty</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; st<span class="number">1.</span><span class="built_in">top</span>() &lt;&lt; std::endl;</span><br><span class="line">		st<span class="number">1.</span><span class="built_in">pop</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;--------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; st<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; st.<span class="built_in">top</span>() &lt;&lt; std::endl;</span><br><span class="line">	st.<span class="built_in">pop</span>();</span><br><span class="line">	std::cout &lt;&lt; st.<span class="built_in">top</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="queue容器"><a href="#queue容器" class="headerlink" title="queue容器"></a>queue容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">queue是一种先进先出的数据结构,有两个出口,队列容器。</span><br><span class="line">队列容器允许从队尾端新增,从队头移除</span><br><span class="line">队列只有队头和队尾可以被访问,队列不允许有遍历行为。</span><br><span class="line">push-&gt;入队 pop-&gt;出队</span><br><span class="line"></span><br><span class="line">push(), pop(), front(), back(), empty(), size()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">构造函数:</span><br><span class="line">queue&lt;T&gt; que;</span><br><span class="line">queue(const queue&amp; que); 拷贝函数</span><br><span class="line"></span><br><span class="line">赋值:</span><br><span class="line">	queue&amp; operator=(const queue&amp; que);</span><br><span class="line"></span><br><span class="line">数据存取:</span><br><span class="line">pop();</span><br><span class="line">push();</span><br><span class="line">front();</span><br><span class="line">back();</span><br><span class="line"></span><br><span class="line">大小操作:</span><br><span class="line">size();</span><br><span class="line">empty();</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::queue &lt;<span class="type">int</span>&gt; que;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		que.<span class="built_in">push</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; que.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="function">std::queue&lt;<span class="type">int</span>&gt; <span class="title">que1</span><span class="params">(que)</span></span>;</span><br><span class="line">	std::queue&lt;<span class="type">int</span>&gt; que2 = que;</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; que<span class="number">1.f</span>ront() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; que<span class="number">2.</span><span class="built_in">back</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (!que.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		que.<span class="built_in">pop</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; que.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="list容器"><a href="#list容器" class="headerlink" title="list容器"></a>list容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">功能:将数据进行链式存储</span><br><span class="line">链表是一种物理存储单元上非连续的存储结构,数据元素的逻辑顺序是通过链表中中的指针链接实现的</span><br><span class="line"></span><br><span class="line">链表由一系列结点组成</span><br><span class="line">结点的组成:一个存储数据的数据域,一个存储下一个节点的指针域</span><br><span class="line"></span><br><span class="line">stl中的链表是一个双向循环链表(节点有pre和next指针)</span><br><span class="line">pre-data-next;特别的链表第一个数据的pre为null,最后一个数据的next为null</span><br><span class="line"></span><br><span class="line">push_front(); pop_front();push_back(); pop_back();front();back();begin();end();insert();</span><br><span class="line"></span><br><span class="line">由于链表的存储不是连续存储,所以链表中的迭代器只支持前移或者后移动(不能跳跃访问),属于双向迭代器</span><br><span class="line"></span><br><span class="line">优点:可以对任意位置进行快速插入或删除元素,动态分配内存,不会造成内存浪费和溢出。</span><br><span class="line">缺点:空间(数据域和指针域)和时间(遍历)需要额外开销，容器遍历数组比数组慢，查找效率低，占用空间大。</span><br><span class="line"></span><br><span class="line">list的重要特性:插入和删除操作不会导致原有的List迭代器失效,vector的会失效(扩容后失效了，指向的内存空间变了)。</span><br><span class="line"></span><br><span class="line">总结:STL中list和vector是两个最常被使用的容器,各有优缺点。</span><br></pre></td></tr></table></figure>

<h5 id="list构造函数"><a href="#list构造函数" class="headerlink" title="list构造函数"></a>list构造函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list&lt;T&gt; t;默认构造函数</span><br><span class="line">list(n, elem);构造n个elem</span><br><span class="line">list(const list&amp; t);拷贝构造</span><br><span class="line">list(begin, end); [begin, end)区间内的</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showList</span><span class="params">(<span class="type">const</span> std::list&lt;<span class="type">int</span>&gt;&amp; t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::list&lt;<span class="type">int</span>&gt;::const_iterator it = t.<span class="built_in">begin</span>(); it != t.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		t.<span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::list&lt;<span class="type">int</span>&gt; <span class="title">t1</span><span class="params">(t.begin(), t.end())</span></span>;</span><br><span class="line">	<span class="built_in">showList</span>(t1);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::list&lt;<span class="type">int</span>&gt; <span class="title">t2</span><span class="params">(t)</span></span>;</span><br><span class="line">	<span class="built_in">showList</span>(t2);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::list&lt;<span class="type">int</span>&gt; <span class="title">t3</span><span class="params">(<span class="number">3</span>,<span class="number">9</span>)</span></span>;</span><br><span class="line">	<span class="built_in">showList</span>(t3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="list赋值和交换"><a href="#list赋值和交换" class="headerlink" title="list赋值和交换"></a>list赋值和交换</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">给list容器赋值以及交换list容器</span><br><span class="line"></span><br><span class="line">函数原型:</span><br><span class="line">	assgin(beg, end); [beg, end)区间中的数据拷贝赋值</span><br><span class="line">	assgin(n, elem); 将n个elem拷贝赋值给本身</span><br><span class="line">	list&amp; operator=(const list&amp; t); 拷贝构造</span><br><span class="line">	swap(list);  </span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showList</span><span class="params">(<span class="type">const</span> std::list&lt;<span class="type">int</span>&gt;&amp; t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::list&lt;<span class="type">int</span>&gt;::const_iterator it = t.<span class="built_in">begin</span>(); it != t.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		t.<span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t1;</span><br><span class="line">	t<span class="number">1.</span><span class="built_in">assign</span>(t.<span class="built_in">begin</span>(), t.<span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">showList</span>(t1);</span><br><span class="line"></span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t2 = t;</span><br><span class="line">	<span class="built_in">showList</span>(t2);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::list&lt;<span class="type">int</span>&gt; <span class="title">t3</span><span class="params">(t)</span></span>;</span><br><span class="line">	<span class="built_in">showList</span>(t3);</span><br><span class="line"></span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t4;</span><br><span class="line">	t<span class="number">4.</span><span class="built_in">assign</span>(<span class="number">5</span>, <span class="number">9</span>);</span><br><span class="line">	<span class="built_in">showList</span>(t4);</span><br><span class="line"></span><br><span class="line">	t<span class="number">4.</span><span class="built_in">swap</span>(t1);</span><br><span class="line">	<span class="built_in">showList</span>(t1);</span><br><span class="line">	<span class="built_in">showList</span>(t4);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="list大小操作"><a href="#list大小操作" class="headerlink" title="list大小操作"></a>list大小操作</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size(); empty(); resize(num); resize(n, num);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showList</span><span class="params">(<span class="type">const</span> std::list&lt;<span class="type">int</span>&gt;&amp; t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::list&lt;<span class="type">int</span>&gt;::const_iterator it = t.<span class="built_in">begin</span>(); it != t.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t;</span><br><span class="line">	<span class="keyword">if</span> (t.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		t.<span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; t.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">	</span><br><span class="line">	t.<span class="built_in">resize</span>(<span class="number">3</span>);</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line"></span><br><span class="line">	t.<span class="built_in">resize</span>(<span class="number">5</span>,<span class="number">9</span>);</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="list插入和删除"><a href="#list插入和删除" class="headerlink" title="list插入和删除"></a>list插入和删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">push_back();	pop_back();		push_front(elem);	pop_front();  insert(pos, elem);</span><br><span class="line">insert(pos,n,elem);		insert(pos, beg, end);		clear(); 		erase(beg, end);</span><br><span class="line">erase(pos);		remove(elem);删除所有值匹配的元素</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showList</span><span class="params">(<span class="type">const</span> std::list&lt;<span class="type">int</span>&gt;&amp; t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::list&lt;<span class="type">int</span>&gt;::const_iterator it = t.<span class="built_in">begin</span>(); it != t.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t;</span><br><span class="line">	<span class="keyword">if</span> (t.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		t.<span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	t.<span class="built_in">push_back</span>(<span class="number">9</span>);</span><br><span class="line">	t.<span class="built_in">push_front</span>(<span class="number">9</span>);</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line"></span><br><span class="line">	t.<span class="built_in">pop_back</span>();</span><br><span class="line">	t.<span class="built_in">pop_front</span>();</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line"></span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt;::iterator it = t.<span class="built_in">begin</span>();</span><br><span class="line">	it++;</span><br><span class="line">	t.<span class="built_in">insert</span>(it,<span class="number">9</span>);</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line"></span><br><span class="line">	t.<span class="built_in">erase</span>(it); <span class="comment">// 删除的是it之前所指的元素，而不是最新的元素</span></span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line"></span><br><span class="line">	t.<span class="built_in">remove</span>(<span class="number">7</span>); <span class="comment">// 移除值为7的元素</span></span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line"></span><br><span class="line">	t.<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="list数据存取"><a href="#list数据存取" class="headerlink" title="list数据存取"></a>list数据存取</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">对list数据进行存取</span><br><span class="line"></span><br><span class="line">函数原型:</span><br><span class="line">	front();		back();</span><br><span class="line">list本质是链表,不是使用连续的空间去访问,所有没有at()和[]访问</span><br><span class="line">可以it++或it--(双向); 但不可以it = it + 1;因为1可以被替换,导致又可以随机访问了。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showList</span><span class="params">(<span class="type">const</span> std::list&lt;<span class="type">int</span>&gt;&amp; t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::list&lt;<span class="type">int</span>&gt;::const_iterator it = t.<span class="built_in">begin</span>(); it != t.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		t.<span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; t.<span class="built_in">front</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; t.<span class="built_in">back</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="list反转和排序"><a href="#list反转和排序" class="headerlink" title="list反转和排序"></a>list反转和排序</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将容器中的元素反转和排序</span><br><span class="line">reverse();</span><br><span class="line">sort();</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showList</span><span class="params">(<span class="type">const</span> std::list&lt;<span class="type">int</span>&gt;&amp; t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::list&lt;<span class="type">int</span>&gt;::const_iterator it = t.<span class="built_in">begin</span>(); it != t.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 降序 第一个数大于第二个数</span></span><br><span class="line">	<span class="keyword">return</span> a &gt; b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::list&lt;<span class="type">int</span>&gt; t;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		t.<span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	t.<span class="built_in">reverse</span>();</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//sort(t.begin(), t.end());  所有不支持随机访问的迭代器的容器不可以使用标准算法</span></span><br><span class="line">	<span class="comment">// 不支持随机访问的迭代器的容器,内部会提供对应的算法</span></span><br><span class="line">	t.<span class="built_in">sort</span>();</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line">	t.<span class="built_in">sort</span>(myCompare);</span><br><span class="line">	<span class="built_in">showList</span>(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string pname;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line">	<span class="type">int</span> pheight;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age, <span class="type">int</span> height) </span><br><span class="line">		:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age),<span class="built_in">pheight</span>(height)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream &amp;os, <span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">	os &lt;&lt; p.pname &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; p.page &lt;&lt;<span class="string">&quot;, &quot;</span> &lt;&lt; p.pheight;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPersonList</span><span class="params">(<span class="type">const</span> std::list&lt;Person&gt;&amp; lst)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::list&lt;Person&gt;::const_iterator it = lst.<span class="built_in">begin</span>(); it != lst.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare1</span><span class="params">(Person&amp; p1, Person&amp; p2)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 年龄升序,身高降序</span></span><br><span class="line">	<span class="keyword">if</span> (p<span class="number">1.</span>page == p<span class="number">2.</span>page) &#123;</span><br><span class="line">		<span class="keyword">return</span> (p<span class="number">1.</span>pheight &gt; p<span class="number">2.</span>pheight);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> (p<span class="number">1.</span>page &lt; p<span class="number">2.</span>page);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;jim&quot;</span>, <span class="number">12</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;tim&quot;</span>, <span class="number">12</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;rim&quot;</span>, <span class="number">13</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ken&quot;</span>, <span class="number">10</span>, <span class="number">50</span>)</span></span>;</span><br><span class="line">	std::list&lt;Person&gt; lst;</span><br><span class="line">	lst.<span class="built_in">push_back</span>(p1);</span><br><span class="line">	lst.<span class="built_in">push_back</span>(p2);</span><br><span class="line">	lst.<span class="built_in">push_back</span>(p3);</span><br><span class="line">	lst.<span class="built_in">push_back</span>(p4);</span><br><span class="line">	<span class="built_in">showPersonList</span>(lst);</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;-------------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="comment">// 年龄升序,升高降序。</span></span><br><span class="line">	lst.<span class="built_in">sort</span>(myCompare1);</span><br><span class="line">	<span class="built_in">showPersonList</span>(lst);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="set和mutiset容器"><a href="#set和mutiset容器" class="headerlink" title="set和mutiset容器"></a>set和mutiset容器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">所有元素被插入时会自动排序</span><br><span class="line"></span><br><span class="line">本质:set/multiset属于关联式容器(会自动排序),底层结构是二叉树实现的。</span><br><span class="line"></span><br><span class="line">set/multiset的区别:</span><br><span class="line">	set不允许有重复的元素, multiset可以有重复的元素</span><br><span class="line">	</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="set容器的构造和赋值操作"><a href="#set容器的构造和赋值操作" class="headerlink" title="set容器的构造和赋值操作"></a>set容器的构造和赋值操作</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">构造:</span><br><span class="line">	set&lt;T&gt; st; 默认构造</span><br><span class="line">	set(const set&amp; st); 拷贝构造</span><br><span class="line">	</span><br><span class="line">赋值:</span><br><span class="line">	set&amp; operator= (const set&amp; st);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showSet</span><span class="params">(<span class="type">const</span> std::set&lt;<span class="type">int</span>&gt; &amp;st)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::set&lt;<span class="type">int</span>&gt;::iterator it = st.<span class="built_in">begin</span>(); it != st.<span class="built_in">end</span>(); it ++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">10</span>); <span class="comment">// 只有insert方法来插入数据</span></span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">8</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">13</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">	<span class="built_in">showSet</span>(st);<span class="comment">// 会自动排序,set不允许插入重复的值</span></span><br><span class="line"></span><br><span class="line">	<span class="function">std::set&lt;<span class="type">int</span>&gt; <span class="title">st1</span><span class="params">(st)</span></span>;</span><br><span class="line">	<span class="built_in">showSet</span>(st1);</span><br><span class="line"></span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt; st2 = st;</span><br><span class="line">	<span class="built_in">showSet</span>(st2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="set的大小操作和交换"><a href="#set的大小操作和交换" class="headerlink" title="set的大小操作和交换"></a>set的大小操作和交换</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">size(), empty(),  swap()</span><br><span class="line">不支持resize()</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showSet</span><span class="params">(<span class="type">const</span> std::set&lt;<span class="type">int</span>&gt; &amp;st)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::set&lt;<span class="type">int</span>&gt;::iterator it = st.<span class="built_in">begin</span>(); it != st.<span class="built_in">end</span>(); it ++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">	<span class="keyword">if</span> (st.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空! &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">13</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">14</span>);</span><br><span class="line">	std::cout &lt;&lt; st.<span class="built_in">size</span>() &lt;&lt; std::endl; </span><br><span class="line"></span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt; st1;</span><br><span class="line">	st<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">	st<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">	st<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	st.<span class="built_in">swap</span>(st1);</span><br><span class="line">	<span class="built_in">showSet</span>(st);</span><br><span class="line">	<span class="built_in">showSet</span>(st1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="set插入与删除"><a href="#set插入与删除" class="headerlink" title="set插入与删除"></a>set插入与删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert();	clear();	erase(pos);  erase(beg, end);	erase(ele);删除值为ele的元素</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showSet</span><span class="params">(<span class="type">const</span> std::set&lt;<span class="type">int</span>&gt; &amp;st)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::set&lt;<span class="type">int</span>&gt;::iterator it = st.<span class="built_in">begin</span>(); it != st.<span class="built_in">end</span>(); it ++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt; st;</span><br><span class="line"></span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">13</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">14</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">15</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">16</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">17</span>);</span><br><span class="line"></span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt;::iterator it = st.<span class="built_in">begin</span>();</span><br><span class="line">	it++;</span><br><span class="line">	st.<span class="built_in">erase</span>(it);</span><br><span class="line">	<span class="built_in">showSet</span>(st);</span><br><span class="line"></span><br><span class="line">	it = st.<span class="built_in">begin</span>();</span><br><span class="line">	it ++;</span><br><span class="line">	it ++;</span><br><span class="line">	st.<span class="built_in">erase</span>(it,st.<span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">showSet</span>(st);</span><br><span class="line"></span><br><span class="line">	st.<span class="built_in">erase</span>(<span class="number">12</span>);</span><br><span class="line">	st.<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="set容器的查找和统计"><a href="#set容器的查找和统计" class="headerlink" title="set容器的查找和统计"></a>set容器的查找和统计</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find(key); 存在返回迭代器,不存在返回set.end();</span><br><span class="line">count(key); 统计key的个数</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showSet</span><span class="params">(<span class="type">const</span> std::set&lt;<span class="type">int</span>&gt; &amp;st)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::set&lt;<span class="type">int</span>&gt;::iterator it = st.<span class="built_in">begin</span>(); it != st.<span class="built_in">end</span>(); it ++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt; st;</span><br><span class="line"></span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">13</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">14</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">15</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">16</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">17</span>);</span><br><span class="line"></span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt;::iterator it = st.<span class="built_in">find</span>(<span class="number">12</span>);</span><br><span class="line">	std::cout &lt;&lt; *it &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	it = st.<span class="built_in">find</span>(<span class="number">112</span>);</span><br><span class="line">	<span class="keyword">if</span> (it == st.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;未找到该元素!!!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; st.<span class="built_in">count</span>(<span class="number">12</span>) &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="set和multiset的区别"><a href="#set和multiset的区别" class="headerlink" title="set和multiset的区别"></a>set和multiset的区别</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set不可以插入重复的数据</span><br><span class="line">set插入数据的同时会返回插入结果,表明是否插入成功</span><br><span class="line">mutiset不会检测插入的数据,允许重复数据</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showSet</span><span class="params">(<span class="type">const</span> std::set&lt;<span class="type">int</span>&gt; &amp;st)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::set&lt;<span class="type">int</span>&gt;::iterator it = st.<span class="built_in">begin</span>(); it != st.<span class="built_in">end</span>(); it ++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">	std::multiset&lt;<span class="type">int</span>&gt; mst;</span><br><span class="line"></span><br><span class="line">	std::pair &lt; std::set&lt;<span class="type">int</span>&gt;::iterator,  <span class="type">bool</span>&gt; ret = st.<span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">	<span class="keyword">if</span> (ret.second) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;插入成功!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	mst.<span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">	mst.<span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="pair对组的创建"><a href="#pair对组的创建" class="headerlink" title="pair对组的创建"></a>pair对组的创建</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">成对出现的数据,利用对组可以返回两个数据</span><br><span class="line"></span><br><span class="line">pair&lt;type, type&gt; p (value1, value2);</span><br><span class="line">pair&lt;type, type&gt; p = make_pair(value1, value2);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">std::pair&lt;std::string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;john&quot;</span>, <span class="number">5</span>)</span></span>;</span><br><span class="line">	std::cout &lt;&lt; p.first &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; p.second &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::pair&lt;<span class="type">int</span>, <span class="type">double</span>&gt; p1 = std::<span class="built_in">make_pair</span>(<span class="number">12</span>, <span class="number">34.5</span>);</span><br><span class="line">	std::cout &lt;&lt; p<span class="number">1.f</span>irst &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; p<span class="number">1.</span>second &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="set容器的排序"><a href="#set容器的排序" class="headerlink" title="set容器的排序"></a>set容器的排序</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set默认的排序规则为从小到大</span><br><span class="line">利用仿函数,可以改变排序规则</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 使用伪函数</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> v1 &gt; v2; <span class="comment">//降序</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showSetes</span><span class="params">(<span class="type">const</span> std::set&lt;<span class="type">int</span>&gt; &amp;st)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::set&lt;<span class="type">int</span>&gt;::const_iterator it = st.<span class="built_in">begin</span>(); it != st.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showSetes1</span><span class="params">(<span class="type">const</span> std::set&lt;<span class="type">int</span>,MyCompare&gt; &amp;st)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::set&lt;<span class="type">int</span>, MyCompare&gt;::const_iterator it = st.<span class="built_in">begin</span>(); it != st.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::set&lt;<span class="type">int</span>&gt; st;</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">15</span>);</span><br><span class="line">	st.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">	<span class="built_in">showSetes</span>(st);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 改变排序规则</span></span><br><span class="line">	std::set&lt;<span class="type">int</span>,MyCompare&gt; st1;</span><br><span class="line">	st<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">12</span>);</span><br><span class="line">	st<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">	st<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">15</span>);</span><br><span class="line">	st<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">	<span class="built_in">showSetes1</span>(st1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string pname;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age)</span><br><span class="line">	:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">const</span> Person&amp; p1, <span class="type">const</span> Person&amp; p2)</span><span class="type">const</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> p<span class="number">1.</span>page &gt; p<span class="number">2.</span>page;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">const</span> std::set&lt;Person,MyCompare&gt;&amp; st)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::set&lt;Person, MyCompare&gt;::const_iterator it = st.<span class="built_in">begin</span>(); it != st.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it).pname &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*it).page;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 对于自定义的类型必须指定排序规则</span></span><br><span class="line">	std::set&lt;Person, MyCompare&gt; st;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;ken&quot;</span>, <span class="number">12</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;Jane&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;Nur&quot;</span>, <span class="number">9</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;Tim&quot;</span>, <span class="number">8</span>)</span></span>;</span><br><span class="line">	st.<span class="built_in">insert</span>(p1);</span><br><span class="line">	st.<span class="built_in">insert</span>(p2);</span><br><span class="line">	st.<span class="built_in">insert</span>(p3);</span><br><span class="line">	st.<span class="built_in">insert</span>(p4);</span><br><span class="line">	<span class="built_in">show</span>(st);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="map和multimap"><a href="#map和multimap" class="headerlink" title="map和multimap"></a>map和multimap</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">map中的所有值都是pair，pair中的第一个元素为key值(索引),第二个元素为value(实值),所有元素根据元素的键值自动排序.</span><br><span class="line"></span><br><span class="line">本质:map/multimap是关联式容器,底层结构是二叉树</span><br><span class="line"></span><br><span class="line">优点:可以依据key值快速找到value。</span><br><span class="line"></span><br><span class="line">map和multimap的区别:</span><br><span class="line">1.map不允许有重复的key值。</span><br><span class="line">2.multimap允许有重复的key值。</span><br></pre></td></tr></table></figure>

<h5 id="map的构造函数和赋值"><a href="#map的构造函数和赋值" class="headerlink" title="map的构造函数和赋值"></a>map的构造函数和赋值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map&lt;T1, T2&gt; map;</span><br><span class="line">map(const map&amp; map);</span><br><span class="line">map&amp; operator= (const map&amp; map);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">const</span> std::map&lt;<span class="type">int</span>, std::string&gt;&amp; map)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::map&lt;<span class="type">int</span>, std::string&gt;::const_iterator it = map.<span class="built_in">begin</span>(); it != map.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it).first&lt;&lt;<span class="string">&quot;, &quot;</span>&lt;&lt;it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::map&lt;<span class="type">int</span>, std::string&gt; map1;</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>,std::string&gt;(<span class="number">4</span>,<span class="string">&quot;jim&quot;</span>)); <span class="comment">// 匿名对数</span></span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>,std::string&gt;(<span class="number">1</span>,<span class="string">&quot;ken&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">3</span>, <span class="string">&quot;den&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">2</span>, <span class="string">&quot;ami&quot;</span>));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">show</span>(map1);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::map&lt;<span class="type">int</span>, std::string&gt; <span class="title">map2</span><span class="params">(map1)</span></span>;</span><br><span class="line">	<span class="built_in">show</span>(map2);</span><br><span class="line"></span><br><span class="line">	<span class="function">std::map&lt;<span class="type">int</span>, std::string&gt; <span class="title">map3</span><span class="params">(map1)</span></span>;</span><br><span class="line">	<span class="built_in">show</span>(map3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="map容器的大小和交换"><a href="#map容器的大小和交换" class="headerlink" title="map容器的大小和交换"></a>map容器的大小和交换</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size(); empty(); swap(st);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">const</span> std::map&lt;<span class="type">int</span>, std::string&gt;&amp; map)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::map&lt;<span class="type">int</span>, std::string&gt;::const_iterator it = map.<span class="built_in">begin</span>(); it != map.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it).first&lt;&lt;<span class="string">&quot;, &quot;</span>&lt;&lt;it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::map&lt;<span class="type">int</span>, std::string&gt; map1;</span><br><span class="line">	<span class="keyword">if</span> (map<span class="number">1.</span><span class="built_in">empty</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空..&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">3</span>,<span class="string">&quot;john&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">2</span>, <span class="string">&quot;jack&quot;</span>));</span><br><span class="line">	std::cout &lt;&lt; map<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::map&lt;<span class="type">int</span>, std::string&gt; map2;</span><br><span class="line">	map<span class="number">2.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">6</span>, <span class="string">&quot;tom&quot;</span>));</span><br><span class="line">	map<span class="number">2.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">8</span>, <span class="string">&quot;bob&quot;</span>));</span><br><span class="line"></span><br><span class="line">	map<span class="number">1.</span><span class="built_in">swap</span>(map2);</span><br><span class="line">	<span class="built_in">show</span>(map1);</span><br><span class="line">	<span class="built_in">show</span>(map2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="map的插入和删除"><a href="#map的插入和删除" class="headerlink" title="map的插入和删除"></a>map的插入和删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert();	clear(); erase(key); erase(pos); erase(beg, end);区间删除</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">const</span> std::map&lt;<span class="type">int</span>, std::string&gt;&amp; map)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::map&lt;<span class="type">int</span>, std::string&gt;::const_iterator it = map.<span class="built_in">begin</span>(); it != map.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it).first&lt;&lt;<span class="string">&quot;, &quot;</span>&lt;&lt;it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::map&lt;<span class="type">int</span>, std::string&gt; map1;</span><br><span class="line">	<span class="keyword">if</span> (map<span class="number">1.</span><span class="built_in">empty</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空..&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">4</span>,<span class="string">&quot;john&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">2</span>, <span class="string">&quot;jack&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">3</span>, <span class="string">&quot;tom&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">1</span>, <span class="string">&quot;bob&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::map&lt;<span class="type">int</span>,std::string&gt;::<span class="built_in">value_type</span>(<span class="number">6</span>, <span class="string">&quot;amy&quot;</span>));</span><br><span class="line">	map1[<span class="number">7</span>] = <span class="string">&quot;ben&quot;</span>; <span class="comment">// 不建议使用,如果后续使用不存在的map[n]会自动创建，value= 0;</span></span><br><span class="line">	<span class="comment">// std::cout &lt;&lt; map1[10] &lt;&lt; std::endl; 0</span></span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">5</span>,<span class="string">&quot;tm&quot;</span>));</span><br><span class="line"></span><br><span class="line">	map<span class="number">1.</span><span class="built_in">erase</span>(<span class="number">3</span>); <span class="comment">// key值</span></span><br><span class="line">	std::map&lt;<span class="type">int</span>, std::string&gt;::iterator it = map<span class="number">1.</span><span class="built_in">begin</span>();</span><br><span class="line">	it++;</span><br><span class="line">	it++;</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">erase</span>(it);</span><br><span class="line">	</span><br><span class="line">	it = map<span class="number">1.</span><span class="built_in">begin</span>();</span><br><span class="line">	it++;</span><br><span class="line">	it++;</span><br><span class="line">	it++;</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">erase</span>(it, map<span class="number">1.</span><span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">	map<span class="number">1.</span><span class="built_in">clear</span>();</span><br><span class="line">	<span class="built_in">show</span>(map1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="map容器的统计和查找"><a href="#map容器的统计和查找" class="headerlink" title="map容器的统计和查找"></a>map容器的统计和查找</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find(key);  如果存在则返回该元素的迭代器,如果不存在则返回end()</span><br><span class="line">count(key); 统计key的个数 </span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::map&lt;<span class="type">int</span>, std::string&gt; map1;</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">pair</span>&lt;<span class="type">int</span>, std::string&gt;(<span class="number">3</span>, <span class="string">&quot;ken&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="string">&quot;jane&quot;</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::map&lt;<span class="type">int</span>, std::string&gt;::<span class="built_in">value_type</span>(<span class="number">1</span>,<span class="string">&quot;tom&quot;</span>));</span><br><span class="line">	std::map&lt;<span class="type">int</span>, std::string&gt;::iterator it = map<span class="number">1.f</span>ind(<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">if</span> (it != map<span class="number">1.</span><span class="built_in">end</span>() ) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;存在&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; map<span class="number">1.</span><span class="built_in">count</span>(<span class="number">1</span>) &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="map排序"><a href="#map排序" class="headerlink" title="map排序"></a>map排序</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">只能是依据key,利用仿函数</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span><span class="type">const</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> v1 &gt; v2; <span class="comment">// 影响key</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">const</span> std::map&lt;<span class="type">int</span>, <span class="type">int</span>,MyCompare&gt; &amp;map)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::const_iterator it = map.<span class="built_in">begin</span>(); it != map.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;key: &quot;</span> &lt;&lt; (*it).first &lt;&lt; <span class="string">&quot;, value: &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::map&lt;<span class="type">int</span>,<span class="type">int</span>, MyCompare&gt; map1;</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">2</span>,<span class="number">3</span>));</span><br><span class="line">	map<span class="number">1.</span><span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">3</span>,<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">show</span>(map1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include &lt;iostream&gt;</span></span><br><span class="line"><span class="comment">//#include &lt;string&gt;</span></span><br><span class="line"><span class="comment">//#include &lt;map&gt;</span></span><br><span class="line"><span class="comment">//class Employee &#123;</span></span><br><span class="line"><span class="comment">//public:</span></span><br><span class="line"><span class="comment">//	char ename;</span></span><br><span class="line"><span class="comment">//	float esalary;</span></span><br><span class="line"><span class="comment">//	std::string edepartment;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//public:</span></span><br><span class="line"><span class="comment">//	Employee(char name, float salary, std::string department)</span></span><br><span class="line"><span class="comment">//		:ename&#123; name &#125;, esalary(salary), edepartment(department) &#123;&#125;</span></span><br><span class="line"><span class="comment">//&#125;;</span></span><br><span class="line"><span class="comment">//std::ostream&amp; operator&lt;&lt; (std::ostream&amp; os, const Employee&amp; em) &#123;</span></span><br><span class="line"><span class="comment">//	os &lt;&lt; em.ename &lt;&lt; &quot;, &quot; &lt;&lt; em.edepartment &lt;&lt; &quot;, &quot; &lt;&lt; em.esalary;</span></span><br><span class="line"><span class="comment">//	return os;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//void show(const std::multimap&lt;std::string, Employee&gt;&amp; map) &#123;</span></span><br><span class="line"><span class="comment">//	for (std::multimap&lt;std::string, Employee&gt;::const_iterator it = map.begin(); it != map.end(); it++) &#123;</span></span><br><span class="line"><span class="comment">//		std::cout &lt;&lt; it-&gt;first &lt;&lt; &quot;, &quot; &lt;&lt; (*it).second.ename &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line"><span class="comment">//	std::cout &lt;&lt; &quot;----&quot; &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">//	if (map.find(&quot;策划1&quot;) == map.end()) &#123;</span></span><br><span class="line"><span class="comment">//			std::cout &lt;&lt; &quot;无&quot; &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line"><span class="comment">//	std::multimap&lt;std::string, Employee&gt;::const_iterator it = map.find(&quot;策划&quot;);</span></span><br><span class="line"><span class="comment">//	for (int i = 0; i &lt; map.count(&quot;策划&quot;); i++) &#123;</span></span><br><span class="line"><span class="comment">//			std::cout &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">//			it++;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//int main() &#123;</span></span><br><span class="line"><span class="comment">//	Employee e1(&#x27;A&#x27;,1.5f,&quot;策划&quot;);</span></span><br><span class="line"><span class="comment">//	Employee e2(&#x27;B&#x27;, 1.9f, &quot;策划&quot;);</span></span><br><span class="line"><span class="comment">//	Employee e3(&#x27;D&#x27;, 0.6f, &quot;美术&quot;);</span></span><br><span class="line"><span class="comment">//	Employee e4(&#x27;E&#x27;, 1.0f, &quot;美术&quot;);</span></span><br><span class="line"><span class="comment">//	Employee e5(&#x27;F&#x27;, 1.2f, &quot;策划&quot;);</span></span><br><span class="line"><span class="comment">//	Employee e6(&#x27;G&#x27;, 1.5f, &quot;研发&quot;);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//	std::multimap&lt;std::string, Employee&gt; map1;</span></span><br><span class="line"><span class="comment">//	map1.insert(std::make_pair(e1.edepartment, e1));</span></span><br><span class="line"><span class="comment">//	map1.insert(std::make_pair(e2.edepartment, e2));</span></span><br><span class="line"><span class="comment">//	map1.insert(std::make_pair(e3.edepartment, e3));</span></span><br><span class="line"><span class="comment">//	map1.insert(std::make_pair(e4.edepartment, e4));</span></span><br><span class="line"><span class="comment">//	map1.insert(std::make_pair(e5.edepartment, e5));</span></span><br><span class="line"><span class="comment">//	map1.insert(std::make_pair(e6.edepartment, e6));</span></span><br><span class="line"><span class="comment">//	</span></span><br><span class="line"><span class="comment">//	show(map1);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CEIHUA 0;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MEISHU 1;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KAIFA 2;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string ename;</span><br><span class="line">	<span class="type">double</span> esalary;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Employee</span>(std::string name, <span class="type">double</span> salary)</span><br><span class="line">		:<span class="built_in">ename</span>(name),<span class="built_in">esalary</span>(salary) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createEmployee</span><span class="params">(std::vector&lt;Employee&gt;&amp; vp)</span> </span>&#123;</span><br><span class="line">	std::string nameSpeed = <span class="string">&quot;ABCDEFGHIJ&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		std::string name = <span class="string">&quot;员工&quot;</span> + std::<span class="built_in">string</span>(<span class="number">1</span>, nameSpeed[i]);</span><br><span class="line">		<span class="function">Employee <span class="title">e</span><span class="params">(name, std::rand()%<span class="number">10000</span> + <span class="number">10000</span>)</span></span>; <span class="comment">// 10000-19999</span></span><br><span class="line">		vp.<span class="built_in">push_back</span>(e);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGroup</span><span class="params">(<span class="type">const</span> std::vector&lt;Employee&gt;&amp; vp, std::multimap&lt;<span class="type">int</span>, Employee&gt;&amp; mmp)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;Employee&gt;::const_iterator it = vp.<span class="built_in">begin</span>(); it != vp.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		<span class="type">int</span> dept = std::<span class="built_in">rand</span>() % <span class="number">3</span>;</span><br><span class="line">		mmp.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(dept, (*it)));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showGroup</span><span class="params">(<span class="type">const</span> std::multimap&lt;<span class="type">int</span>, Employee&gt;&amp; mmp)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (std::multimap&lt;<span class="type">int</span>, Employee&gt;::const_iterator it = mmp.<span class="built_in">begin</span>(); it != mmp.<span class="built_in">end</span>(); it++ ) &#123;</span><br><span class="line">		</span><br><span class="line">		std::cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; it-&gt;second.ename &lt;&lt; std::endl;</span><br><span class="line">		b = mmp.<span class="built_in">count</span>(it-&gt;first);</span><br><span class="line">		a++;</span><br><span class="line">		<span class="keyword">if</span> (a == b) &#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;-------------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			a = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::<span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>) <span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">	std::vector&lt;Employee&gt; vp;</span><br><span class="line">	<span class="built_in">createEmployee</span>(vp);</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;Employee&gt;::iterator it = vp.<span class="built_in">begin</span>(); it != vp.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt;(*it).ename &lt;&lt; <span class="string">&quot;, &quot;</span>&lt;&lt; it-&gt;esalary &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	std::multimap&lt;<span class="type">int</span>, Employee&gt; mmp;</span><br><span class="line">	<span class="built_in">setGroup</span>(vp, mmp);</span><br><span class="line">	<span class="keyword">for</span> (std::multimap&lt;<span class="type">int</span>,Employee&gt;::const_iterator it = mmp.<span class="built_in">begin</span>(); it != mmp.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; it-&gt;second.ename &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;-------------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="built_in">showGroup</span>(mmp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="函数对象"><a href="#函数对象" class="headerlink" title="函数对象"></a>函数对象</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">重载函数调用操作符的的类,其对象称为函数对象。</span><br><span class="line">函数对象使用重载的()时,行为类似于函数调用,也叫仿函数</span><br><span class="line"></span><br><span class="line">函数对象本质是一个类,不是函数</span><br><span class="line"></span><br><span class="line">使用:</span><br><span class="line">	使用时,可以像普通函数那样调用,可以有参数和返回值</span><br><span class="line">	函数对象可以有状态</span><br><span class="line">	函数对象可以作为参数传递</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> count;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyAdd</span>() &#123;</span><br><span class="line">		count = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> a, <span class="type">int</span>  b)</span> </span>&#123;</span><br><span class="line">		count++;</span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintMyadd</span><span class="params">(MyAdd&amp; myAdd)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt;  <span class="built_in">myAdd</span>(<span class="number">9</span>,<span class="number">6</span>); <span class="comment">//作为参数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	MyAdd myadd; <span class="comment">// 仿函数</span></span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">myadd</span>(<span class="number">2</span>,<span class="number">5</span>) &lt;&lt; std::endl;</span><br><span class="line">	<span class="built_in">myadd</span>(<span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line">	<span class="built_in">myadd</span>(<span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line">	<span class="built_in">myadd</span>(<span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line">	<span class="built_in">myadd</span>(<span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line">	std::cout &lt;&lt; myadd.count &lt;&lt; std::endl;</span><br><span class="line">	<span class="built_in">PrintMyadd</span>(myadd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="谓词"><a href="#谓词" class="headerlink" title="谓词"></a>谓词</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">返回bool类型的仿函数称为谓词，如果opertaor()接受一个参数就叫一元谓词,如果operator接收两个参数就叫两元谓词,</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;  <span class="comment">// 仿函数</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v)</span> </span>&#123; <span class="comment">// 一元谓词</span></span><br><span class="line">		<span class="keyword">return</span> v &gt; <span class="number">5</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass1</span> &#123;  <span class="comment">// 仿函数</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span> </span>&#123; <span class="comment">// 二元谓词</span></span><br><span class="line">		<span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator it = std::<span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">MyClass</span>());</span><br><span class="line">	<span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;没有找到&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;找到了! &quot;</span>&lt;&lt;(*it) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass1</span> &#123;  <span class="comment">// 仿函数</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span> </span>&#123; <span class="comment">// 二元谓词</span></span><br><span class="line">		<span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">const</span> std::vector&lt;<span class="type">int</span>&gt; &amp;v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::const_iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">	std::<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">	std::<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">MyClass1</span>());</span><br><span class="line">	<span class="built_in">show</span>(v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="内建函数对象"><a href="#内建函数对象" class="headerlink" title="内建函数对象"></a>内建函数对象</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">STL内建了一些函数对象</span><br><span class="line">分类:	算术仿函数, 关系仿函数, 逻辑仿函数</span><br><span class="line">用法:与普通函数一致,使用内建函数对象需要引入#include&lt;functional&gt;</span><br></pre></td></tr></table></figure>

<h5 id="算术仿函数"><a href="#算术仿函数" class="headerlink" title="算术仿函数"></a>算术仿函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">实现四则运算,其中negate是一元运算,别的是二元运算</span><br><span class="line">template&lt;class T&gt; T plus &lt;T&gt;	加法仿函数</span><br><span class="line">template&lt;class T&gt; T minus &lt;T&gt;	减法仿函数</span><br><span class="line">template&lt;class T&gt; T multiplies &lt;T&gt;	乘法仿函数</span><br><span class="line">template&lt;class T&gt; T divides &lt;T&gt;	除法仿函数</span><br><span class="line">template&lt;class T&gt; T modulus &lt;T&gt;	取模仿函数</span><br><span class="line">template&lt;class T&gt; T negate &lt;T&gt;	取反仿函数</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::negate&lt;<span class="type">int</span>&gt; n;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">n</span>(<span class="number">50</span>) &lt;&lt; std::endl; <span class="comment">// -50</span></span><br><span class="line"></span><br><span class="line">	std::plus&lt;<span class="type">int</span>&gt; p;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">p</span>(<span class="number">10</span>, <span class="number">20</span>) &lt;&lt; std::endl; <span class="comment">// 30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="关系仿函数"><a href="#关系仿函数" class="headerlink" title="关系仿函数"></a>关系仿函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">实现关系比对</span><br><span class="line">template&lt;class T&gt; bool equal_to &lt;T&gt;	 等于</span><br><span class="line">template&lt;class T&gt; bool not_equal_to&lt;T&gt;	不等于</span><br><span class="line">template&lt;class T&gt; bool greater &lt;T&gt;	大于</span><br><span class="line">template&lt;class T&gt; bool greater_equal &lt;T&gt; 大于等于	</span><br><span class="line">template&lt;class T&gt; bool less&lt;T&gt;	 小于</span><br><span class="line">template&lt;class T&gt; bool less_equal &lt;T&gt; 小于等于</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123;</span><br><span class="line">		std::greater&lt;<span class="type">int</span>&gt; g;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">g</span>(v1,v2);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	std::<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">MyClass</span>());</span><br><span class="line">	<span class="comment">// 	std::sort(v.begin(), v.end(), std::greater&lt;int&gt;());使用这个就什么都不用写</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="逻辑仿函数"><a href="#逻辑仿函数" class="headerlink" title="逻辑仿函数"></a>逻辑仿函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">实现逻辑运算</span><br><span class="line">template&lt;class T&gt; bool logical_and&lt;T&gt; 逻辑与</span><br><span class="line">template&lt;class T&gt; bool logical_or&lt;T&gt; 逻辑或</span><br><span class="line">template&lt;class T&gt; bool logical_not &lt;T&gt;	逻辑非</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">bool</span> v)</span> </span>&#123;</span><br><span class="line">		std::logical_not&lt;<span class="type">bool</span>&gt; n;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">n</span>(v);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">bool</span>&gt; v;</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">	std::vector&lt;<span class="type">bool</span>&gt; v1;</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">resize</span>(v.<span class="built_in">size</span>());</span><br><span class="line">	<span class="comment">//std::transform(v.begin(),v.end(), v1.begin(),MyClass());</span></span><br><span class="line">	std::<span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), v<span class="number">1.</span><span class="built_in">begin</span>(), std::<span class="built_in">logical_not</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">bool</span>&gt;::iterator it = v<span class="number">1.</span><span class="built_in">begin</span>(); it != v<span class="number">1.</span><span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="常用算法"><a href="#常用算法" class="headerlink" title="常用算法"></a>常用算法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">算法主要有头文件&lt;algorithm&gt;&lt;functional&gt;&lt;numeric&gt;组成</span><br><span class="line">&lt;algorithm&gt;是所有STL头文件中最大的一个,范围涉及到比较,交换,查找,遍历,复制,修改...</span><br><span class="line">&lt;numeric&gt;体积很小,只包括几个在序列上面进行简单数学运算的模板函数</span><br><span class="line">&lt;functional&gt;定义了一些模板类,用以声明函数对象。</span><br></pre></td></tr></table></figure>

<h5 id="遍历算法"><a href="#遍历算法" class="headerlink" title="遍历算法"></a>遍历算法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for_each 遍历容器		transform 搬运容器到另一个容器</span><br></pre></td></tr></table></figure>

<h5 id="for-each"><a href="#for-each" class="headerlink" title="for_each"></a>for_each</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for_each(iterator bg, iterator end, _func);</span><br><span class="line">遍历算法,开始迭代器,结束迭代器,函数或者函数对象</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> v)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; v &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Print</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; v &lt;&lt; <span class="string">&quot;, &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), print);</span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Print</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">transform(iterator beg1, iterator end1, iterator beg2, _func);</span><br><span class="line">目标容器需要提前开辟空间，否则报错</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ts</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> a)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a + <span class="number">100</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> v)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; v &lt;&lt; <span class="string">&quot;, &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	v<span class="number">2.</span><span class="built_in">resize</span>(v<span class="number">1.</span><span class="built_in">size</span>()); <span class="comment">// 目标容器需要提前开辟空间，否则报错</span></span><br><span class="line">	std::for_each(v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), printInfo);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	std::<span class="built_in">transform</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">2.</span><span class="built_in">begin</span>(), <span class="built_in">Ts</span>());</span><br><span class="line"></span><br><span class="line">	std::for_each(v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="常用的查找算法"><a href="#常用的查找算法" class="headerlink" title="常用的查找算法"></a>常用的查找算法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find查找元素	find_if按条件	 adjacent_find查找相邻重复元素	 </span><br><span class="line">binary_search二分查找法	 count统计元素个数 	 count_if按条件统计</span><br></pre></td></tr></table></figure>

<h5 id="find"><a href="#find" class="headerlink" title="find"></a>find</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find(iterator beg, iterator end, value);</span><br><span class="line">开始迭代器,结束迭代器, 查找的元素</span><br><span class="line">按值查找，找到返回迭代器的位置,没找到返回end()迭代器</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">	:<span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查找自定义数据类型必须定义==</span></span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>== (<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;page == p.page;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator it = std::<span class="built_in">find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">4</span>);</span><br><span class="line">	<span class="keyword">if</span> (it != v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	std::vector&lt;Person&gt; vp;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p4</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p1);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p2);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p3);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p4);</span><br><span class="line">	<span class="function">Person <span class="title">pp</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	std::vector&lt;Person&gt;::iterator itp = std::<span class="built_in">find</span>(vp.<span class="built_in">begin</span>(), vp.<span class="built_in">end</span>(), pp);</span><br><span class="line">	<span class="keyword">if</span> (itp != vp.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*itp).page &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="find-if"><a href="#find-if" class="headerlink" title="find_if"></a>find_if</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">按条件查找元素</span><br><span class="line">find_if(iterator beg, iterator end, _pred);</span><br><span class="line">按值查找,返回迭代器的位置,如果找不到返回end()迭代器的位置.</span><br><span class="line">开始位置,结束位置,函数或者谓词(返回bool类型的仿函数)</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">	:<span class="built_in">page</span>(age)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查找自定义数据类型必须定义==</span></span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>== (<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;page == p.page;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">getThree</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val == <span class="number">3</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">getPerson</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">const</span> Person&amp; p)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> p.page == <span class="number">4</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator it = std::<span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">getThree</span>());</span><br><span class="line">	<span class="keyword">if</span> (it != v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;空&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	std::vector&lt;Person&gt; vp;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p4</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p1);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p2);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p3);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p4);</span><br><span class="line">	<span class="function">Person <span class="title">pp</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	std::vector&lt;Person&gt;::iterator itp = std::<span class="built_in">find_if</span>(vp.<span class="built_in">begin</span>(), vp.<span class="built_in">end</span>(), <span class="built_in">getPerson</span>());</span><br><span class="line">	<span class="keyword">if</span> (itp != vp.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*itp).page &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="adjacent-find"><a href="#adjacent-find" class="headerlink" title="adjacent_find"></a>adjacent_find</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">查找相邻重复元素</span><br><span class="line">函数原型:</span><br><span class="line">	adjacent_find(iterator beg, iterator end);</span><br><span class="line">	查找相邻重复元素,返回相邻元素的第一个迭代器</span><br><span class="line">	beg开始迭代器, end结束迭代器</span><br><span class="line">	如果没有返回end()</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">5</span>);<span class="comment">// 这样才是相邻重复元素</span></span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator it =  std::<span class="built_in">adjacent_find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">	<span class="keyword">if</span> (it!= v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it) &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;未找到相邻重复元素&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="binary-search"><a href="#binary-search" class="headerlink" title="binary_search"></a>binary_search</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查找指定元素是否存在</span><br><span class="line">bool binary_search(iterator beg, iterator end, value);</span><br><span class="line">查找指定元素，找到返回true，没有找到返回false。 无序序列中无效</span><br><span class="line">开始迭代器,结束迭代器,查找的元素</span><br><span class="line">速度快</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">bool</span> exsit_Three = std::<span class="built_in">binary_search</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">13</span>);</span><br><span class="line">	std::cout &lt;&lt; exsit_Three &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="count"><a href="#count" class="headerlink" title="count"></a>count</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">统计元素的个数</span><br><span class="line">count(iterator beg, iterator end, value); 统计元素出现的个数</span><br><span class="line">		开始迭代器    结束迭代器    元素值</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string pname;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age)</span><br><span class="line">		:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age) &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>== (<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((<span class="keyword">this</span>-&gt;pname == p.pname) &amp;&amp; (<span class="keyword">this</span>-&gt;page = p.page)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">	<span class="type">int</span> count = std::<span class="built_in">count</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">4</span>);</span><br><span class="line">	std::cout &lt;&lt; count &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::vector&lt;Person&gt; vp;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;jim&quot;</span>, <span class="number">12</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;tom&quot;</span>, <span class="number">13</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;jack&quot;</span>, <span class="number">14</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;jack&quot;</span>, <span class="number">14</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">un</span><span class="params">(<span class="string">&quot;jack&quot;</span>, <span class="number">14</span>)</span></span>;</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p1);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p2);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p3);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p4);</span><br><span class="line">	<span class="type">int</span> count1 = std::<span class="built_in">count</span>(vp.<span class="built_in">begin</span>(), vp.<span class="built_in">end</span>(),un);</span><br><span class="line">	std::cout &lt;&lt; count1 &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="count-if"><a href="#count-if" class="headerlink" title="count_if"></a>count_if</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">按条件统计元素个数</span><br><span class="line">count_if(iterator beg, iterator end, _Pred);</span><br><span class="line">按条件元素的出现的次数</span><br><span class="line">开始迭代器,结束迭代器,谓词</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CountThree</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> v &gt; <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	std::string pname;</span><br><span class="line">	<span class="type">int</span> page;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age)</span><br><span class="line">		:<span class="built_in">pname</span>(name),<span class="built_in">page</span>(age) &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>== (<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((<span class="keyword">this</span>-&gt;pname == p.pname) &amp;&amp; (<span class="keyword">this</span>-&gt;page = p.page)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CountPerson</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">const</span> Person&amp; p)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (p.page == <span class="number">14</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> count = std::<span class="built_in">count_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">CountThree</span>());</span><br><span class="line">	std::cout &lt;&lt; count &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::vector&lt;Person&gt; vp;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;jim&quot;</span>, <span class="number">12</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;tom&quot;</span>, <span class="number">13</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;jack&quot;</span>, <span class="number">14</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;jack&quot;</span>, <span class="number">14</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">un</span><span class="params">(<span class="string">&quot;jack&quot;</span>, <span class="number">14</span>)</span></span>;</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p1);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p2);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p3);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(p4);</span><br><span class="line">	vp.<span class="built_in">push_back</span>(un);</span><br><span class="line">	<span class="type">int</span> countvp = std::<span class="built_in">count_if</span>(vp.<span class="built_in">begin</span>(), vp.<span class="built_in">end</span>(), <span class="built_in">CountPerson</span>());</span><br><span class="line">	std::cout &lt;&lt; countvp &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="常用排序算法"><a href="#常用排序算法" class="headerlink" title="常用排序算法"></a>常用排序算法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sort容器内元素排序  	random_shuffle洗牌(随机排序)	  </span><br><span class="line">merge容器元素合并,并存储到另一容器中    	reverse反转指定范围的元素(首尾对调)</span><br></pre></td></tr></table></figure>

<h5 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort(iterator beg, iterator end, _Prev);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Paixu</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it)&lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">	std::<span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Paixu</span>());</span><br><span class="line">	<span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">		std::cout &lt;&lt; (*it) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="random-shuffle"><a href="#random-shuffle" class="headerlink" title="random_shuffle"></a>random_shuffle</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">洗牌,指定范围内的元素随机调整次序。</span><br><span class="line"></span><br><span class="line">random_shuffle(iterator beg, iterator end);</span><br><span class="line">		开始迭代器,	结束迭代器</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::<span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printInfo);</span><br><span class="line">	std::<span class="built_in">random_shuffle</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将容器合并并存储到一台容器中</span><br><span class="line">merge(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);</span><br><span class="line">前提:两个容器必须是有序的。</span><br><span class="line">容器1开始迭代器,容器1结束迭代器,容器2开始迭代器,容器2结束迭代器,目标容器开始迭代器</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">		v<span class="number">2.</span><span class="built_in">push_back</span>(i<span class="number">+10</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">	v<span class="number">3.</span><span class="built_in">resize</span>(v<span class="number">1.</span><span class="built_in">size</span>() + v<span class="number">2.</span><span class="built_in">size</span>());</span><br><span class="line">	std::<span class="built_in">merge</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), v<span class="number">3.</span><span class="built_in">begin</span>());</span><br><span class="line">	std::for_each(v<span class="number">3.</span><span class="built_in">begin</span>(), v<span class="number">3.</span><span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">容器内元素反转(首尾对调)</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::<span class="built_in">reverse</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="常用的拷贝和替换算法"><a href="#常用的拷贝和替换算法" class="headerlink" title="常用的拷贝和替换算法"></a>常用的拷贝和替换算法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy;	replce;	  replace_if;   swap;</span><br></pre></td></tr></table></figure>

<h5 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">容器内指定范围的元素拷贝到另一个容器中</span><br><span class="line">copy(iterator beg1, iterator end1, iterator dest);</span><br><span class="line">需要提前开辟空间。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	v<span class="number">1.</span><span class="built_in">resize</span>(v.<span class="built_in">size</span>());</span><br><span class="line"></span><br><span class="line">	std::<span class="built_in">copy</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), v<span class="number">1.</span><span class="built_in">begin</span>());</span><br><span class="line">	std::for_each(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将容器内指定范围的旧元素修改为新元素</span><br><span class="line"></span><br><span class="line">replace(iterator beg, iterator end, oldvalue, newvalue);</span><br><span class="line">将区间内的旧元素换为新元素</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	std::<span class="built_in">replace</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">4</span>, <span class="number">9</span>);</span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="replace-if"><a href="#replace-if" class="headerlink" title="replace_if"></a>replace_if</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将区间内满足条件的元素,替换成指定元素</span><br><span class="line">replace_if(iterator beg, iterator end, _pred, newvalue);</span><br><span class="line">		 	开始迭代器   结束迭代器    谓词     新值</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GreaterTwo</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val &gt; <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">	v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">	std::<span class="built_in">replace_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">GreaterTwo</span>(), <span class="number">9</span>);</span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="swap"><a href="#swap" class="headerlink" title="swap"></a>swap</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">互换两个容器的功能</span><br><span class="line">swap(container c1, container c2);</span><br><span class="line">容器需要是同种类型的容器。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">20</span>; i &gt; <span class="number">15</span>; i--) &#123;</span><br><span class="line">		v<span class="number">2.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	std::<span class="built_in">swap</span>(v1, v2);</span><br><span class="line"></span><br><span class="line">	std::for_each(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), printInfo);</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">	std::for_each(v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="常用的算术生成算法"><a href="#常用的算术生成算法" class="headerlink" title="常用的算术生成算法"></a>常用的算术生成算法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">算术生成算法属于小型算法,使用时包含头文件#include &lt;numeric&gt;</span><br><span class="line">accumulate	计算容器元素累计总和</span><br><span class="line">fill	向容器内添加元素</span><br></pre></td></tr></table></figure>
<h5 id="accumulate"><a href="#accumulate" class="headerlink" title="accumulate"></a>accumulate</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">accumulate(iterator beg, iterator end, value);</span><br><span class="line">计算容器元素的总和</span><br><span class="line">开始构造器， 结束构造器， 起始的累加值</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		<span class="comment">// 0 1 2 3 4 </span></span><br><span class="line">		v.<span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> acc = std::<span class="built_in">accumulate</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">2</span>); <span class="comment">// 起始累加值为2</span></span><br><span class="line">	std::cout &lt;&lt; acc &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="fill"><a href="#fill" class="headerlink" title="fill"></a>fill</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">向容器中填充指定元素</span><br><span class="line">fill(iterator beg, iterator end, value);</span><br><span class="line">开始迭代器，结束迭代器，元素</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	v.<span class="built_in">resize</span>(<span class="number">5</span>);<span class="comment">// 默认填充0</span></span><br><span class="line">	std::<span class="built_in">fill</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">999</span>); <span class="comment">// 使用fill填充</span></span><br><span class="line">	std::for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="集合算法"><a href="#集合算法" class="headerlink" title="集合算法"></a>集合算法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set_intersection 求容器的交集</span><br><span class="line">set_union 求容器的并集</span><br><span class="line">set_difference 求容器的差集</span><br></pre></td></tr></table></figure>

<h5 id="set-intersection"><a href="#set-intersection" class="headerlink" title="set_intersection"></a>set_intersection</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">求交集</span><br><span class="line">set_intersection(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);</span><br><span class="line">要求区间全部是升序</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">		v<span class="number">2.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//v3.resize(v1.size() &gt; v2.size() ? v2.size() : v1.size());</span></span><br><span class="line">	v<span class="number">3.</span><span class="built_in">resize</span>(std::<span class="built_in">min</span>(v<span class="number">1.</span><span class="built_in">size</span>(), v<span class="number">2.</span><span class="built_in">size</span>()));</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator itEnd = std::<span class="built_in">set_intersection</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), 		 v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), v<span class="number">3.</span><span class="built_in">begin</span>());</span><br><span class="line">	std::for_each(v<span class="number">3.</span><span class="built_in">begin</span>(), itEnd, printInfo); <span class="comment">// 使用返回迭代器的结束迭代器</span></span><br><span class="line">&#125;</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h5 id="set-union"><a href="#set-union" class="headerlink" title="set_union"></a>set_union</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">求两个集合的并集</span><br><span class="line">set_union(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);</span><br><span class="line">要求区间全部是升序</span><br><span class="line">目标容器开辟空间需要两个容器相加</span><br><span class="line">set_union返回值是并集中最后一个元素的位置</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">		v<span class="number">2.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	v<span class="number">3.</span><span class="built_in">resize</span>(v<span class="number">1.</span><span class="built_in">size</span>()+v<span class="number">2.</span><span class="built_in">size</span>());</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator itEnd = std::<span class="built_in">set_union</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), v<span class="number">3.</span><span class="built_in">begin</span>());</span><br><span class="line">	std::for_each(v<span class="number">3.</span><span class="built_in">begin</span>(), itEnd, printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="set-difference"><a href="#set-difference" class="headerlink" title="set_difference"></a>set_difference</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">求两个元素的差集</span><br><span class="line">差集:</span><br><span class="line">	v1对v2: v1 - 交集</span><br><span class="line">	v2对v1: v2 - 交集</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">(<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">		v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">		v<span class="number">2.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	v<span class="number">3.</span><span class="built_in">resize</span>(std::<span class="built_in">max</span>(v<span class="number">1.</span><span class="built_in">size</span>(), v<span class="number">2.</span><span class="built_in">size</span>()));</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt;::iterator itEnd = std::<span class="built_in">set_difference</span>(v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">3.</span><span class="built_in">begin</span>());</span><br><span class="line">	std::for_each(v<span class="number">3.</span><span class="built_in">begin</span>(), itEnd, printInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="对象的应用优化"><a href="#对象的应用优化" class="headerlink" title="对象的应用优化"></a>对象的应用优化</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a = <span class="number">10</span>):<span class="built_in">ma</span>(a) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp; t):<span class="built_in">ma</span>(t.ma) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Test(Test)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;析构函数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	Test&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Test&amp; t) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;ma = t.ma;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;==&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> ma;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Test t1; <span class="comment">// 有参构造</span></span><br><span class="line">	<span class="function">Test <span class="title">t2</span><span class="params">(t1)</span></span>; <span class="comment">// 拷贝构造</span></span><br><span class="line">	Test t3 = t1; <span class="comment">// 拷贝构造</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Test(20)显示生成临时对象,有参构造，</span></span><br><span class="line">	<span class="comment">// Test t4 = Test(20);和 Test(20)没有区别,</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		C++编译器对于对象的优化,用临时对象生成新对象的时候,临时对象就不产生了，</span></span><br><span class="line"><span class="comment">		直接构造新对象就好了。</span></span><br><span class="line"><span class="comment">	*/</span> </span><br><span class="line">	Test t4 = <span class="built_in">Test</span>(<span class="number">20</span>); </span><br><span class="line"></span><br><span class="line">	t4 = t2;<span class="comment">// 赋值， 赋值是修改已经存在的对象的状态</span></span><br><span class="line"></span><br><span class="line">	t4 = <span class="built_in">Test</span>(<span class="number">30</span>); <span class="comment">// 先有参构造，再赋值</span></span><br><span class="line"></span><br><span class="line">	t4 = (Test)<span class="number">30</span>; <span class="comment">// 显示类型强转，再调用有参构造创建临时对象和赋值</span></span><br><span class="line"></span><br><span class="line">	t4 = <span class="number">30</span>; <span class="comment">//隐式类型转换, int -&gt; Test(int)创建临时对象再赋值 </span></span><br><span class="line"></span><br><span class="line">	Test* ptr = &amp;<span class="built_in">Test</span>(<span class="number">30</span>); <span class="comment">// 创建临时对象，出了语句就被析构，不要把临时变量赋值给指针</span></span><br><span class="line">	<span class="type">const</span> Test&amp; ref = <span class="built_in">Test</span>(<span class="number">30</span>);<span class="comment">// 创建临时对象,出了语句不被析构,临时对象使用常引用引用，只能读不能写。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> ma;</span><br><span class="line">	<span class="type">int</span> mb;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a =<span class="number">10</span>, <span class="type">int</span> b =<span class="number">10</span>):<span class="built_in">ma</span>(a),<span class="built_in">mb</span>(b) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Test(int, int)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	Test&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Test&amp; t) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;ma = t.ma;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mb = t.mb;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp; t): <span class="built_in">ma</span>(t.ma),<span class="built_in">mb</span>(t.mb) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Test(Test)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">Test <span class="title">t1</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>;  <span class="comment">// 全局变量先构造 1.Test(int, int)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Test <span class="title">t2</span><span class="params">(<span class="number">20</span>,<span class="number">20</span>)</span></span>;<span class="comment">//3. Test(int, int)</span></span><br><span class="line">	Test t3 = t2; <span class="comment">//4.Test(Test)</span></span><br><span class="line">	<span class="type">static</span> Test t4 = <span class="built_in">Test</span>(<span class="number">30</span>, <span class="number">30</span>);<span class="comment">//5.Test(Test), 直接构造新对象而不构造临时对象</span></span><br><span class="line">	t2 = <span class="built_in">Test</span>(<span class="number">40</span>, <span class="number">40</span>); <span class="comment">// 6.Test(int, int)临时对象, operator= ,~Test()</span></span><br><span class="line">	t2 = (Test)(<span class="number">40</span>,<span class="number">40</span>); <span class="comment">// 7.(40，40) = Test(40);  Test(int, int)，operator= ,~Test()</span></span><br><span class="line">	t2 = <span class="number">60</span>; <span class="comment">// Test(60)  8.Test(int, int)，operator= ,~Test()</span></span><br><span class="line">	Test* p1 = <span class="keyword">new</span> <span class="built_in">Test</span>(<span class="number">70</span>, <span class="number">70</span>);<span class="comment">// 9.Test(int, int)， 出了语句不析构,不是临时对象</span></span><br><span class="line">	Test* p2 = <span class="keyword">new</span> Test[<span class="number">2</span>];<span class="comment">// 10. Test(int, int)  Test(int, int) 对象数组。</span></span><br><span class="line">	Test* p3 = &amp;<span class="built_in">Test</span>(<span class="number">80</span>,<span class="number">80</span>); <span class="comment">// 11.Test(int, int) ~Test()</span></span><br><span class="line">	<span class="type">const</span> Test&amp; p4 = <span class="built_in">Test</span>(<span class="number">90</span>, <span class="number">90</span>); <span class="comment">//12. Test(int, int)</span></span><br><span class="line">	<span class="keyword">delete</span> p1;<span class="comment">// 13. ~Test();</span></span><br><span class="line">	<span class="keyword">delete</span>[] p2;<span class="comment">// 14. ~Test() ~Test()</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Test <span class="title">t5</span><span class="params">(<span class="number">100</span>, <span class="number">100</span>)</span></span>; <span class="comment">// 2.Test(int, int)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 析构顺序是先进后出。栈。</span></span><br><span class="line"><span class="comment">//p4,t3,t2,t4, t5, t1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> ma;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// Test(), Test(int)</span></span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a =<span class="number">10</span>):<span class="built_in">ma</span>(a)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	Test&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Test&amp; t) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;ma = t.ma;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp; t): <span class="built_in">ma</span>(t.ma)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;const Test&amp;&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getMa</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ma;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能返回局部对象或者临时对象给指针或者引用。</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="function">Test <span class="title">createTest</span><span class="params">(Test t)</span> </span>&#123;  </span><br><span class="line">	<span class="type">int</span> val = t.<span class="built_in">getMa</span>();</span><br><span class="line">	<span class="function">Test <span class="title">tmp</span><span class="params">(val)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Test t1; <span class="comment">// 1. Test(int)</span></span><br><span class="line">	Test t2; <span class="comment">// 2. Test(int)</span></span><br><span class="line">	t2 = <span class="built_in">createTest</span>(t1);</span><br><span class="line">	<span class="comment">/* 3:</span></span><br><span class="line"><span class="comment">		 a. Test(const Test&amp;)拷贝构造,实参到形参是初始化</span></span><br><span class="line"><span class="comment">		 b. Test(int)	tmp创建</span></span><br><span class="line"><span class="comment">		 c. Test(const Test&amp;), tmp在main上构造临时对象(return的时候)</span></span><br><span class="line"><span class="comment">		 d. ~Test() : tmp析构</span></span><br><span class="line"><span class="comment">		 e. ~Test() : t析构</span></span><br><span class="line"><span class="comment">		 f. operator= t2赋值</span></span><br><span class="line"><span class="comment">		 g. ~Test(), main上的临时对象析构</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	4:</span></span><br><span class="line"><span class="comment">		a.~Test() t2析构</span></span><br><span class="line"><span class="comment">         b.~Test() t1析构</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id=""><a href="#" class="headerlink" title="&amp;"></a>&amp;</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> &amp;ref = a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在底层，引用类似于：</span></span><br><span class="line"><span class="type">int</span> *<span class="type">const</span> ptr = &amp;a; <span class="comment">// 指针常量(* const)</span></span><br></pre></td></tr></table></figure>

<h5 id="优化1"><a href="#优化1" class="headerlink" title="优化1"></a>优化1</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> ma;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// Test(), Test(int)</span></span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a =<span class="number">10</span>):<span class="built_in">ma</span>(a)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	Test&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Test&amp; t) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;ma = t.ma;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp; t): <span class="built_in">ma</span>(t.ma)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;const Test&amp;&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getMa</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ma;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	a.函数传递过程中,对象优先使用引用传递,不要用值传递</span></span><br><span class="line"><span class="comment">	b.函数返回对象的时候，应该优先返回临时对象而不是一个已经的定义过的对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Test <span class="title">createTest</span><span class="params">(Test &amp;t)</span> </span>&#123;  <span class="comment">// 使用&amp;没有拷贝构造和析构了</span></span><br><span class="line">	<span class="type">int</span> val = t.<span class="built_in">getMa</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	Test tmp(val);</span></span><br><span class="line"><span class="comment">	return tmp;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 直接返回一个临时对象</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	用拷贝构造创建一个新对象</span></span><br><span class="line"><span class="comment">	Test t = Test(val);不会执行,变为Test t(val);</span></span><br><span class="line"><span class="comment">	直接构造main栈帧的临时对象即可,优化掉中间的临时对象</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">Test</span>(val); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Test t1; <span class="comment">// 1.Test(int)</span></span><br><span class="line">	Test t2; <span class="comment">// 2.Test(int)</span></span><br><span class="line">	t2 = <span class="built_in">createTest</span>(t1); </span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		3.Test(int);  main栈帧上创建临时对象</span></span><br><span class="line"><span class="comment">		4.operator= </span></span><br><span class="line"><span class="comment">	*/</span> </span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		析构:</span></span><br><span class="line"><span class="comment">			1.~Test() main栈帧上的临时对象析构</span></span><br><span class="line"><span class="comment">			2.~Test() t2析构</span></span><br><span class="line"><span class="comment">			3.~Test() t1析构</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> ma;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// Test(), Test(int)</span></span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a =<span class="number">10</span>):<span class="built_in">ma</span>(a)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	Test&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Test&amp; t) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;ma = t.ma;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp; t): <span class="built_in">ma</span>(t.ma)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;const Test&amp;&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getMa</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ma;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	a.函数参数传递过程中,对象优先使用引用传递,不要用值传递</span></span><br><span class="line"><span class="comment">	b.函数返回对象的时候，应该优先返回临时对象而不是一个已经的定义过的对象</span></span><br><span class="line"><span class="comment">	c.接收函数返回值是对象的函数调用的时候优先使用初始化的方式接受，而不是赋值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Test <span class="title">createTest</span><span class="params">(Test &amp;t)</span> </span>&#123;  <span class="comment">// 使用&amp;没有拷贝构造和析构了</span></span><br><span class="line">	<span class="type">int</span> val = t.<span class="built_in">getMa</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">Test</span>(val); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Test t1; <span class="comment">// 1.Test(int)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	Test t2; </span></span><br><span class="line"><span class="comment">	t2 = createTest(t1); </span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	Test t2 = <span class="built_in">createTest</span>(t1);</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		2. Test(int) 在main的栈帧中产生临时对象</span></span><br><span class="line"><span class="comment">		此时由于又要用一个临时对象拷贝构造</span></span><br><span class="line"><span class="comment">		Test t = Test(val)--优化--&gt; Test t(val)</span></span><br><span class="line"><span class="comment">		所有第二步是直接构造t2; Test t2(val);</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">/*析构</span></span><br><span class="line"><span class="comment">	* 3.~Test() t2析构</span></span><br><span class="line"><span class="comment">	* 4.~Test() t1析构</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CMyString</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> <span class="type">char</span>* str = <span class="literal">nullptr</span>) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const char*)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (str != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str) + <span class="number">1</span>];</span><br><span class="line">			std::<span class="built_in">strcpy</span>(mptr, str);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">1</span>];</span><br><span class="line">			*mptr = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CMyString</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~CMyString&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (mptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] mptr;</span><br><span class="line">			mptr = <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> CMyString &amp;str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const CMyString &amp;str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="type">char</span>* temp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr)<span class="number">+1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(temp, str.mptr);</span><br><span class="line">		mptr = temp;</span><br><span class="line">		temp = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString&amp; operator=&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">char</span>* tmp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(tmp, str.mptr);</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = tmp;</span><br><span class="line">		tmp = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">c_str</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> mptr; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* mptr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">CMyString <span class="title">getString</span><span class="params">(CMyString &amp;str)</span> </span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span>* pstr = str.<span class="built_in">c_str</span>();</span><br><span class="line">	<span class="function">CMyString <span class="title">tmpStr</span><span class="params">(pstr)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> tmpStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">CMyString <span class="title">str1</span><span class="params">(<span class="string">&quot;1111111111&quot;</span>)</span></span>; <span class="comment">//1. CMyString(const char*) str1创建</span></span><br><span class="line">	CMyString str2; <span class="comment">//2. CMyString(const char*) str2创建</span></span><br><span class="line"></span><br><span class="line">	str2 = <span class="built_in">getString</span>(str1); </span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		3. CMyString(const char*) tmpStr有参构造</span></span><br><span class="line"><span class="comment">		4. CMyString(const CMyString &amp;str)	(效率低)main的栈帧上拷贝构造出一个临时对象</span></span><br><span class="line"><span class="comment">		5. ~CMyString tmpStr的析构</span></span><br><span class="line"><span class="comment">		6. operator=	str2被赋值     (效率低)main栈帧上的临时对象赋值给str2</span></span><br><span class="line"><span class="comment">		7.  ~CMyString main栈帧上的析构</span></span><br><span class="line"><span class="comment">		8.  1111111111</span></span><br><span class="line"><span class="comment">		9.  ~CMyString str2析构</span></span><br><span class="line"><span class="comment">		10.  ~CMyString str1析构</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; str<span class="number">2.</span><span class="built_in">c_str</span>() &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="右值引用与左值引用"><a href="#右值引用与左值引用" class="headerlink" title="右值引用与左值引用"></a>右值引用与左值引用</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">左值可以绑定到左值引用上</span></span><br><span class="line"><span class="comment">左值不可以绑定到右值引用上</span></span><br><span class="line"><span class="comment">右值不可以直接绑定到左值引用上,使用const修饰左值引用才可以</span></span><br><span class="line"><span class="comment">右值可以直接绑定到右值引用上</span></span><br><span class="line"><span class="comment">一个右值引用变量本身是一个左值。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>; </span><br><span class="line">	<span class="type">int</span>&amp; b = a; <span class="comment">// 左值:一般来说有内存有名字, 右值:无名字(临时量),没内存。可以把左值绑定到左值引用</span></span><br><span class="line">	<span class="comment">//	int&amp;&amp; c = a; 无法将左值绑定到右值引用</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	使用const的本质是:</span></span><br><span class="line"><span class="comment">	int temp = 20;</span></span><br><span class="line"><span class="comment">	const int &amp;c = temp;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">// 常引用</span></span><br><span class="line">	<span class="type">const</span> <span class="type">int</span>&amp; c = <span class="number">20</span>; <span class="comment">//  不能直接将右值直接绑定到左值引用上，除非使用const</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	int temp = 20;</span></span><br><span class="line"><span class="comment">	int &amp;&amp;d = tmp;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="type">int</span>&amp;&amp; d = <span class="number">20</span>; <span class="comment">// 可以把一个右值绑定到一个右值引用上。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// std::string&amp; str = std::string(&quot;aaa&quot;); 临时变量为右值，无法将右值绑定到左值引用上。</span></span><br><span class="line">	<span class="type">const</span> std::string&amp; str = std::<span class="built_in">string</span>(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// int&amp;&amp; f = d; 一个右值引用变量的本身是一个左值,有名字可以取内存地址</span></span><br><span class="line">	<span class="type">int</span>&amp; f = d;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 左值引用</span></span><br><span class="line">    <span class="type">int</span>&amp; b = a;</span><br><span class="line">    b = <span class="number">20</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; std::endl;  <span class="comment">// 输出 20</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 右值引用</span></span><br><span class="line">    <span class="type">int</span>&amp;&amp; d = <span class="number">30</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;d = &quot;</span> &lt;&lt; d &lt;&lt; std::endl;  <span class="comment">// 输出 30</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 验证右值引用变量是左值</span></span><br><span class="line">    <span class="type">int</span>&amp;&amp; e = d;  <span class="comment">// 错误！d是左值</span></span><br><span class="line">    <span class="type">int</span>&amp;&amp; f = std::<span class="built_in">move</span>(d);  <span class="comment">// 正确：使用std::move将左值转换为右值</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CMyString</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> <span class="type">char</span>* str = <span class="literal">nullptr</span>) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const char*)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (str != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str) + <span class="number">1</span>];</span><br><span class="line">			std::<span class="built_in">strcpy</span>(mptr, str);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">1</span>];</span><br><span class="line">			*mptr = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CMyString</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~CMyString&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (mptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] mptr;</span><br><span class="line">			mptr = <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 带左值引用参数的拷贝构造</span></span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const CMyString &amp;str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="type">char</span>* temp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(temp, str.mptr);</span><br><span class="line">		mptr = temp;</span><br><span class="line">		temp = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 带右值引用参数的拷贝构造</span></span><br><span class="line">	<span class="built_in">CMyString</span>(CMyString&amp;&amp; str) &#123; <span class="comment">// str引用没有名字/没内存，比如临时对象</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(CMyString &amp;&amp;str) &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 带左值引用的赋值重载函数</span></span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(const CMyString&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">char</span>* tmp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(tmp, str.mptr);</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = tmp;</span><br><span class="line">		tmp = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 带右值引用参数的赋值重载函数</span></span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (CMyString&amp;&amp; str) &#123; <span class="comment">// 临时对象，没有必要开辟空间赋值了,直接使用临时对象的资源</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(CMyString&amp;&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">c_str</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> mptr; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* mptr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">CMyString <span class="title">getString</span><span class="params">(CMyString&amp; str)</span> </span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span>* pstr = str.<span class="built_in">c_str</span>();</span><br><span class="line">	<span class="function">CMyString <span class="title">tmpStr</span><span class="params">(pstr)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> tmpStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">CMyString <span class="title">str1</span><span class="params">(<span class="string">&quot;1111111111&quot;</span>)</span></span>;</span><br><span class="line">	CMyString str2; </span><br><span class="line">	str2 = <span class="built_in">getString</span>(str1);</span><br><span class="line">	std::cout &lt;&lt; str<span class="number">2.</span><span class="built_in">c_str</span>() &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="临时对象"><a href="#临时对象" class="headerlink" title="临时对象"></a>临时对象</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">临时对象通常是指没有名字的、在栈上创建的、生命周期仅限于当前完整表达式的对象</span><br></pre></td></tr></table></figure>

<h5 id="CMString在Vector上的使用"><a href="#CMString在Vector上的使用" class="headerlink" title="CMString在Vector上的使用"></a>CMString在Vector上的使用</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CMyString</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> <span class="type">char</span>* str = <span class="literal">nullptr</span>) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const char*)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (str != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str) + <span class="number">1</span>];</span><br><span class="line">			std::<span class="built_in">strcpy</span>(mptr, str);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">1</span>];</span><br><span class="line">			*mptr = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CMyString</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~CMyString&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (mptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] mptr;</span><br><span class="line">			mptr = <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const CMyString &amp;str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="type">char</span>* temp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(temp, str.mptr);</span><br><span class="line">		mptr = temp;</span><br><span class="line">		temp = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(CMyString&amp;&amp; str) &#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(CMyString &amp;&amp;str) &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(const CMyString&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">char</span>* tmp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(tmp, str.mptr);</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = tmp;</span><br><span class="line">		tmp = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (CMyString&amp;&amp; str) &#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(CMyString&amp;&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">c_str</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> mptr; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* mptr;</span><br><span class="line">	<span class="keyword">friend</span> CMyString <span class="keyword">operator</span>+(<span class="type">const</span> CMyString&amp; lhs, <span class="type">const</span> CMyString&amp; rhs);</span><br><span class="line">	<span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os, <span class="type">const</span> CMyString&amp; str);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">CMyString <span class="keyword">operator</span>+(<span class="type">const</span> CMyString&amp; lhs, <span class="type">const</span> CMyString&amp; rhs) &#123;</span><br><span class="line">	<span class="type">char</span>* temp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(lhs.mptr) +std::<span class="built_in">strlen</span>(rhs.mptr) + <span class="number">1</span> ];</span><br><span class="line">	std::<span class="built_in">strcpy</span>(temp, lhs.mptr);</span><br><span class="line">	std::<span class="built_in">strcat</span>(temp, rhs.mptr);</span><br><span class="line">	<span class="function">CMyString <span class="title">tempStr</span><span class="params">(temp)</span></span>;</span><br><span class="line">	<span class="keyword">delete</span>[] temp;</span><br><span class="line">	<span class="keyword">return</span> tempStr;</span><br><span class="line">	<span class="comment">//return CMyString(temp); 使用临时对象会发生泄漏,无法回收temp。</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream &amp;os, <span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">	os &lt;&lt; str.mptr;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">CMyString <span class="title">getString</span><span class="params">(CMyString&amp; str)</span> </span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span>* pstr = str.<span class="built_in">c_str</span>();</span><br><span class="line">	<span class="function">CMyString <span class="title">tmpStr</span><span class="params">(pstr)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> tmpStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">CMyString <span class="title">str1</span><span class="params">(<span class="string">&quot;AAAA&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function">CMyString <span class="title">str2</span><span class="params">(<span class="string">&quot;BBBB&quot;</span>)</span></span>;</span><br><span class="line">	CMyString str3 = str1 + str2;</span><br><span class="line">	std::cout &lt;&lt; str3&lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CMyString</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> <span class="type">char</span>* str = <span class="literal">nullptr</span>) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const char*)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (str != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str) + <span class="number">1</span>];</span><br><span class="line">			std::<span class="built_in">strcpy</span>(mptr, str);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">1</span>];</span><br><span class="line">			*mptr = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CMyString</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~CMyString&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (mptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] mptr;</span><br><span class="line">			mptr = <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const CMyString &amp;str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="type">char</span>* temp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(temp, str.mptr);</span><br><span class="line">		mptr = temp;</span><br><span class="line">		temp = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(CMyString&amp;&amp; str) &#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(CMyString &amp;&amp;str) &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(const CMyString&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">char</span>* tmp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(tmp, str.mptr);</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = tmp;</span><br><span class="line">		tmp = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (CMyString&amp;&amp; str) &#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(CMyString&amp;&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">c_str</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> mptr; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* mptr;</span><br><span class="line">	<span class="keyword">friend</span> CMyString <span class="keyword">operator</span>+(<span class="type">const</span> CMyString&amp; lhs, <span class="type">const</span> CMyString&amp; rhs);</span><br><span class="line">	<span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os, <span class="type">const</span> CMyString&amp; str);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">CMyString <span class="keyword">operator</span>+(<span class="type">const</span> CMyString&amp; lhs, <span class="type">const</span> CMyString&amp; rhs) &#123;</span><br><span class="line">	CMyString tempStr;</span><br><span class="line">	tempStr.mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(lhs.mptr) +std::<span class="built_in">strlen</span>(rhs.mptr) + <span class="number">1</span> ];</span><br><span class="line">	std::<span class="built_in">strcpy</span>(tempStr.mptr, lhs.mptr);</span><br><span class="line">	std::<span class="built_in">strcat</span>(tempStr.mptr, rhs.mptr);</span><br><span class="line">	<span class="keyword">return</span> tempStr; <span class="comment">// 调用拷贝构造str3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream &amp;os, <span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">	os &lt;&lt; str.mptr;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">CMyString <span class="title">getString</span><span class="params">(CMyString&amp; str)</span> </span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span>* pstr = str.<span class="built_in">c_str</span>();</span><br><span class="line">	<span class="function">CMyString <span class="title">tmpStr</span><span class="params">(pstr)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> tmpStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">CMyString <span class="title">str1</span><span class="params">(<span class="string">&quot;AAAA&quot;</span>)</span></span>; <span class="comment">// 1.CMyString(const char*)</span></span><br><span class="line">	<span class="function">CMyString <span class="title">str2</span><span class="params">(<span class="string">&quot;BBBB&quot;</span>)</span></span>; <span class="comment">// 2.CMyString(const char*)</span></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	CMyString str3 = str1 + str2; </span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		3.CMyString(const char*) 创建tempStr</span></span><br><span class="line"><span class="comment">		4.CMyString(const CMyString &amp;&amp;str) 创建str3,临时对象使用右值引用</span></span><br><span class="line"><span class="comment">		5.~CMyString  tempStr</span></span><br><span class="line"><span class="comment">		6.~CMyString str3</span></span><br><span class="line"><span class="comment">		7.~CMyString str2</span></span><br><span class="line"><span class="comment">		8.~CMyString str1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	*/</span>  </span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; str3&lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CMyString</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> <span class="type">char</span>* str = <span class="literal">nullptr</span>) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const char*)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (str != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str) + <span class="number">1</span>];</span><br><span class="line">			std::<span class="built_in">strcpy</span>(mptr, str);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">1</span>];</span><br><span class="line">			*mptr = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CMyString</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~CMyString&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (mptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] mptr;</span><br><span class="line">			mptr = <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const CMyString &amp;str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="type">char</span>* temp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(temp, str.mptr);</span><br><span class="line">		mptr = temp;</span><br><span class="line">		temp = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(CMyString&amp;&amp; str) &#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(CMyString &amp;&amp;str) &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(const CMyString&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">char</span>* tmp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(tmp, str.mptr);</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = tmp;</span><br><span class="line">		tmp = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (CMyString&amp;&amp; str) &#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(CMyString&amp;&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">c_str</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> mptr; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* mptr;</span><br><span class="line">	<span class="keyword">friend</span> CMyString <span class="keyword">operator</span>+(<span class="type">const</span> CMyString&amp; lhs, <span class="type">const</span> CMyString&amp; rhs);</span><br><span class="line">	<span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os, <span class="type">const</span> CMyString&amp; str);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">CMyString <span class="keyword">operator</span>+(<span class="type">const</span> CMyString&amp; lhs, <span class="type">const</span> CMyString&amp; rhs) &#123;</span><br><span class="line">	CMyString tempStr;</span><br><span class="line">	tempStr.mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(lhs.mptr) +std::<span class="built_in">strlen</span>(rhs.mptr) + <span class="number">1</span> ];</span><br><span class="line">	std::<span class="built_in">strcpy</span>(tempStr.mptr, lhs.mptr);</span><br><span class="line">	std::<span class="built_in">strcat</span>(tempStr.mptr, rhs.mptr);</span><br><span class="line">	<span class="keyword">return</span> tempStr; <span class="comment">// 调用拷贝构造str3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream &amp;os, <span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">	os &lt;&lt; str.mptr;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">CMyString <span class="title">getString</span><span class="params">(CMyString&amp; str)</span> </span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span>* pstr = str.<span class="built_in">c_str</span>();</span><br><span class="line">	<span class="function">CMyString <span class="title">tmpStr</span><span class="params">(pstr)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> tmpStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	CMyString str1 = <span class="string">&quot;aaa&quot;</span>;<span class="comment">// 1. CMyString(const char*)</span></span><br><span class="line">	std::vector&lt;CMyString&gt; vec;</span><br><span class="line">	vec.<span class="built_in">reserve</span>(<span class="number">10</span>); <span class="comment">// 预留10个空间，防止扩容</span></span><br><span class="line">	vec.<span class="built_in">push_back</span>(str1);  <span class="comment">//2. CMyString(const CMyString &amp;str)</span></span><br><span class="line"></span><br><span class="line">	vec.<span class="built_in">push_back</span>(<span class="built_in">CMyString</span>(<span class="string">&quot;bbb&quot;</span>));</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		3.CMyString(const char*) 构建临时对象</span></span><br><span class="line"><span class="comment">		4.CMyString(CMyString &amp;&amp;str) 临时对象移入容器</span></span><br><span class="line"><span class="comment">		5.~CMyString 临时对象</span></span><br><span class="line"><span class="comment">		6.~CMyString vec第二个数</span></span><br><span class="line"><span class="comment">		7.~CMyString vec第一个数</span></span><br><span class="line"><span class="comment">		8.~CMyString str1</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 构造 - 创建新对象</span></span><br><span class="line"><span class="function">Example <span class="title">obj1</span><span class="params">(<span class="number">10</span>)</span></span>;           <span class="comment">// 普通构造</span></span><br><span class="line"><span class="function">Example <span class="title">obj2</span><span class="params">(obj1)</span></span>;         <span class="comment">// 拷贝构造</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 赋值 - 已存在对象的值替换</span></span><br><span class="line"><span class="function">Example <span class="title">obj3</span><span class="params">(<span class="number">20</span>)</span></span>;</span><br><span class="line">obj3 = obj1;                <span class="comment">// 赋值操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. Placement new - 在指定内存构造</span></span><br><span class="line"><span class="type">void</span>* memory = <span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(Example));</span><br><span class="line">Example* obj4 = <span class="built_in">new</span> (memory) <span class="built_in">Example</span>(obj1);  <span class="comment">// placement new 构造</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Allocator</span> </span><br><span class="line">&#123;</span><br><span class="line">	<span class="function">T* <span class="title">allocate</span><span class="params">(<span class="type">size_t</span> size)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (T*)std::<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(T) * size);</span><br><span class="line">	&#125;; <span class="comment">// 负责开辟空间</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">deallocate</span><span class="params">(<span class="type">void</span> *p)</span> </span>&#123;</span><br><span class="line">		std::<span class="built_in">free</span>(p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">construct</span><span class="params">(T* p, <span class="type">const</span> T &amp; val)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> (p) <span class="built_in">T</span>(val); <span class="comment">// 在指定的内存构造对象</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">destroy</span><span class="params">(T* p)</span> </span>&#123;</span><br><span class="line">		p-&gt;~<span class="built_in">T</span>(); <span class="comment">// 析构</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="std-move和std-forword"><a href="#std-move和std-forword" class="headerlink" title="std::move和std::forword"></a>std::move和std::forword</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CMyString</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> <span class="type">char</span>* str = <span class="literal">nullptr</span>) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const char*)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (str != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str) + <span class="number">1</span>];</span><br><span class="line">			std::<span class="built_in">strcpy</span>(mptr, str);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			mptr = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">1</span>];</span><br><span class="line">			*mptr = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CMyString</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;~CMyString&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (mptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] mptr;</span><br><span class="line">			mptr = <span class="literal">NULL</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(const CMyString &amp;str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="type">char</span>* temp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(temp, str.mptr);</span><br><span class="line">		mptr = temp;</span><br><span class="line">		temp = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">CMyString</span>(CMyString&amp;&amp; str) &#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;CMyString(CMyString &amp;&amp;str) &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (<span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(const CMyString&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">char</span>* tmp = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(str.mptr) + <span class="number">1</span>];</span><br><span class="line">		std::<span class="built_in">strcpy</span>(tmp, str.mptr);</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = tmp;</span><br><span class="line">		tmp = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	CMyString&amp; <span class="keyword">operator</span>= (CMyString&amp;&amp; str) &#123; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;operator=(CMyString&amp;&amp; str)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;str) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">delete</span>[] mptr;</span><br><span class="line">		mptr = str.mptr;</span><br><span class="line">		str.mptr = <span class="literal">nullptr</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">const</span> <span class="type">char</span>* <span class="title">c_str</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> mptr; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">char</span>* mptr;</span><br><span class="line">	<span class="keyword">friend</span> CMyString <span class="keyword">operator</span>+(<span class="type">const</span> CMyString&amp; lhs, <span class="type">const</span> CMyString&amp; rhs);</span><br><span class="line">	<span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream&amp; os, <span class="type">const</span> CMyString&amp; str);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">CMyString <span class="keyword">operator</span>+(<span class="type">const</span> CMyString&amp; lhs, <span class="type">const</span> CMyString&amp; rhs) &#123;</span><br><span class="line">	CMyString tempStr;</span><br><span class="line">	tempStr.mptr = <span class="keyword">new</span> <span class="type">char</span>[std::<span class="built_in">strlen</span>(lhs.mptr) +std::<span class="built_in">strlen</span>(rhs.mptr) + <span class="number">1</span> ];</span><br><span class="line">	std::<span class="built_in">strcpy</span>(tempStr.mptr, lhs.mptr);</span><br><span class="line">	std::<span class="built_in">strcat</span>(tempStr.mptr, rhs.mptr);</span><br><span class="line">	<span class="keyword">return</span> tempStr; <span class="comment">// 调用拷贝构造str3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream&amp; <span class="keyword">operator</span>&lt;&lt; (std::ostream &amp;os, <span class="type">const</span> CMyString&amp; str) &#123;</span><br><span class="line">	os &lt;&lt; str.mptr;</span><br><span class="line">	<span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">CMyString <span class="title">getString</span><span class="params">(CMyString&amp; str)</span> </span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">char</span>* pstr = str.<span class="built_in">c_str</span>();</span><br><span class="line">	<span class="function">CMyString <span class="title">tmpStr</span><span class="params">(pstr)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> tmpStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Allocator</span> </span><br><span class="line">&#123;</span><br><span class="line">	<span class="function">T* <span class="title">allocate</span><span class="params">(<span class="type">size_t</span> size)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (T*)std::<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(T) * size);</span><br><span class="line">	&#125;; <span class="comment">// 负责开辟空间</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">deallocate</span><span class="params">(<span class="type">void</span> *p)</span> </span>&#123;</span><br><span class="line">		std::<span class="built_in">free</span>(p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	void construct(T* p, const T &amp; val) &#123;</span></span><br><span class="line"><span class="comment">		new (p) T(val);// 指定内存内构造对象</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	void construct(T* p,T&amp;&amp; val) &#123;</span></span><br><span class="line"><span class="comment">		new (p) T(std::move(val));// 指定内存内构造对象</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">template</span>&lt;<span class="keyword">typename</span> Ty&gt; <span class="comment">// 一个函数模板解决左值和右值</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">construct</span><span class="params">(T* p, Ty&amp;&amp; val)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span>(p) <span class="built_in">T</span>(std::forward&lt;Ty&gt;(val));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">destroy</span><span class="params">(T* p)</span> </span>&#123;</span><br><span class="line">		p-&gt;~<span class="built_in">T</span>(); <span class="comment">// 析构</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> Alloc = Allocator&lt;T&gt;&gt;</span><br><span class="line"><span class="keyword">class</span> vector &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">vector</span>(<span class="type">int</span> size = <span class="number">10</span>) &#123;</span><br><span class="line">		_first = _allocator.<span class="built_in">allocate</span>(size); <span class="comment">// 首地址；</span></span><br><span class="line">		_last = _first; <span class="comment">// </span></span><br><span class="line">		_end = _first + size; <span class="comment">// 最后的地址</span></span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">vector</span>() &#123;</span><br><span class="line">		<span class="keyword">for</span> (T* p = _first; p != _last; ++p ) &#123;</span><br><span class="line">			_allocator.<span class="built_in">destory</span>(p);</span><br><span class="line">		&#125;</span><br><span class="line">		_allocator.<span class="built_in">destroy</span>(_first);</span><br><span class="line">		_first = _last = _end = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">vector</span>(<span class="type">const</span> vector&lt;T&gt; &amp;rhs) &#123;</span><br><span class="line">		<span class="type">int</span> size = rhs._end - rhs._first;</span><br><span class="line">		_first = _allocator.<span class="built_in">allocate</span>(size);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rhs._last - rhs._first; i++) &#123;</span><br><span class="line">			_allocator.<span class="built_in">construct</span>(_first + i, rhs._first[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		_last = _first + len;</span><br><span class="line">		_end = _first + size;</span><br><span class="line">	&#125;</span><br><span class="line">	vector&lt;T&gt;&amp; <span class="keyword">operator</span>= (<span class="type">const</span> vector&lt;T&gt; &amp;rhs) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;rhs) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (T* p = _first; p != _last; ++p) &#123;</span><br><span class="line">			_allocator.<span class="built_in">destory</span>(p);</span><br><span class="line">		&#125;</span><br><span class="line">		_allocator.<span class="built_in">deallocate</span>(_first);</span><br><span class="line">		_first = _allocator.<span class="built_in">allocate</span>(rhs._end - rhs._first);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rhs._last - rhs._first; i ++) &#123;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T* _first; <span class="comment">// 数组起始位置</span></span><br><span class="line">	T* _last; <span class="comment">// 指向数组元素中有效元素的后继位置。</span></span><br><span class="line">	T* _end; <span class="comment">// 指向数组空间的后继位置</span></span><br><span class="line">	Alloc _allocator;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">expand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="type">int</span> size = _end - _first;</span><br><span class="line">		T* ptmp = _allocator.<span class="built_in">allocate</span>(<span class="number">2</span> * size);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			_allocator.<span class="built_in">construct</span>(ptmp +i, _first[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (T* p = _first; p != _last; ++p) &#123;</span><br><span class="line">			_allocator.<span class="built_in">destory</span>(p);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// std:move(左值);移动语义，强转为右值引用类型</span></span><br><span class="line"><span class="comment">// 引用折叠&amp;&amp; + &amp;&amp; = &amp;&amp;； &amp; + &amp;&amp; = &amp;</span></span><br><span class="line"><span class="comment">// std::forword(值); 类型的完美转发,依据传入的值判断是左值还是右值</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	CMyString str1 = <span class="string">&quot;aaa&quot;</span>;<span class="comment">// 1. CMyString(const char*)</span></span><br><span class="line">	<span class="comment">//std::vector&lt;CMyString&gt; vec;</span></span><br><span class="line">	<span class="comment">//vec.reserve(10); // 预留10个空间，防止扩容</span></span><br><span class="line">	<span class="comment">//vec.push_back(str1);  //2. CMyString(const CMyString &amp;str)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//vec.push_back(CMyString(&quot;bbb&quot;));</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="简单的智能指针"><a href="#简单的智能指针" class="headerlink" title="简单的智能指针"></a>简单的智能指针</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartPtr</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">SmartPtr</span>(T* ptr = <span class="literal">nullptr</span>)</span><br><span class="line">	:<span class="built_in">mptr</span>(ptr)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">SmartPtr</span>() &#123; </span><br><span class="line">		<span class="keyword">delete</span> mptr; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;清除指针管理的资源&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getVal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (*mptr);</span><br><span class="line">	&#125;</span><br><span class="line">	T&amp; <span class="keyword">operator</span>* () &#123;</span><br><span class="line">		<span class="keyword">return</span> *mptr;</span><br><span class="line">	&#125;</span><br><span class="line">	T* <span class="keyword">operator</span>-&gt;() &#123;</span><br><span class="line">		<span class="keyword">return</span> mptr;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T* mptr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// data段  stack栈	heap堆</span></span><br><span class="line">	<span class="type">int</span>* p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>); <span class="comment">// 裸指针</span></span><br><span class="line">	*p = <span class="number">30</span>;</span><br><span class="line">	<span class="keyword">delete</span> p;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//智能指针可以保证资源的智能释放</span></span><br><span class="line">	<span class="comment">//利用栈上的对象出作用域自动析构,来达到释放资源的目的，智能指针不能直接定义在堆上</span></span><br><span class="line">	<span class="function">SmartPtr&lt;<span class="type">int</span>&gt; <span class="title">sptr</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">	*sptr = <span class="number">20</span>;</span><br><span class="line">	std::cout &lt;&lt;sptr.<span class="built_in">getVal</span>()  &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;call Test::Test&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function">SmartPtr&lt;Test&gt; <span class="title">tsptr</span><span class="params">(<span class="keyword">new</span> Test)</span></span>;</span><br><span class="line">	(*tsptr).<span class="built_in">test</span>();</span><br><span class="line">	tsptr-&gt;<span class="built_in">test</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="不带引用计数的引用指针"><a href="#不带引用计数的引用指针" class="headerlink" title="不带引用计数的引用指针"></a>不带引用计数的引用指针</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartPtr</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">SmartPtr</span>(T* ptr = <span class="literal">nullptr</span>)</span><br><span class="line">	:<span class="built_in">mptr</span>(ptr)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">SmartPtr</span>() &#123; </span><br><span class="line">		<span class="keyword">delete</span> mptr; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;清除指针管理的资源&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getVal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (*mptr);</span><br><span class="line">	&#125;</span><br><span class="line">	T&amp; <span class="keyword">operator</span>* () &#123;</span><br><span class="line">		<span class="keyword">return</span> *mptr;</span><br><span class="line">	&#125;</span><br><span class="line">	T* <span class="keyword">operator</span>-&gt;() &#123;</span><br><span class="line">		<span class="keyword">return</span> mptr;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T* mptr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">SmartPtr&lt;<span class="type">int</span>&gt; <span class="title">sptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">	<span class="function">SmartPtr&lt;<span class="type">int</span>&gt; <span class="title">sptr2</span><span class="params">(sptr1)</span></span>; <span class="comment">// 浅拷贝导致的问题</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartPtr</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">SmartPtr</span>(T* ptr = <span class="literal">nullptr</span>)</span><br><span class="line">	:<span class="built_in">mptr</span>(ptr)&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">SmartPtr</span>(<span class="type">const</span> SmartPtr&amp; sptr) &#123; <span class="comment">// 使用深拷贝</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;mptr = <span class="keyword">new</span> <span class="built_in">T</span>(*(sptr.mptr));</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">SmartPtr</span>() &#123; </span><br><span class="line">		<span class="keyword">delete</span> mptr; </span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;清除指针管理的资源&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getVal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (*mptr);</span><br><span class="line">	&#125;</span><br><span class="line">	T&amp; <span class="keyword">operator</span>* () &#123;</span><br><span class="line">		<span class="keyword">return</span> *mptr;</span><br><span class="line">	&#125;</span><br><span class="line">	T* <span class="keyword">operator</span>-&gt;() &#123;</span><br><span class="line">		<span class="keyword">return</span> mptr;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T* mptr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">SmartPtr&lt;<span class="type">int</span>&gt; <span class="title">sptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">	<span class="function">SmartPtr&lt;<span class="type">int</span>&gt; <span class="title">sptr2</span><span class="params">(sptr1)</span></span>; </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="auto-ptr"><a href="#auto-ptr" class="headerlink" title="auto_ptr"></a>auto_ptr</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	auto_ptr: c++库里面(C++17废弃)</span></span><br><span class="line"><span class="comment">	c++11标准:</span></span><br><span class="line"><span class="comment">	scoped_ptr;</span></span><br><span class="line"><span class="comment">	unique_ptr;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">aptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>)</span></span>;</span><br><span class="line">	<span class="function">std::auto_ptr&lt;<span class="type">int</span>&gt; <span class="title">aptr2</span><span class="params">(aptr1)</span></span>;</span><br><span class="line">	*aptr2 = <span class="number">14</span>;</span><br><span class="line">	std::cout &lt;&lt; *aptr1 &lt;&lt; std::endl; <span class="comment">// 报错,auto_ptr移除了aptr1的指针</span></span><br><span class="line">	<span class="comment">// 不推荐使用auto_Ptr</span></span><br><span class="line">    <span class="comment">// 不推荐在容器中使用auto_ptr；</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="scoped-ptr"><a href="#scoped-ptr" class="headerlink" title="scoped_ptr"></a>scoped_ptr</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		scoped_ptr:暴力删除了拷贝构造和赋值构造,只能使用默认构造，不建议使用</span></span><br><span class="line"><span class="comment">			scoped_ptr(const scoped_ptr&lt;T&gt;&amp;) = delete;</span></span><br><span class="line"><span class="comment">			scoped_ptr&lt;T&gt;&amp; operator=(const scoped_ptr&lt;T&gt;&amp;);</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="unique-ptr"><a href="#unique-ptr" class="headerlink" title="unique_ptr"></a>unique_ptr</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// unique指针实现的是资源的转移</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	unique_ptr:</span></span><br><span class="line"><span class="comment">		unique_ptr(const unique_ptr&lt;T&gt;&amp;) = delete;</span></span><br><span class="line"><span class="comment">		unique_ptr&lt;T&gt;&amp; operator=(const unique_ptr&lt;T&gt;&amp;) = delete;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		但提供了:</span></span><br><span class="line"><span class="comment">		unique_ptr(const unique_ptr&lt;T&gt;&amp;&amp; src)；</span></span><br><span class="line"><span class="comment">		unique_ptr&lt;T&gt;&amp; operator=(const unique_ptr&lt;T&gt;&amp;&amp; src);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		template&lt;typename T&gt;</span></span><br><span class="line"><span class="comment">		unique_ptr&lt;T&gt; getSmart()&#123;</span></span><br><span class="line"><span class="comment">			unique_ptr&lt;T&gt; ptr(new T());</span></span><br><span class="line"><span class="comment">			return ptr;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		unique_ptr&lt;int&gt; ptr = getSmart&lt;int&gt;();</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>)</span></span>;</span><br><span class="line">	*p1 = <span class="number">10</span>;</span><br><span class="line">	<span class="comment">// std::unique_ptr&lt;int&gt; p2(p1); 尝试引用已经删除的函数</span></span><br><span class="line">	<span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p2</span><span class="params">(std::move(p1))</span></span>; <span class="comment">// std::move得到当前变量的右值类型</span></span><br><span class="line">	<span class="function">std::unique_ptr&lt;<span class="type">int</span>&gt; <span class="title">p3</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>)</span></span>;</span><br><span class="line">	<span class="comment">//p3 = p2;</span></span><br><span class="line">	p3 = std::<span class="built_in">move</span>(p2);</span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; *p1&lt;&lt; std::endl; 报错,资源已经被转移了。</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; *p2 &lt;&lt; std::endl;报错,资源已经被转移了</span></span><br><span class="line">	std::cout &lt;&lt; *p3 &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">永远不要将栈上对象的地址传给unique_ptr！ unique_ptr只能管理通过new分配的堆内存（或malloc等其他动态分配方式）</span><br></pre></td></tr></table></figure>

<h5 id="shared-ptr"><a href="#shared-ptr" class="headerlink" title="shared_ptr"></a>shared_ptr</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对资源进行引用计数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RefCnt</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">RefCnt</span>(T* ptr = <span class="literal">nullptr</span>):<span class="built_in">mptr</span>(ptr) &#123;</span><br><span class="line">		<span class="keyword">if</span> (mptr != <span class="literal">nullptr</span>) &#123;	</span><br><span class="line">			mcount = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">addRef</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		mcount++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">deleRef</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> --mcount;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:	</span><br><span class="line">	T* mptr;</span><br><span class="line">	<span class="type">int</span> mcount;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartPtr</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">SmartPtr</span>(T* ptr = <span class="literal">nullptr</span>)</span><br><span class="line">		:<span class="built_in">mptr</span>(ptr) &#123;</span><br><span class="line">		mpRefCnt = <span class="keyword">new</span> <span class="built_in">RefCnt</span>&lt;T&gt;(mptr);</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;默认创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">SmartPtr</span>(<span class="type">const</span> SmartPtr&lt;T&gt;&amp; sptr)</span><br><span class="line">	:<span class="built_in">mptr</span>(sptr.mptr),<span class="built_in">mpRefCnt</span>(sptr.mpRefCnt)&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;mptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;mpRefCnt-&gt;<span class="built_in">addRef</span>();</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;拷贝创建&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	SmartPtr&lt;T&gt;&amp; <span class="keyword">operator</span>= (<span class="type">const</span> SmartPtr&lt;T&gt;&amp; sptr) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;sptr) &#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;mpRefCnt-&gt;<span class="built_in">deleRef</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span> mptr;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">this</span>-&gt;mptr = sptr.mptr;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mpRefCnt = sptr.mpRefCnt;</span><br><span class="line">		mpRefCnt-&gt;<span class="built_in">addRef</span>();</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;重新赋值&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">SmartPtr</span>() &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="number">0</span> == mpRefCnt-&gt;<span class="built_in">deleRef</span>()) &#123;</span><br><span class="line">			<span class="keyword">delete</span> mptr;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;清除指针资源&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getVal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (*mptr);</span><br><span class="line">	&#125;</span><br><span class="line">	T&amp; <span class="keyword">operator</span>* () &#123;</span><br><span class="line">		<span class="keyword">return</span> *mptr;</span><br><span class="line">	&#125;</span><br><span class="line">	T* <span class="keyword">operator</span>-&gt;() &#123;</span><br><span class="line">		<span class="keyword">return</span> mptr;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T* mptr; <span class="comment">// 指向资源</span></span><br><span class="line">	RefCnt&lt;T&gt;* mpRefCnt; <span class="comment">// 指向该资源引用对象的指针</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		带引用计数的智能指针shared_ptr和weak_ptr</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		带引用计数:多个智能指针可以管理同一个资源</span></span><br><span class="line"><span class="comment">		带引用计数:给每一个对象资源，匹配一个引用计数</span></span><br><span class="line"><span class="comment">		智能指针使用资源，引用计数+1;</span></span><br><span class="line"><span class="comment">		智能指针不使用资源,引用计数-1,直到0,0释放。</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function">SmartPtr&lt;<span class="type">int</span>&gt; <span class="title">sptr1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>)</span></span>;</span><br><span class="line">	<span class="function">SmartPtr&lt;<span class="type">int</span>&gt; <span class="title">sptr2</span><span class="params">(sptr1)</span></span>;</span><br><span class="line">	SmartPtr&lt;<span class="type">int</span>&gt; sptr3;</span><br><span class="line">	sptr3 = sptr2;</span><br><span class="line">	*sptr1 = <span class="number">10</span>;</span><br><span class="line">	std::cout &lt;&lt; *sptr1 &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; *sptr2 &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; *sptr3 &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">shared_ptr weak_ptr都是线程安全的，可以直接使用在多线程</span></span><br><span class="line"><span class="comment">int mcount;为atomaic_int CAS</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="weak-ptr"><a href="#weak-ptr" class="headerlink" title="weak_ptr"></a>weak_ptr</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	std::shared_ptr&lt;B&gt; _ptrb;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">B</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;B()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">B</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;B()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	std::shared_ptr&lt;A&gt; _ptra;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	shared_ptr: 强智能指针,会改变资源的引用计数</span></span><br><span class="line"><span class="comment">	weak_ptr: 弱智能指针,不会改变资源的引用计数</span></span><br><span class="line"><span class="comment">	weak_ptr观察shared_ptr观察资源(内存);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	强智能指针的循环引用(交叉引用)问题:</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function">std::shared_ptr&lt;A&gt; <span class="title">pa</span><span class="params">(<span class="keyword">new</span> A())</span></span>;</span><br><span class="line">	<span class="function">std::shared_ptr&lt;B&gt; <span class="title">pb</span><span class="params">(<span class="keyword">new</span> B())</span></span>;</span><br><span class="line">	pa-&gt;_ptrb = pb;</span><br><span class="line">	pb-&gt;_ptra = pa;</span><br><span class="line">	std::cout &lt;&lt; pa.<span class="built_in">use_count</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; pb.<span class="built_in">use_count</span>() &lt;&lt; std::endl;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A()</span></span><br><span class="line"><span class="comment">B()</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> <span class="comment">//无法析构</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">testA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;非常好用的方法&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	std::weak_ptr&lt;B&gt; _ptrb;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">B</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;B()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">B</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~B()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	std::weak_ptr&lt;A&gt; _ptra;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//_ptra-&gt;testA(); 无效,弱智能指针只是观察者，无法使用资源(访问资源)</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	定义对象的时候使用强智能指针，引用对象的时候使用弱智能指针</span></span><br><span class="line"><span class="comment">	弱智能指针不会改变资源的引用计数</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function">std::shared_ptr&lt;A&gt; <span class="title">pa</span><span class="params">(<span class="keyword">new</span> A())</span></span>;</span><br><span class="line">	<span class="function">std::shared_ptr&lt;B&gt; <span class="title">pb</span><span class="params">(<span class="keyword">new</span> B())</span></span>;</span><br><span class="line">	pa-&gt;_ptrb = pb;</span><br><span class="line">	pb-&gt;_ptra = pa;</span><br><span class="line">	std::cout &lt;&lt; pa.<span class="built_in">use_count</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; pb.<span class="built_in">use_count</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A()</span></span><br><span class="line"><span class="comment">B()</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">~B()</span></span><br><span class="line"><span class="comment">~A()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">testA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;非常好用的方法&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	std::weak_ptr&lt;B&gt; _ptrb;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">B</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;B()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">B</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~B()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	std::weak_ptr&lt;A&gt; _ptra;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::shared_ptr&lt;A&gt;  ps = _ptra.<span class="built_in">lock</span>(); <span class="comment">// 提升方法</span></span><br><span class="line">		<span class="keyword">if</span> (ps != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			ps-&gt;<span class="built_in">testA</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">std::shared_ptr&lt;A&gt; <span class="title">pa</span><span class="params">(<span class="keyword">new</span> A())</span></span>;</span><br><span class="line">	<span class="function">std::shared_ptr&lt;B&gt; <span class="title">pb</span><span class="params">(<span class="keyword">new</span> B())</span></span>;</span><br><span class="line">	pa-&gt;_ptrb = pb;</span><br><span class="line">	pb-&gt;_ptra = pa;</span><br><span class="line">	pb-&gt;<span class="built_in">func</span>();</span><br><span class="line">	std::cout &lt;&lt; pa.<span class="built_in">use_count</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; pb.<span class="built_in">use_count</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="使用智能指针实现线程安全"><a href="#使用智能指针实现线程安全" class="headerlink" title="使用智能指针实现线程安全"></a>使用智能指针实现线程安全</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">testA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;非常好用的方法&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++非常著名的开源网络库--muduo库</span></span><br><span class="line"><span class="comment">多线程访问共享对象的线程安全问题</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 子线程</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">handler01</span><span class="params">(A *q)</span> </span>&#123;</span><br><span class="line">	q-&gt;<span class="built_in">testA</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main线程</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	A* p = <span class="keyword">new</span> <span class="built_in">A</span>();</span><br><span class="line">	<span class="function">std::thread <span class="title">t1</span><span class="params">(handler01, p)</span></span>;</span><br><span class="line">	std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">2</span>));<span class="comment">// 主线程等两秒</span></span><br><span class="line">	<span class="keyword">delete</span> p;</span><br><span class="line">	t<span class="number">1.</span><span class="built_in">join</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A()</span></span><br><span class="line"><span class="comment">非常好用的方法</span></span><br><span class="line"><span class="comment">~A() 等两秒后打印</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">testA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;非常好用的方法&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++非常著名的开源网络库--muduo库</span></span><br><span class="line"><span class="comment">多线程访问共享对象的线程安全问题</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 子线程</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">handler01</span><span class="params">(A *q)</span> </span>&#123;</span><br><span class="line">	std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">2</span>));<span class="comment">//子线程等两秒</span></span><br><span class="line">	q-&gt;<span class="built_in">testA</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main线程</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	A* p = <span class="keyword">new</span> <span class="built_in">A</span>();</span><br><span class="line">	<span class="function">std::thread <span class="title">t1</span><span class="params">(handler01, p)</span></span>;</span><br><span class="line">	<span class="keyword">delete</span> p;</span><br><span class="line">	t<span class="number">1.</span><span class="built_in">join</span>();<span class="comment">// 阻塞等待子线程结束</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A()</span></span><br><span class="line"><span class="comment">~A()</span></span><br><span class="line"><span class="comment">非常好用的方法  主线程把p都析构了，两秒后子线程访问资源，不合理</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">testA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;非常好用的方法&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++非常著名的开源网络库--muduo库</span></span><br><span class="line"><span class="comment">多线程访问共享对象的线程安全问题</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 子线程</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">handler01</span><span class="params">(std::weak_ptr&lt;A&gt; q)</span> </span>&#123;</span><br><span class="line">	std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">2</span>));<span class="comment">//子线程等两秒</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// q访问A对象时，需要侦测A对象是否存活</span></span><br><span class="line">	std::shared_ptr&lt;A&gt; sp = q.<span class="built_in">lock</span>();</span><br><span class="line">	<span class="keyword">if</span> (sp != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">		sp-&gt;<span class="built_in">testA</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;A对象已经析构&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main线程</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function">std::shared_ptr&lt;A&gt; <span class="title">p</span><span class="params">(<span class="keyword">new</span> A())</span></span>;</span><br><span class="line">		<span class="function">std::thread <span class="title">t1</span><span class="params">(handler01, std::weak_ptr&lt;A&gt;(p))</span></span>; <span class="comment">// 智能指针出作用域自动析构</span></span><br><span class="line">		t<span class="number">1.</span><span class="built_in">detach</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//阻塞等待子线程结束</span></span><br><span class="line">	<span class="comment">//t1.join();</span></span><br><span class="line"></span><br><span class="line">	std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">9</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A()</span></span><br><span class="line"><span class="comment">~A()</span></span><br><span class="line"><span class="comment">A对象已经析构</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">子线程启动等待2S调用资源，此时主线程作用域结束资源被析构了，</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">A</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~A()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">testA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;非常好用的方法&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++非常著名的开源网络库--muduo库</span></span><br><span class="line"><span class="comment">多线程访问共享对象的线程安全问题</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 子线程</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">handler01</span><span class="params">(std::weak_ptr&lt;A&gt; q)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// q访问A对象时，需要侦测A对象是否存活</span></span><br><span class="line">	std::shared_ptr&lt;A&gt; sp = q.<span class="built_in">lock</span>();</span><br><span class="line">	<span class="keyword">if</span> (sp != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">		sp-&gt;<span class="built_in">testA</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;A对象已经析构&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main线程</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function">std::shared_ptr&lt;A&gt; <span class="title">p</span><span class="params">(<span class="keyword">new</span> A())</span></span>;</span><br><span class="line">		<span class="function">std::thread <span class="title">t1</span><span class="params">(handler01, std::weak_ptr&lt;A&gt;(p))</span></span>; <span class="comment">// 智能指针出作用域自动析构</span></span><br><span class="line">		t<span class="number">1.</span><span class="built_in">detach</span>();</span><br><span class="line">		std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">2</span>));<span class="comment">// 等两秒销毁就可以提前访问到了</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//阻塞等待子线程结束</span></span><br><span class="line">	<span class="comment">//t1.join();</span></span><br><span class="line"></span><br><span class="line">	std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">9</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A()</span></span><br><span class="line"><span class="comment">非常好用的方法</span></span><br><span class="line"><span class="comment">~A()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="智能指针的删除器"><a href="#智能指针的删除器" class="headerlink" title="智能指针的删除器"></a>智能指针的删除器</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">智能指针的删除器: deletor</span></span><br><span class="line"><span class="comment">智能指针:能够保证资源的绝对释放,delete ptr</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">~unique_ptr()本质是一个函数的调用 deletor(ptr);</span></span><br><span class="line"><span class="comment">template&lt;typename T&gt;</span></span><br><span class="line"><span class="comment">class Deletor</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">public:</span></span><br><span class="line"><span class="comment">	void operator() (T* ptr)&#123;delete ptr;&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyIntDeletor</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(T* ptr)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;调用了自定义的删除&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">delete</span>[] ptr;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyFileDeletor</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(T* ptr)</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;调用了自定义文件关闭&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::<span class="built_in">fclose</span>(ptr);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::unique_ptr&lt;<span class="type">int</span>[], MyIntDeletor&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">ptr1</span>(<span class="keyword">new</span> <span class="type">int</span>[<span class="number">100</span>]);</span><br><span class="line"></span><br><span class="line">	std::unique_ptr&lt;FILE, MyFileDeletor&lt;FILE&gt;&gt; <span class="built_in">ptr2</span>(std::<span class="built_in">fopen</span>(<span class="string">&quot;data.txt&quot;</span>, <span class="string">&quot;w&quot;</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// lamba表达式本身就是函数对象  function,不用定义繁多类型</span></span><br><span class="line">	std::unique_ptr&lt;<span class="type">int</span>, std::function&lt;<span class="type">void</span>(<span class="type">int</span>*)&gt;&gt; <span class="built_in">ptr1</span>(<span class="keyword">new</span> <span class="type">int</span>[<span class="number">100</span>],</span><br><span class="line">		[](<span class="type">int</span>* p)-&gt;<span class="type">void</span> &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] p;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;call lamba release int[]&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;);</span><br><span class="line">	std::unique_ptr&lt;FILE, std::function&lt;<span class="type">void</span>(FILE*)&gt;&gt; <span class="built_in">ptr2</span>(std::<span class="built_in">fopen</span>(<span class="string">&quot;data.txt&quot;</span>,<span class="string">&quot;w&quot;</span>),</span><br><span class="line">		[](FILE* p)-&gt;<span class="type">void</span> &#123;</span><br><span class="line">			std::<span class="built_in">fclose</span>(p);</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;call lamba close FILE&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="绑定器和函数对象"><a href="#绑定器和函数对象" class="headerlink" title="绑定器和函数对象"></a>绑定器和函数对象</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数对象operator()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c++ STL绑定器:</span><br><span class="line">bind1st: operator()的第一个形参变量绑定成一个确定的值</span><br><span class="line">bind2st: operator()的第二个形参变量绑定成一个确定的值</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c++11 从Boost库中引入了bind绑定器和function函数机制</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lambda表达式:底层依赖函数对象的机制实现</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyGreater</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> val1, <span class="type">int</span> val2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val1 &gt; val2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FindST</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	 <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">		 <span class="keyword">if</span> (val &gt; <span class="number">70</span>) &#123;</span><br><span class="line">			 <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		 &#125;</span><br><span class="line">		 <span class="keyword">else</span></span><br><span class="line">		 &#123;</span><br><span class="line">			 <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		 &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showContanier</span><span class="params">(T&amp; container)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">typename</span> T::iterator it = container.<span class="built_in">begin</span>(); it != container.<span class="built_in">end</span>(); ++it ) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it&lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line">	std::<span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="literal">nullptr</span>));</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">		vec.<span class="built_in">push_back</span>(std::<span class="built_in">rand</span>()%<span class="number">100</span> + <span class="number">1</span>); <span class="comment">// 1-100的随机数</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">showContanier</span>(vec);</span><br><span class="line">	std::<span class="built_in">sort</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());<span class="comment">// 默认从小到大</span></span><br><span class="line">	<span class="built_in">showContanier</span>(vec);</span><br><span class="line">	<span class="comment">// std::sort(vec.begin(), vec.end(), std::greater&lt;int&gt;()); 自带的排序算法</span></span><br><span class="line">	<span class="comment">// std::sort(vec.begin(), vec.end(), MyGreater()); </span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	把70顺序插入vec容器中,找到第一个大于70的数</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">auto</span> it1 = std::<span class="built_in">find_if</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), <span class="built_in">FindST</span>());</span><br><span class="line">	vec.<span class="built_in">insert</span>(it1,<span class="number">70</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">showContanier</span>(vec);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyGreater</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> val1, <span class="type">int</span> val2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val1 &gt; val2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showContanier</span><span class="params">(T&amp; container)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">typename</span> T::iterator it = container.<span class="built_in">begin</span>(); it != container.<span class="built_in">end</span>(); ++it ) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it&lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line">	std::<span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="literal">nullptr</span>));</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">		vec.<span class="built_in">push_back</span>(std::<span class="built_in">rand</span>()%<span class="number">100</span> + <span class="number">1</span>); <span class="comment">// 1-100的随机数</span></span><br><span class="line">	&#125;</span><br><span class="line">	std::<span class="built_in">sort</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());<span class="comment">// 默认从小到大</span></span><br><span class="line">	<span class="built_in">showContanier</span>(vec);</span><br><span class="line">	 std::<span class="built_in">sort</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), std::<span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;()); </span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	把70顺序插入vec容器中,找到第一个小于70的数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	greater a&gt;b</span></span><br><span class="line"><span class="comment">	less a&lt;b</span></span><br><span class="line"><span class="comment">	绑定器可以将二元函数对象转为一元函数对象</span></span><br><span class="line"><span class="comment">	bind1st:	+greater bool operator() (70, const_Ty &amp; Right);</span></span><br><span class="line"><span class="comment">	bind2nd:	+less bool operator() (const_Ty &amp; Right, 70);</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//auto it1 = std::find_if(vec.begin(), vec.end(),std::bind1st(std::greater&lt;int&gt;(), 70));</span></span><br><span class="line">	<span class="keyword">auto</span> it1 = std::<span class="built_in">find_if</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), std::<span class="built_in">bind2nd</span>(std::<span class="built_in">less</span>&lt;<span class="type">int</span>&gt;(), <span class="number">70</span>));</span><br><span class="line">	<span class="keyword">if</span> (it1 != vec.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		vec.<span class="built_in">insert</span>(it1, <span class="number">70</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;未找到!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">showContanier</span>(vec);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="C-11STL中的bind1st和bind2nd"><a href="#C-11STL中的bind1st和bind2nd" class="headerlink" title="C++11STL中的bind1st和bind2nd"></a>C++11STL中的bind1st和bind2nd</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyGreater</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> val1, <span class="type">int</span> val2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val1 &gt; val2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showContanier</span><span class="params">(T&amp; container)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">typename</span> T::iterator it = container.<span class="built_in">begin</span>(); it != container.<span class="built_in">end</span>(); ++it ) &#123;</span><br><span class="line">		std::cout &lt;&lt; *it&lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator, <span class="keyword">typename</span> Compare&gt;</span><br><span class="line"><span class="function">Iterator <span class="title">my_find_if</span><span class="params">(Iterator first, Iterator last, Compare comp)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (;first != last;first++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">comp</span>(*first)) &#123;  <span class="comment">// comp.operator() (*first)</span></span><br><span class="line">			<span class="keyword">return</span> first;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> last;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Compare, <span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">_mybind1st</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	_mybind1st(Compare comp,T val)</span><br><span class="line">		:_comp(comp),_val(val) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> T &amp;second)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _comp(_val, second);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Compare _comp;</span><br><span class="line">	T _val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Compare, <span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">_mybind2nd</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	_mybind2nd(Compare comp, T val)</span><br><span class="line">	:_comp(comp), _val(val)&#123;&#125;</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">const</span> T&amp; second)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _comp(second, _val);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Compare _comp;</span><br><span class="line">	T _val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Compare, <span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">_mybind1st&lt;Compare, T&gt;  <span class="title">mybind1st</span><span class="params">(Compare comp, <span class="type">const</span> T&amp; val)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 直接使用函数模板，可以进行类型推演</span></span><br><span class="line">	<span class="keyword">return</span> _mybind1st&lt;Compare, T&gt;(comp, val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Compare, <span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">_mybind2nd&lt;Compare, T&gt;  <span class="title">mybind2nd</span><span class="params">(Compare comp, <span class="type">const</span> T&amp; val)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 直接使用函数模板，可以进行类型推演</span></span><br><span class="line">	<span class="keyword">return</span> _mybind2nd&lt;Compare, T&gt;(comp, val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line">	std::<span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="literal">nullptr</span>));</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">		vec.<span class="built_in">push_back</span>(std::<span class="built_in">rand</span>()%<span class="number">100</span> + <span class="number">1</span>); <span class="comment">// 1-100的随机数</span></span><br><span class="line">	&#125;</span><br><span class="line">	std::<span class="built_in">sort</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());<span class="comment">// 默认从小到大</span></span><br><span class="line">	<span class="keyword">auto</span> it1 = <span class="built_in">my_find_if</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(),<span class="built_in">mybind2nd</span>(std::<span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;(),<span class="number">70</span>));</span><br><span class="line">	<span class="keyword">if</span> (it1 != vec.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		vec.<span class="built_in">insert</span>(it1, <span class="number">70</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;未找到!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="built_in">showContanier</span>(vec);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="function"><a href="#function" class="headerlink" title="function"></a>function</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span> <span class="comment">// 使用function函数对象</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">hello1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;hello1&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">hello2</span><span class="params">(<span class="type">const</span> std::string&amp; str)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; str &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> val1, <span class="type">int</span> val2)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; val1 + val2 &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> val1 + val2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">doubleVal</span><span class="params">(<span class="type">int</span> a)</span></span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="number">2</span> * a &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">2</span> * a;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	C++11提供的绑定器和函数对象</span></span><br><span class="line"><span class="comment">		 bind function</span></span><br><span class="line"><span class="comment">		 c++ STL bind1st和bind2nd本身还是一个函数对象</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		 function: 绑定器,函数对象,lambda表达式,它们只能在一条语句中使用</span></span><br><span class="line"><span class="comment">		 函数对象的本质是operator()</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//从function的类模板定义处,希望使用一个函数类型实例化模板</span></span><br><span class="line">	std::function&lt;<span class="type">void</span>()&gt; func1= hello1;</span><br><span class="line">	<span class="built_in">func1</span>(); <span class="comment">// func1.operator()() =&gt; hello1()</span></span><br><span class="line"></span><br><span class="line">	std::function&lt;<span class="type">int</span>(std::string)&gt; func2 = hello2;</span><br><span class="line">	<span class="built_in">func2</span>(<span class="string">&quot;hello2&quot;</span>);<span class="comment">// func2.operator()() =&gt; hello2(str)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	std::function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; func3 = sum;</span><br><span class="line">	<span class="built_in">func3</span>(<span class="number">1</span>,<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">	std::function&lt;<span class="type">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; func4 = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span> &#123;<span class="keyword">return</span> a - b; &#125;;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">func4</span>(<span class="number">12</span>,<span class="number">8</span>) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	std::function&lt;<span class="type">int</span>(Test*,<span class="type">int</span>)&gt; func5 = &amp;Test::doubleVal; <span class="comment">// 成员函数必须使用&amp;</span></span><br><span class="line">	Test test;</span><br><span class="line">	<span class="built_in">func5</span>(&amp;test, <span class="number">12</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span> <span class="comment">// 使用function函数对象</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doShowAllBooks</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;查看所有书籍&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doBorrow</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;借书&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doBack</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;还书&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doFind</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;查找&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doLoginOut</span><span class="params">()</span> </span>&#123; std::cout &lt;&lt; <span class="string">&quot;注销&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> choice = <span class="number">0</span>;</span><br><span class="line">	std::map&lt;<span class="type">int</span>, std::function&lt;<span class="type">void</span>()&gt;&gt; actionMap;</span><br><span class="line">	actionMap.<span class="built_in">insert</span>(&#123; <span class="number">1</span>,doShowAllBooks&#125;);</span><br><span class="line">	actionMap.<span class="built_in">insert</span>(&#123; <span class="number">2</span>,doBorrow &#125;);</span><br><span class="line">	actionMap.<span class="built_in">insert</span>(&#123; <span class="number">3</span>,doBack &#125;);</span><br><span class="line">	actionMap.<span class="built_in">insert</span>(&#123; <span class="number">4</span>,doFind &#125;);</span><br><span class="line">	actionMap.<span class="built_in">insert</span>(&#123; <span class="number">5</span>,doLoginOut &#125;);</span><br><span class="line">	<span class="keyword">for</span> (;;) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;---------------------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;1.查看所有书籍&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;2.借书&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;3.还书&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;4.查找&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;5.注销&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;---------------------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;请选择:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		std::cin  &gt;&gt;  choice;</span><br><span class="line">		<span class="keyword">auto</span> it = actionMap.<span class="built_in">find</span>(choice);</span><br><span class="line">		<span class="keyword">if</span> (it != actionMap.<span class="built_in">end</span>()) &#123;</span><br><span class="line">			it-&gt;<span class="built_in">second</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;数字无效,重新选择！&quot;</span>&lt;&lt;std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="模板的完全特例化和非完全-部分-特例化"><a href="#模板的完全特例化和非完全-部分-特例化" class="headerlink" title="模板的完全特例化和非完全(部分)特例化"></a>模板的完全特例化和非完全(部分)特例化</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 主模板</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span> &#123; ... &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 部分特例化：针对指针类型</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>&lt;T*&gt; &#123; ... &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 完全特例化：针对int类型</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>&lt;<span class="type">int</span>&gt; &#123; ... &#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">compare</span><span class="params">(T val1, T val2)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;template compare&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> val1 &gt; val2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="comment">// 完全特例化</span></span><br><span class="line"><span class="type">bool</span> <span class="built_in">compare</span>&lt;<span class="type">const</span> <span class="type">char</span>*&gt;(<span class="type">const</span> <span class="type">char</span>* a, <span class="type">const</span> <span class="type">char</span>* b) &#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;compare&lt;const char* &gt;&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> std::<span class="built_in">strcmp</span>(a, b) &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		模板的完全特例化和非完全(部分)特例化</span></span><br><span class="line"><span class="comment">		模板的实参推演</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="built_in">compare</span>(<span class="number">10</span>, <span class="number">14</span>);</span><br><span class="line">	<span class="built_in">compare</span>(<span class="string">&quot;Hello&quot;</span>,<span class="string">&quot;hello2&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Vector</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;call Vector template init&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// char*的完全特例化</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>&lt;<span class="type">char</span>*&gt;&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Vector</span>&lt;<span class="type">char</span>*&gt;() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;call Vector&lt;char*&gt;init&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 针对指针类型的部分特例化版本</span></span><br><span class="line"><span class="comment">//知道指针,但不知道是什么类型的指针</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Ty&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>&lt;Ty*&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Vector</span>&lt;Ty*&gt;() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;call Vector&lt;Ty*&gt;init&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指针函数指针(有返回值,有两个变量)提供的部分特例化</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> A1, <span class="keyword">typename</span> A2&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>&lt;<span class="built_in">R</span>(*)(A1,A2)&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Vector</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;call Vector&lt;R(*)(A1,A2))&gt;init&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数类型的部分特例化(完全特例化会指定所有模板参数)</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> A1, <span class="keyword">typename</span> A2&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>&lt;<span class="built_in">R</span>(A1, A2)&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Vector</span>() &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;call Vector&lt;R(A1,A2))&gt;init&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Vector&lt;<span class="type">int</span>&gt; vec1; <span class="comment">// call Vector template init</span></span><br><span class="line">	Vector&lt;<span class="type">char</span>*&gt; vec2; <span class="comment">// call Vector&lt;char*&gt;init</span></span><br><span class="line">	Vector&lt;<span class="type">int</span>*&gt; vec3;<span class="comment">// call Vector&lt;Ty*&gt;init</span></span><br><span class="line">	Vector&lt;<span class="built_in">int</span>(*)(<span class="type">int</span>, <span class="type">int</span>)&gt; vec4; <span class="comment">// call Vector&lt;R(*)(A1,A2))&gt;init</span></span><br><span class="line">	Vector&lt;<span class="built_in">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; vec5; <span class="comment">// call Vector&lt;R(A1,A2))&gt;init</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">int</span><span class="params">(*PFUNC1)</span> <span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span></span>; <span class="comment">// 函数指针类型</span></span><br><span class="line">	PFUNC1 pfunc1 = sum;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">pfunc1</span>(<span class="number">10</span> ,<span class="number">9</span>) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="type">int</span> <span class="title">PFUNC2</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span></span>; <span class="comment">// 函数类型</span></span><br><span class="line">	PFUNC2 *pfunc2 = sum;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">pfunc2</span>(<span class="number">10</span>, <span class="number">9</span>) &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="模板的实参推演"><a href="#模板的实参推演" class="headerlink" title="模板的实参推演"></a>模板的实参推演</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(T a)</span> </span>&#123;  <span class="comment">// T包含了所有的大类型</span></span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(T).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> A1, <span class="keyword">typename</span> A2&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(R (*a) (A1, A2))</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(R).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(A1).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(A2).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(T* a)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(T).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> T,<span class="keyword">typename</span> A1, <span class="keyword">typename</span> A2&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">(R(T::*a) (A1, A2))</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(T).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(R).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(A1).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">typeid</span>(A2).<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">func</span>(<span class="number">10</span>); <span class="comment">// int </span></span><br><span class="line">	<span class="built_in">func</span>(<span class="string">&quot;aaa&quot;</span>); <span class="comment">// char const *</span></span><br><span class="line">	<span class="built_in">func</span>(sum); <span class="comment">//  int (__cdecl*)(int,int) 函数指针类型</span></span><br><span class="line">	<span class="built_in">func1</span>(sum); <span class="comment">// int __cdecl(int,int) 函数类型</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">func2</span>(sum);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">func</span>(&amp;Test::sum);<span class="comment">// int (__thiscall Test::*)(int,int) 大类型</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">func3</span>(&amp;Test::sum); <span class="comment">// 拆分类型</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="函数对象类型的实现原理"><a href="#函数对象类型的实现原理" class="headerlink" title="函数对象类型的实现原理"></a>函数对象类型的实现原理</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">function函数对象类型的实现原理</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Fty&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myfunction</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> A1&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myfunction</span>&lt;<span class="built_in">R</span>(A1)&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//typedef R(*PFUNC)(A1);也可以这样</span></span><br><span class="line">	<span class="keyword">using</span> PFUNC = <span class="built_in">R</span>(*)(A1);</span><br><span class="line">	<span class="built_in">myfunction</span>(PFUNC pfunc)</span><br><span class="line">		:_pfunc(pfunc)&#123;&#125;</span><br><span class="line">	<span class="function">R <span class="title">operator</span><span class="params">()</span> <span class="params">(A1 arg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _pfunc(arg);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	PFUNC _pfunc;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> A1, <span class="keyword">typename</span> A2&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myfunction</span>&lt;<span class="built_in">R</span>(A1, A2)&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">R</span><span class="params">(*PFUNC)</span><span class="params">(A1, A2)</span></span>;</span><br><span class="line">	<span class="built_in">myfunction</span>(PFUNC pfunc)</span><br><span class="line">	:_pfunc(pfunc)&#123;&#125;</span><br><span class="line">	<span class="function">R <span class="title">operator</span><span class="params">()</span> <span class="params">(A1 arg1, A2 arg2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _pfunc(arg1,arg2);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	PFUNC _pfunc;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">hello</span><span class="params">(<span class="type">const</span> std::string&amp; str)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; str &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	myfunction&lt;<span class="built_in">void</span>(<span class="type">const</span> std::string&amp;)&gt; func1 = hello;</span><br><span class="line">	<span class="built_in">func1</span>(<span class="string">&quot;hello word!&quot;</span>);</span><br><span class="line">	myfunction&lt;<span class="built_in">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; func2 = sum;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">func2</span>(<span class="number">1</span>,<span class="number">29</span>) &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">function函数对象类型的实现原理</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Fty&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myfunction</span> &#123;&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">部分特例化必须有一个主模板,所以主模板不能删除</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span>... A&gt; <span class="comment">// 可变参</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myfunction</span>&lt;<span class="built_in">R</span>(A...)&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">using</span> PFUNC = <span class="built_in">R</span>(*)(A...);</span><br><span class="line">	<span class="built_in">myfunction</span>(PFUNC pfunc)</span><br><span class="line">		:_pfunc(pfunc)&#123;&#125;</span><br><span class="line">	<span class="function">R <span class="title">operator</span><span class="params">()</span> <span class="params">(A... arg)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _pfunc(arg...);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	PFUNC _pfunc;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">hello</span><span class="params">(<span class="type">const</span> std::string&amp; str)</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; str &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	myfunction&lt;<span class="built_in">void</span>(<span class="type">const</span> std::string&amp;)&gt; func1 = hello;</span><br><span class="line">	<span class="built_in">func1</span>(<span class="string">&quot;hello word!&quot;</span>);</span><br><span class="line">	myfunction&lt;<span class="built_in">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; func2 = sum;</span><br><span class="line">	std::cout &lt;&lt; <span class="built_in">func2</span>(<span class="number">1</span>,<span class="number">29</span>) &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="c-11的bind"><a href="#c-11的bind" class="headerlink" title="c++11的bind"></a>c++11的bind</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;typeinfo&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">C++11 bind绑定器返回的结果还是一个函数对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">hello</span><span class="params">(<span class="type">const</span> std::string&amp; str)</span> </span>&#123; std::cout &lt;&lt; str &lt;&lt; std::endl; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; </span><br><span class="line">	<span class="keyword">return</span> a + b; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; </span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// bind是函数模板,可以自动推演模板参数,返回一个绑定器即函数对象。</span></span><br><span class="line">	std::<span class="built_in">bind</span>(hello, <span class="string">&quot;你好呀!&quot;</span>)();</span><br><span class="line">	std::cout &lt;&lt; std::<span class="built_in">bind</span>(sum, <span class="number">12</span>, <span class="number">28</span>)() &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; std::<span class="built_in">bind</span>(&amp;Test::sum,<span class="built_in">Test</span>(),<span class="number">20</span>,<span class="number">30</span>)() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 参数占位符,bind最多绑定20个参数</span></span><br><span class="line">	std::<span class="built_in">bind</span>(hello, std::placeholders::_1)(<span class="string">&quot;hello bind1&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 绑定器出了语句就无法继续使用</span></span><br><span class="line">	<span class="type">int</span> temp = std::<span class="built_in">bind</span>(sum, std::placeholders::_1, std::placeholders::_2)(<span class="number">2</span>,<span class="number">9</span>);</span><br><span class="line">	std::cout &lt;&lt; temp &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用function</span></span><br><span class="line">	std::function&lt;<span class="type">void</span>(std::string)&gt; func1 = std::<span class="built_in">bind</span>(hello, std::placeholders::_1);</span><br><span class="line">	<span class="built_in">func1</span>(<span class="string">&quot;使用function的绑定器&quot;</span>);</span><br><span class="line">	<span class="built_in">func1</span>(<span class="string">&quot;实现了复用&quot;</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="modu源码文件中bind和function机制"><a href="#modu源码文件中bind和function机制" class="headerlink" title="modu源码文件中bind和function机制"></a>modu源码文件中bind和function机制</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">mudo源码文件 threadpool.cc thread.cc  bind  function</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//线程类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 没有参数了，因为绑定器绑定过了</span></span><br><span class="line">	<span class="built_in">Thread</span>(std::function&lt;<span class="built_in">void</span>()&gt; func)</span><br><span class="line">	:_func(func)&#123;&#125;</span><br><span class="line">	<span class="function">std::thread <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="function">std::thread <span class="title">t</span><span class="params">(_func)</span></span>; <span class="comment">// 调用_func()</span></span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::function&lt;<span class="type">void</span>()&gt; _func;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//线程池</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadPool</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">ThreadPool</span>() &#123;&#125;</span><br><span class="line">	~<span class="built_in">ThreadPool</span>() &#123;</span><br><span class="line">		<span class="keyword">for</span> (std::vector&lt;Thread*&gt;::iterator it = _pool.<span class="built_in">begin</span>(); it != _pool.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">			<span class="keyword">delete</span> *it;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 开启线程池</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">startPool</span><span class="params">(<span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			_pool.<span class="built_in">push_back</span>(<span class="keyword">new</span> <span class="built_in">Thread</span>(std::<span class="built_in">bind</span>(&amp;ThreadPool::runInThread, <span class="keyword">this</span>, i)));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			_handler.<span class="built_in">push_back</span>(_pool[i]-&gt;<span class="built_in">start</span>());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (std::thread &amp;t : _handler) &#123;</span><br><span class="line">			t.<span class="built_in">join</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::vector&lt;Thread*&gt; _pool; <span class="comment">// 指针没有析构,必须手动析构</span></span><br><span class="line">	std::vector&lt;std::thread&gt; _handler;</span><br><span class="line">	<span class="comment">//把runInThread这个成员方法当作线程函数</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">runInThread</span><span class="params">(<span class="type">int</span> id)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;id is: &quot;</span> &lt;&lt; id &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	ThreadPool pool;</span><br><span class="line">	pool.<span class="built_in">startPool</span>(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">mudo源码文件 threadpool.cc thread.cc  bind  function</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//线程类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Thread</span>(std::function&lt;<span class="built_in">void</span>(<span class="type">int</span>)&gt; func, <span class="type">int</span> no)</span><br><span class="line">	:_func(func),_no(no)&#123;&#125;</span><br><span class="line">	<span class="function">std::thread <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="function">std::thread <span class="title">t</span><span class="params">(_func,_no)</span></span>; <span class="comment">// 调用_func()</span></span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::function&lt;<span class="type">void</span>(<span class="type">int</span>)&gt; _func;</span><br><span class="line">	<span class="type">int</span> _no;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//线程池</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadPool</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">ThreadPool</span>() &#123;&#125;</span><br><span class="line">	~<span class="built_in">ThreadPool</span>() &#123;</span><br><span class="line">		<span class="keyword">for</span> (std::vector&lt;Thread*&gt;::iterator it = _pool.<span class="built_in">begin</span>(); it != _pool.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">			<span class="keyword">delete</span> *it;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 开启线程池</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">startPool</span><span class="params">(<span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			_pool.<span class="built_in">push_back</span>(</span><br><span class="line">				<span class="keyword">new</span> <span class="built_in">Thread</span>(std::<span class="built_in">bind</span>(&amp;ThreadPool::runInThread, <span class="keyword">this</span>, std::placeholders::_1),i));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			_handler.<span class="built_in">push_back</span>(_pool[i]-&gt;<span class="built_in">start</span>());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (std::thread &amp;t : _handler) &#123;</span><br><span class="line">			t.<span class="built_in">join</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::vector&lt;Thread*&gt; _pool; <span class="comment">// 指针没有析构,必须手动析构</span></span><br><span class="line">	std::vector&lt;std::thread&gt; _handler;</span><br><span class="line">	<span class="comment">//把runInThread这个成员方法当作线程函数</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">runInThread</span><span class="params">(<span class="type">int</span> id)</span> </span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;id is: &quot;</span> &lt;&lt; id &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	ThreadPool pool;</span><br><span class="line">	pool.<span class="built_in">startPool</span>(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T = <span class="type">void</span>&gt;</span><br><span class="line"><span class="keyword">class</span> TestLambda &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">TestLambda</span>() &#123;&#125;</span><br><span class="line">	<span class="type">void</span> <span class="built_in">operator</span>()() <span class="type">const</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;hello!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T = <span class="type">int</span>&gt;</span><br><span class="line"><span class="keyword">class</span> TestLambda1 &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">TestLambda1</span>() &#123;&#125;</span><br><span class="line">	<span class="type">int</span> <span class="built_in">operator</span>()(<span class="type">int</span> a, <span class="type">int</span> b) <span class="type">const</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; a + b  &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T = <span class="type">int</span>&gt;</span><br><span class="line"><span class="keyword">class</span> TestLambda2 &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">TestLambda2</span>(<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">		:<span class="built_in">ma</span>(a),<span class="built_in">mb</span>(b) &#123;&#125;</span><br><span class="line">	<span class="type">int</span> <span class="built_in">operator</span>()(<span class="type">int</span> a, <span class="type">int</span> b) <span class="type">const</span> &#123;</span><br><span class="line">		<span class="type">int</span> tmp = ma;</span><br><span class="line">		ma = mb;</span><br><span class="line">		mb = tmp;</span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">mutable</span> <span class="type">int</span> ma;</span><br><span class="line">	<span class="keyword">mutable</span> <span class="type">int</span> mb;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++11函数对象升级版: lambda表达式</span></span><br><span class="line"><span class="comment">函数对象的缺点:</span></span><br><span class="line"><span class="comment">使用在泛型算法参数传递 比较性质/自定义操作  优先级队列 智能指针</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">lambda表达式的语法:</span></span><br><span class="line"><span class="comment">[捕获外部变量](形参列表)-&gt;返回值&#123;执行语句&#125;; </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">auto</span> func1 = []()-&gt;<span class="type">void</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;你好&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="built_in">func1</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 类似于</span></span><br><span class="line">	TestLambda&lt;&gt; t1;</span><br><span class="line">	<span class="built_in">t1</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">auto</span> func2 = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">		std::cout &lt;&lt; a + b &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> a + b;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="built_in">func2</span>(<span class="number">300</span>,<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">	TestLambda1&lt;&gt; t2;</span><br><span class="line">	<span class="built_in">t2</span>(<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 如果lambda表达式不需要返回值,-&gt;返回值省略</span></span><br><span class="line">	<span class="keyword">auto</span> func3 = [](<span class="type">int</span> a) &#123; std::cout &lt;&lt; a &lt;&lt; std::endl; &#125;;</span><br><span class="line">	<span class="built_in">func3</span>(<span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	捕获变量</span></span><br><span class="line"><span class="comment">	[]:不捕获任何变量</span></span><br><span class="line"><span class="comment">	[=]:以传值的方式捕获外部的所有变量</span></span><br><span class="line"><span class="comment">	[&amp;]:以传引用的方式来捕获所有变量</span></span><br><span class="line"><span class="comment">	[this]:捕获外部的this指针</span></span><br><span class="line"><span class="comment">	[=,&amp;a]:以传值的方式捕获外部的变量,但是a变量使用引用的方式捕获</span></span><br><span class="line"><span class="comment">	[a,&amp;b]:以值传递的方式捕获变量a, 以引用的方式捕获变量b</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="type">int</span> a = <span class="number">3</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">4</span>;</span><br><span class="line">	<span class="keyword">auto</span> fun4 = [a, b]()<span class="keyword">mutable</span>&#123; <span class="comment">// 使用mtubale因为operator是使用了const修饰</span></span><br><span class="line">		<span class="type">int</span> temp = a;</span><br><span class="line">		a = b;</span><br><span class="line">		b = temp;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="built_in">fun4</span>();</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;a is &quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;, b is &quot;</span> &lt;&lt; b &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">auto</span> fun5 = [&amp;a, &amp;b]() &#123; </span><br><span class="line">		<span class="type">int</span> temp = a;</span><br><span class="line">		a = b;</span><br><span class="line">		b = temp;</span><br><span class="line">		&#125;;</span><br><span class="line">	<span class="built_in">fun5</span>();</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;a is &quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;, b is &quot;</span> &lt;&lt; b &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">		vec.<span class="built_in">push_back</span>(std::<span class="built_in">rand</span>()%<span class="number">10</span> + <span class="number">1</span> );</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	std::<span class="built_in">sort</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">bool</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> a &gt; b;</span><br><span class="line">	&#125;);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> val : vec) &#123;</span><br><span class="line">		std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">auto</span> it = std::<span class="built_in">find_if</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), [](<span class="type">int</span> a)-&gt;<span class="type">bool</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> a &lt; <span class="number">7</span>;</span><br><span class="line">		&#125;);</span><br><span class="line">	<span class="keyword">if</span> (it != vec.<span class="built_in">end</span>()) &#123;</span><br><span class="line">		vec.<span class="built_in">insert</span>(it,<span class="number">7</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;没有找到&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> val: vec) &#123;</span><br><span class="line">		std::cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">	std::for_each(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>(), [](<span class="type">int</span> a) &#123;</span><br><span class="line">		std::cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="lambda表达式跨语句使用"><a href="#lambda表达式跨语句使用" class="headerlink" title="lambda表达式跨语句使用"></a>lambda表达式跨语句使用</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 使用function来表示函数对象的类型</span></span><br><span class="line">	std::map&lt;<span class="type">int</span>,std::function&lt;<span class="type">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt;&gt; caculateMap;</span><br><span class="line">	caculateMap[<span class="number">1</span>] = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span> &#123; <span class="keyword">return</span> a + b; &#125;;</span><br><span class="line">	caculateMap[<span class="number">2</span>] = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span> &#123; <span class="keyword">return</span> a - b; &#125;;</span><br><span class="line">	caculateMap[<span class="number">3</span>] = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span> &#123; <span class="keyword">return</span> a * b; &#125;;</span><br><span class="line">	caculateMap[<span class="number">4</span>] = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span> &#123; <span class="keyword">return</span> a / b; &#125;;</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; caculateMap[<span class="number">1</span>](<span class="number">1</span>,<span class="number">4</span>) &lt;&lt; std::endl;</span><br><span class="line">	std::cout &lt;&lt; caculateMap[<span class="number">2</span>](<span class="number">1</span>, <span class="number">4</span>) &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*智能指针自定义删除器 delete p;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	std::unique_ptr&lt;FILE,std::function&lt;<span class="type">void</span>(FILE*)&gt;&gt; <span class="built_in">ptr1</span>(std::<span class="built_in">fopen</span>(<span class="string">&quot;data.txt&quot;</span>, <span class="string">&quot;w&quot;</span>),</span><br><span class="line">		[](FILE* p) &#123;</span><br><span class="line">			std::<span class="built_in">fclose</span>(p);</span><br><span class="line">		&#125;</span><br><span class="line">	);<span class="comment">// 应该调用fclose(FILE*);</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Data</span>(<span class="type">int</span> data1 = <span class="number">10</span>, <span class="type">int</span> data2 = <span class="number">10</span>)</span><br><span class="line">	:<span class="built_in">ma</span>(data1),<span class="built_in">mb</span>(data2)&#123;&#125;</span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>&gt; (<span class="type">const</span> Data&amp; data)<span class="type">const</span> &#123; <span class="keyword">return</span> ma &gt; data.ma; &#125;;</span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span>&lt; (<span class="type">const</span> Data&amp; data)<span class="type">const</span> &#123; <span class="keyword">return</span> ma &lt;  data.ma; &#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">int</span> ma;</span><br><span class="line">	<span class="type">int</span> mb;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 优先级队列</span></span><br><span class="line">	std::priority_queue&lt;Data&gt; pque;</span><br><span class="line">	pque.<span class="built_in">push</span>(<span class="built_in">Data</span>(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line">	pque.<span class="built_in">push</span>(<span class="built_in">Data</span>(<span class="number">15</span>, <span class="number">15</span>));</span><br><span class="line">	pque.<span class="built_in">push</span>(<span class="built_in">Data</span>(<span class="number">20</span>, <span class="number">10</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Data</span>(<span class="type">int</span> data1 = <span class="number">10</span>, <span class="type">int</span> data2 = <span class="number">10</span>)</span><br><span class="line">	:<span class="built_in">ma</span>(data1),<span class="built_in">mb</span>(data2)&#123;&#125;</span><br><span class="line">	<span class="type">int</span> ma;</span><br><span class="line">	<span class="type">int</span> mb;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 优先级队列</span></span><br><span class="line">	std::priority_queue&lt;Data, std::vector&lt;Data&gt;, std::function&lt;<span class="type">bool</span>(Data&amp;, Data&amp;)&gt;&gt; </span><br><span class="line">		<span class="built_in">pque</span>([](Data &amp;d1, Data &amp;d2)-&gt;<span class="type">bool</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> d<span class="number">1.</span>ma &gt; d<span class="number">2.</span>ma;</span><br><span class="line">		&#125;);</span><br><span class="line">	pque.<span class="built_in">push</span>(<span class="built_in">Data</span>(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line">	pque.<span class="built_in">push</span>(<span class="built_in">Data</span>(<span class="number">15</span>, <span class="number">15</span>));</span><br><span class="line">	pque.<span class="built_in">push</span>(<span class="built_in">Data</span>(<span class="number">20</span>, <span class="number">10</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="C-11标准"><a href="#C-11标准" class="headerlink" title="C++11标准"></a>C++11标准</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		C++11：</span></span><br><span class="line"><span class="comment">		1.关键字和语法:</span></span><br><span class="line"><span class="comment">			auto:依据右值，推导出右值的类型，左边变量的类型就已知了。</span></span><br><span class="line"><span class="comment">			nullptr:指针专用,和整数(NULL)区别, #define NULL 0;</span></span><br><span class="line"><span class="comment">			foreach:底层通过指针或者迭代器实现</span></span><br><span class="line"><span class="comment">				for(Type val: container)&#123;</span></span><br><span class="line"><span class="comment">					std::cout &lt;&lt; val &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">				&#125;</span></span><br><span class="line"><span class="comment">			右值引用: &amp;&amp;, std::move(), std::forward()类型完美转发。</span></span><br><span class="line"><span class="comment">			模板的新特性: typename ...A表示可变参(类型参数)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		2.绑定器和函数对象</span></span><br><span class="line"><span class="comment">		function:函数对象</span></span><br><span class="line"><span class="comment">		bind:绑定器</span></span><br><span class="line"><span class="comment">		lambda表达式</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		3.智能指针:</span></span><br><span class="line"><span class="comment">		shared_ptr和weak_ptr:自动释放资源</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		4.容器:</span></span><br><span class="line"><span class="comment">		set和map:红黑树 o(lgn)</span></span><br><span class="line"><span class="comment">		unordered_set和unordered_map:哈希表(无序) o(1)</span></span><br><span class="line"><span class="comment">		array:不扩容数组 建议还是用vector</span></span><br><span class="line"><span class="comment">		forward_list:前向链表 建议还是用list</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		5.C++语言级别支持的多线程编程</span></span><br><span class="line"><span class="comment">		createThread</span></span><br><span class="line"><span class="comment">		pthread_create</span></span><br><span class="line"><span class="comment">		clone</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="C-语言级别的多线程编程"><a href="#C-语言级别的多线程编程" class="headerlink" title="C++语言级别的多线程编程"></a>C++语言级别的多线程编程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C++语言级别的多线程编程:可以实现跨平台编译</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++语言层面 thread  本质还是调用系统底层的API</span></span><br><span class="line"><span class="comment">windows--&gt;createThread;</span></span><br><span class="line"><span class="comment">linux--&gt;pthread_create;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">threadHandler</span><span class="params">(<span class="type">int</span> time)</span></span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;Hello threadHandler&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(time));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 定义了一个线程对象,传入了一个线程函数</span></span><br><span class="line">	<span class="function">std::thread <span class="title">t1</span><span class="params">(threadHandler, <span class="number">4</span>)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//主线程等待子线程结束，主线程继续往下运行</span></span><br><span class="line">	<span class="comment">//t1.join();// 在此阻塞</span></span><br><span class="line">	t<span class="number">1.</span><span class="built_in">detach</span>();</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;main Thread Down! &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">线程内容:</span></span><br><span class="line"><span class="comment">1.创建线程:</span></span><br><span class="line"><span class="comment">std::thread定义一个线程对象,传入线程所需要的线程函数和参数,线程自动开启执行</span></span><br><span class="line"><span class="comment">	t1.join();主线程必须等待所有子线程结束才能结束：</span></span><br><span class="line"><span class="comment">	t1.detach();将t1线程设置为分离线程,主线程结束，整个进程结束。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2.子线程如何结束</span></span><br><span class="line"><span class="comment">	子线程函数运行完成就结束了</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">3.主线程运行完成,如果当前进程还有未运行完成的子线程，进程就会一次终止。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="mutex锁"><a href="#mutex锁" class="headerlink" title="mutex锁"></a>mutex锁</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">C++ thread 模拟车票窗口卖票的程序</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> tickerCount = <span class="number">100</span>; <span class="comment">// 总票数，有3个窗口一起卖票</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">多线程程序:</span></span><br><span class="line"><span class="comment">	竞态条件:多线程程序的执行结果是一致的,不会随着CPU对线程的不同的调用顺序,</span></span><br><span class="line"><span class="comment">	而产生不同的结果</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sellTicket</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">while</span> (tickerCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot;号窗口卖出一张票,余票: &quot;</span> &lt;&lt; --tickerCount &lt;&lt; std::endl;</span><br><span class="line">			std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">1</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;余票不足...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::list&lt;std::thread&gt; tlist;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">		tlist.<span class="built_in">push_back</span>(std::<span class="built_in">thread</span>(sellTicket,i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (std::thread &amp;t: tlist) &#123;</span><br><span class="line">		t.<span class="built_in">join</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;所有窗口卖票结束&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="type">int</span> tickerCount = <span class="number">20</span>; <span class="comment">// 总票数，有3个窗口一起卖票</span></span><br><span class="line">std::mutex mtx; <span class="comment">// 全局的一把互斥锁</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sellTicket</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (tickerCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		mtx.<span class="built_in">lock</span>();</span><br><span class="line">		<span class="keyword">if</span> (tickerCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="comment">// 临界区域代码段=&gt;原子操作=》线程互斥操作。</span></span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot;号窗口卖出一张票,余票: &quot;</span> &lt;&lt; --tickerCount &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">		mtx.<span class="built_in">unlock</span>();</span><br><span class="line">		std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">milliseconds</span>(<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;余票不足...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::list&lt;std::thread&gt; tlist;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">		tlist.<span class="built_in">push_back</span>(std::<span class="built_in">thread</span>(sellTicket,i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (std::thread &amp;t: tlist) &#123;</span><br><span class="line">		t.<span class="built_in">join</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;所有窗口卖票结束&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="type">int</span> tickerCount = <span class="number">20</span>; <span class="comment">// 总票数，有3个窗口一起卖票</span></span><br><span class="line">std::mutex mtx; <span class="comment">// 全局的一把互斥锁</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sellTicket</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (tickerCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;<span class="comment">// 使用lock_guard自动释放资源</span></span><br><span class="line">            <span class="comment">// 保证所有线程都能释放锁,防止死锁问题的发生</span></span><br><span class="line">			<span class="keyword">if</span> (tickerCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="comment">// 临界区域代码段=&gt;原子操作=》线程互斥操作。</span></span><br><span class="line">				std::cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot;号窗口卖出一张票,余票: &quot;</span> &lt;&lt; --tickerCount &lt;&lt; std::endl;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">milliseconds</span>(<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;余票不足...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::list&lt;std::thread&gt; tlist;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">		tlist.<span class="built_in">push_back</span>(std::<span class="built_in">thread</span>(sellTicket,i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (std::thread &amp;t: tlist) &#123;</span><br><span class="line">		t.<span class="built_in">join</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;所有窗口卖票结束&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="comment">//优化版</span></span><br><span class="line"><span class="type">int</span> tickerCount = <span class="number">20</span>; </span><br><span class="line">std::mutex mtx;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sellTicket</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (tickerCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lck</span><span class="params">(mtx)</span></span>; <span class="comment">// 会自动上锁和解锁</span></span><br><span class="line">			<span class="keyword">if</span> (tickerCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				std::cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot;号窗口卖出一张票,余票: &quot;</span> &lt;&lt; --tickerCount &lt;&lt; std::endl;</span><br><span class="line">				<span class="keyword">if</span> (tickerCount == <span class="number">0</span>) &#123;</span><br><span class="line">					std::cout &lt;&lt; <span class="string">&quot;窗口余票不足&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">milliseconds</span>(<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::list&lt;std::thread&gt; tlist;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">		tlist.<span class="built_in">push_back</span>(std::<span class="built_in">thread</span>(sellTicket,i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (std::thread &amp;t: tlist) &#123;</span><br><span class="line">		t.<span class="built_in">join</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;所有窗口卖票结束&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="C-多线程编程-线程通信同步机制"><a href="#C-多线程编程-线程通信同步机制" class="headerlink" title="C++多线程编程-线程通信同步机制"></a>C++多线程编程-线程通信同步机制</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span> <span class="comment">// C++ STL所有的容器都不是线程安全</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++多线程编程 线程间的同步通信机制</span></span><br><span class="line"><span class="comment">多线程编程的俩个问题:</span></span><br><span class="line"><span class="comment">	1.线程间的互斥</span></span><br><span class="line"><span class="comment">	2.线程间的同步通信。</span></span><br><span class="line"><span class="comment">		生产者,消费者线程模型</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">std::mutex mtx;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">put</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">		<span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(mtx)</span></span>;</span><br><span class="line">		que.<span class="built_in">push</span>(val);</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;生产者，生产: &quot;</span> &lt;&lt; val &lt;&lt; <span class="string">&quot;号物品&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">()</span> </span>&#123; <span class="comment">// 消费物品</span></span><br><span class="line">		<span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(mtx)</span></span>;</span><br><span class="line">		<span class="type">int</span> val = que.<span class="built_in">front</span>();<span class="comment">// 消费比生产快时就消费不了了</span></span><br><span class="line">		que.<span class="built_in">pop</span>();</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;消费者，消费: &quot;</span> &lt;&lt; val &lt;&lt; <span class="string">&quot;号物品&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> val;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::queue&lt;<span class="type">int</span>&gt; que;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prodecuer</span><span class="params">(Queue *que)</span></span>&#123; <span class="comment">// 生产者线程</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		que-&gt;<span class="built_in">put</span>(i);</span><br><span class="line">		std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">consumer</span><span class="params">(Queue* que)</span> </span>&#123; <span class="comment">// 消费者线程</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		que-&gt;<span class="built_in">get</span>();</span><br><span class="line">		std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Queue que; <span class="comment">//两个线程共享的队列</span></span><br><span class="line">	<span class="function">std::thread <span class="title">t1</span><span class="params">(prodecuer, &amp;que)</span></span>;</span><br><span class="line">	<span class="function">std::thread <span class="title">t2</span><span class="params">(consumer, &amp;que)</span></span>;</span><br><span class="line"></span><br><span class="line">	t<span class="number">1.</span><span class="built_in">join</span>();</span><br><span class="line">	t<span class="number">2.</span><span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span> <span class="comment">// C++ STL所有的容器都不是线程安全</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++多线程编程 线程间的同步通信机制</span></span><br><span class="line"><span class="comment">多线程编程的俩个问题:</span></span><br><span class="line"><span class="comment">	1.线程间的互斥</span></span><br><span class="line"><span class="comment">	2.线程间的同步通信。</span></span><br><span class="line"><span class="comment">		生产者,消费者线程模型</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">std::mutex mtx;<span class="comment">// 定义互斥锁,做线程间的互斥操作</span></span><br><span class="line">std::condition_variable cv; <span class="comment">// 定义条件变量,做线程间的同步通信操作</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">put</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">		<span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lck</span><span class="params">(mtx)</span></span>;</span><br><span class="line">		<span class="keyword">while</span> (!que.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">			<span class="comment">//que不为空,生产者应该通知消费者去消费,</span></span><br><span class="line">			<span class="comment">// 生产者线程进入等待，并将锁释放掉</span></span><br><span class="line">			cv.<span class="built_in">wait</span>(lck);</span><br><span class="line">		&#125;</span><br><span class="line">		que.<span class="built_in">push</span>(val);</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		notify_all: 通知其它所有线程,其他线程得到该通知,会从等待状态进入到阻塞状态，需要获取互斥锁才能继续执行</span></span><br><span class="line"><span class="comment">		notify_one: 通知其他所有线程</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		cv.<span class="built_in">notify_all</span>();<span class="comment">// 通知其他线程</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;生产者，生产: &quot;</span> &lt;&lt; val &lt;&lt; <span class="string">&quot;号物品&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">()</span> </span>&#123; <span class="comment">// 消费物品</span></span><br><span class="line">		<span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lck</span><span class="params">(mtx)</span></span>;</span><br><span class="line">		<span class="keyword">while</span> (que.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">			<span class="comment">//消费者线程发现que是空的</span></span><br><span class="line">			<span class="comment">// 进入等待状态,把互斥锁释放</span></span><br><span class="line">			cv.<span class="built_in">wait</span>(lck);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> val = que.<span class="built_in">front</span>();<span class="comment">// 消费比生产快时就消费不了了</span></span><br><span class="line">		que.<span class="built_in">pop</span>();</span><br><span class="line">		cv.<span class="built_in">notify_all</span>();<span class="comment">// 通知消费完成</span></span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;消费者，消费: &quot;</span> &lt;&lt; val &lt;&lt; <span class="string">&quot;号物品&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> val;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::queue&lt;<span class="type">int</span>&gt; que;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prodecuer</span><span class="params">(Queue *que)</span></span>&#123; <span class="comment">// 生产者线程</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		que-&gt;<span class="built_in">put</span>(i);</span><br><span class="line">		std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">consumer</span><span class="params">(Queue* que)</span> </span>&#123; <span class="comment">// 消费者线程</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		que-&gt;<span class="built_in">get</span>();</span><br><span class="line">		std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Queue que; <span class="comment">//两个线程共享的队列</span></span><br><span class="line">	<span class="function">std::thread <span class="title">t1</span><span class="params">(prodecuer, &amp;que)</span></span>;</span><br><span class="line">	<span class="function">std::thread <span class="title">t2</span><span class="params">(consumer, &amp;que)</span></span>;</span><br><span class="line"></span><br><span class="line">	t<span class="number">1.</span><span class="built_in">join</span>();</span><br><span class="line">	t<span class="number">2.</span><span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="unique-str和condition-variable"><a href="#unique-str和condition-variable" class="headerlink" title="unique_str和condition_variable"></a>unique_str和condition_variable</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">unique_lock和condition_variable</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1.lock_guard和unique_lcok</span></span><br><span class="line"><span class="comment">2.condition_variable wait 和notify_all</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">std::mutex mtx;</span><br><span class="line">std::condition_variable cv;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*mtx.lock();</span></span><br><span class="line"><span class="comment">	mtx.unlock();*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	拷贝构造和赋值被delete了，不能用于函数参数传递或者返回过程中</span></span><br><span class="line"><span class="comment">	简单的上锁和解锁</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(mtx)</span></span>; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	可以使用在函数参数传递或者返回过程中了,只能用在简单的临界区代码段的互斥操作中</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lck</span><span class="params">(mtx)</span></span>;</span><br><span class="line">	cv.<span class="built_in">wait</span>(lck); <span class="comment">// 1.使线程进入等待状态 2.lck.unlock可以把锁释放掉</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">unique_lock和condition_variable</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1.lock_guard和unique_lcok</span></span><br><span class="line"><span class="comment">2.condition_variable wait 和notify_all</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">std::mutex mtx;<span class="comment">// 底层是系统库的pthread_mutex_t</span></span><br><span class="line">std::condition_variable cv;<span class="comment">// 底层是系统库的pthread_condition_t</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	通知在cv等待的线程,从等待变成阻塞，需要获取到互斥锁才能运行</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	cv.<span class="built_in">notify_all</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="c-11原子类型"><a href="#c-11原子类型" class="headerlink" title="c++11原子类型"></a>c++11原子类型</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;atomic&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">lock_guard&lt;std::mutex&gt; guard(mtx);</span></span><br><span class="line"><span class="comment">count++;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">lock_guard&lt;std::mutex&gt; guard(mtx);</span></span><br><span class="line"><span class="comment">count--;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">互斥锁是比较重的,临界区代码做那些复杂多的活。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">对于轻型的任务，比如卖票的++、--操作</span></span><br><span class="line"><span class="comment">使用CAS来保证，使用的是原子特性就足够,无锁操作。</span></span><br><span class="line"><span class="comment">	exchange / swap 无锁队列--&gt; CAS来实现的</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">volatile</span> std::atomic_bool isReady = <span class="literal">false</span>; <span class="comment">// 使用volatile保证不从缓冲中读取数据</span></span><br><span class="line">std::atomic_int mycount = <span class="number">0</span>; <span class="comment">// 不推荐使用volatile，volatile防止编译器对变量的某些优化</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">task</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (!isReady) &#123;</span><br><span class="line">		<span class="comment">// 线程出让当前的CPU时间片,等待下一次的调度</span></span><br><span class="line">		std::this_thread::<span class="built_in">yield</span>(); </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">		mycount++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::list&lt;std::thread&gt; tlist;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">		tlist.<span class="built_in">push_back</span>(std::<span class="built_in">thread</span>(task));</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; mycount &lt;&lt; std::endl; <span class="comment">// 启动前</span></span><br><span class="line">	std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">4</span>));</span><br><span class="line">	isReady = <span class="literal">true</span>;<span class="comment">// 启动条件</span></span><br><span class="line">	std::cout &lt;&lt; mycount &lt;&lt; std::endl; <span class="comment">// 中间值</span></span><br><span class="line">	<span class="keyword">for</span> (std::thread &amp;t: tlist) &#123;</span><br><span class="line">		t.<span class="built_in">join</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; mycount &lt;&lt; std::endl; <span class="comment">// 结束后的值</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="堆上数据的处理"><a href="#堆上数据的处理" class="headerlink" title="堆上数据的处理"></a>堆上数据的处理</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A* ptr1 = <span class="keyword">new</span> <span class="built_in">A</span>();  <span class="comment">// 正确  new A()在堆上分配内存并返回指针</span></span><br><span class="line">A ptr2 = <span class="keyword">new</span> <span class="built_in">A</span>(); <span class="comment">// 错误</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Singleton * instance;  <span class="comment">// 未初始化的指针，野指针</span></span><br><span class="line">instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>(); <span class="comment">// 初始化</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Singleton  instance;<span class="comment">//实际就是一个对象</span></span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* p = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">delete</span> p;</span><br><span class="line"><span class="comment">// 删除空指针是安全的</span></span><br><span class="line"><span class="comment">//最好还是用</span></span><br><span class="line"><span class="keyword">if</span> (p != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">    <span class="keyword">delete</span> p;</span><br><span class="line">    p = <span class="literal">nullptr</span>;  <span class="comment">// 避免悬空指针</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">直接定义变量 int a;</span><br><span class="line"></span><br><span class="line">优点：</span><br><span class="line">	简单直接：直接使用变量名访问，代码可读性高</span><br><span class="line">	内存自动管理：自动分配和释放（栈内存）</span><br><span class="line">	访问速度快：直接通过栈指针偏移访问，不需要额外解引用</span><br><span class="line">	类型安全：编译器能更好地进行类型检查</span><br><span class="line">	无空指针风险：变量一定存在有效值</span><br><span class="line"></span><br><span class="line">缺点：</span><br><span class="line">	生命周期有限：函数结束时自动销毁（栈变量）</span><br><span class="line">	大小固定：编译时确定大小，无法动态调整</span><br><span class="line">	作用域局限：不能跨函数持久存在（除非是全局变量）</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">指针定义 int *ptr;</span><br><span class="line"></span><br><span class="line">优点:动态内存分配,可以实现资源共享,作为参数传递开销小</span><br><span class="line">缺点:手动内存管理,越界问题,野指针问题</span><br></pre></td></tr></table></figure>

<h5 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一个类无论创建多少个对象，永远只能得到该类的一个对象的实例。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">单例模式:一个类不管创建多少次对象,永远只能得到该类型的一个对象实例</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">常用的:日志模块,数据库模块</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">单例模式:</span></span><br><span class="line"><span class="comment">	饿汉式单例模式:还没有获取到实例对象,实例对象就已经产生了，启动初始化会消耗性能</span></span><br><span class="line"><span class="comment">	懒汉式单例模式:唯一的实例对象,直到第一次获取它的时候,才产生。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123; <span class="comment">// 饿汉式的单例,一定是线程安全的，instance在线程前就创建好了</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> &amp;instance;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">static</span> Singleton instance; <span class="comment">// 定义一个唯一的类的实例对象</span></span><br><span class="line">	<span class="built_in">Singleton</span>() &#123;</span><br><span class="line">		<span class="comment">// 构造函数私有化化</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">	Singleton&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton Singleton::instance;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Singleton* s1 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	Singleton* s2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	Singleton* s3 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//Singleton* s4 = *s1; 无法拷贝构造了</span></span><br><span class="line">	<span class="comment">//*s2 = *s3; 被删除了</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	懒汉式单例模式:唯一的实例对象,直到第一次获取它的时候,才产生。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123; <span class="comment">// 懒汉式,需要的时候才创建</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="type">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (instance == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span>  instance;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">static</span> Singleton *instance; </span><br><span class="line">	<span class="built_in">Singleton</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">	Singleton&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::instance = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Singleton* s1 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	Singleton* s2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	Singleton* s3 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="线程安全的懒汉模式"><a href="#线程安全的懒汉模式" class="headerlink" title="线程安全的懒汉模式"></a>线程安全的懒汉模式</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	懒汉式单例模式:唯一的实例对象,直到第一次获取它的时候,才产生。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123; <span class="comment">// 懒汉式,需要的时候才创建,</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (instance == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            开辟内存</span></span><br><span class="line"><span class="comment">            构造对象</span></span><br><span class="line"><span class="comment">            赋值给instance</span></span><br><span class="line"><span class="comment">            </span></span><br><span class="line"><span class="comment">            不是线程安全的</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span>  instance;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">static</span> Singleton *instance; </span><br><span class="line">	<span class="built_in">Singleton</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">	Singleton&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::instance = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Singleton* s1 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	Singleton* s2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	Singleton* s3 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	线程安全的懒汉式单例模式:唯一的实例对象,直到第一次获取它的时候,才产生。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">std::mutex mtx;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123; <span class="comment">// 懒汉式,需要的时候才创建</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="type">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// std::lock_guard&lt;std::mutex&gt; guard(mtx);  锁的粒度太大了,单线程也要不断加锁解锁</span></span><br><span class="line">		<span class="keyword">if</span> (instance == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(mtx)</span></span>;</span><br><span class="line">			<span class="keyword">if</span> (instance == <span class="literal">nullptr</span>) &#123; <span class="comment">// 锁 + 双重判断。</span></span><br><span class="line">				instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span>  instance;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="type">static</span> Singleton *<span class="keyword">volatile</span> instance; <span class="comment">// 禁止优化，强制从内存读取最新值</span></span><br><span class="line">	<span class="built_in">Singleton</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">	Singleton&amp; <span class="keyword">operator</span>= (<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* <span class="keyword">volatile</span> Singleton::instance = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Singleton* s1 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	Singleton* s2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	Singleton* s3 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">简单工厂: simple factory</span></span><br><span class="line"><span class="comment">工厂方法: factory method</span></span><br><span class="line"><span class="comment">抽象工厂: abstract factory</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">工厂模式:封装了对象的创建,</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Car</span>() &#123;&#125;</span><br><span class="line">	<span class="built_in">Car</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:_name(name) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> std::string&amp; <span class="title">getCarName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _name;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::string _name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BMW</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">BMW</span>(<span class="type">const</span> std::string&amp; name):<span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆宝马汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Audi</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Audi</span>(<span class="type">const</span> std::string&amp; name) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;_name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆宝马汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::string _name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Car* p1 = <span class="keyword">new</span> <span class="built_in">BMW</span>(<span class="string">&quot;M5C&quot;</span>);</span><br><span class="line">	Car* p2 = <span class="keyword">new</span> <span class="built_in">BMW</span>(<span class="string">&quot;RS6&quot;</span>);</span><br><span class="line">	std::cout &lt;&lt; p1-&gt;<span class="built_in">getCarName</span>() &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="简单工厂"><a href="#简单工厂" class="headerlink" title="简单工厂"></a>简单工厂</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">简单工厂: simple factory</span></span><br><span class="line"><span class="comment">工厂方法: factory method</span></span><br><span class="line"><span class="comment">抽象工厂: abstract factory</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">工厂模式:封装了对象的创建,</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Car</span>() &#123;&#125;</span><br><span class="line">	<span class="built_in">Car</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:_name(name) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> std::string&amp; <span class="title">getCarName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _name;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::string _name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bmw</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Bmw</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:<span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆宝马汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Audi</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Audi</span>(<span class="type">const</span> std::string&amp; name) : <span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆奥迪汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">CarType</span></span><br><span class="line">&#123;</span><br><span class="line">	BMW, AUDI, PORSCHE</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleFactory</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function">Car* <span class="title">creater</span><span class="params">(CarType ct, <span class="type">const</span> std::string&amp; name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (ct) &#123;</span><br><span class="line">		<span class="keyword">case</span> BMW:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Bmw</span>(name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> AUDI:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Audi</span>(name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			std::cerr &lt;&lt; <span class="string">&quot;传入工厂的参数不正确&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">             <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	SimpleFactory *simpleFactory  = <span class="keyword">new</span> <span class="built_in">SimpleFactory</span>();</span><br><span class="line">	Car* p1 = simpleFactory-&gt;<span class="built_in">creater</span>(BMW, <span class="string">&quot;m4gts&quot;</span>);</span><br><span class="line">	Car* p2 = simpleFactory-&gt;<span class="built_in">creater</span>(AUDI, <span class="string">&quot;RS6&quot;</span>);</span><br><span class="line">	Car* p3 = simpleFactory-&gt;<span class="built_in">creater</span>(PORSCHE, <span class="string">&quot;911&quot;</span>);</span><br><span class="line">	p1-&gt;<span class="built_in">show</span>();</span><br><span class="line">	(*p2).<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">delete</span> p1;</span><br><span class="line">    <span class="keyword">delete</span> p2;</span><br><span class="line">    <span class="keyword">delete</span> p3;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">简单工厂: simple factory</span></span><br><span class="line"><span class="comment">工厂方法: factory method</span></span><br><span class="line"><span class="comment">抽象工厂: abstract factory</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">工厂模式:封装了对象的创建,</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Car</span>() &#123;&#125;</span><br><span class="line">	<span class="built_in">Car</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:_name(name) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> std::string&amp; <span class="title">getCarName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _name;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::string _name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bmw</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Bmw</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:<span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆宝马汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Audi</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Audi</span>(<span class="type">const</span> std::string&amp; name) : <span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆奥迪汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">CarType</span></span><br><span class="line">&#123;</span><br><span class="line">	BMW, AUDI, PORSCHE</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleFactory</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function">Car* <span class="title">creater</span><span class="params">(CarType ct, <span class="type">const</span> std::string&amp; name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (ct) &#123;</span><br><span class="line">		<span class="keyword">case</span> BMW:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Bmw</span>(name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> AUDI:</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Audi</span>(name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			std::cerr &lt;&lt; <span class="string">&quot;传入工厂的参数不正确&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 使用智能指针实现资源的自动管理</span></span><br><span class="line">	<span class="function">std::unique_ptr&lt;SimpleFactory&gt; <span class="title">factory</span><span class="params">(<span class="keyword">new</span> SimpleFactory())</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Car&gt; <span class="title">p1</span><span class="params">(factory-&gt;creater(BMW, <span class="string">&quot;m4gts&quot;</span>))</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Car&gt; <span class="title">p2</span><span class="params">(factory-&gt;creater(AUDI, <span class="string">&quot;RS6&quot;</span>))</span></span>;</span><br><span class="line">	p1-&gt;<span class="built_in">show</span>();</span><br><span class="line">	p2-&gt;<span class="built_in">show</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="工厂方法"><a href="#工厂方法" class="headerlink" title="工厂方法"></a>工厂方法</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">简单工厂: simple factory</span></span><br><span class="line"><span class="comment">工厂方法: factory method</span></span><br><span class="line"><span class="comment">抽象工厂: abstract factory</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">工厂模式:封装了对象的创建,</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Car</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:_name(name) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> std::string&amp; <span class="title">getCarName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _name;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::string _name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bmw</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Bmw</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:<span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆宝马汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Audi</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Audi</span>(<span class="type">const</span> std::string&amp; name) : <span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆奥迪汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> Car* <span class="title">createCar</span><span class="params">(<span class="type">const</span> std::string&amp; name)</span> </span>= <span class="number">0</span>; <span class="comment">// 工厂方法</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BmwFactory</span> : <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function">Car* <span class="title">createCar</span><span class="params">(<span class="type">const</span> std::string&amp; name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Bmw</span>(name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AudiFactory</span> : <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function">Car* <span class="title">createCar</span><span class="params">(<span class="type">const</span> std::string&amp; name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Audi</span>(name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Factory&gt; <span class="title">bmwFactory</span><span class="params">(<span class="keyword">new</span> BmwFactory)</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Factory&gt; <span class="title">audiFactory</span><span class="params">(<span class="keyword">new</span> AudiFactory)</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Car&gt; <span class="title">p1</span><span class="params">(bmwFactory-&gt;createCar(<span class="string">&quot;X5&quot;</span>))</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Car&gt; <span class="title">p2</span><span class="params">(audiFactory-&gt;createCar(<span class="string">&quot;Q7&quot;</span>))</span></span>;</span><br><span class="line">	p1-&gt;<span class="built_in">show</span>();</span><br><span class="line">	p2-&gt;<span class="built_in">show</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="抽象工厂"><a href="#抽象工厂" class="headerlink" title="抽象工厂"></a>抽象工厂</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">抽象工厂: abstract factory</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Car</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:_name(name) &#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> std::string&amp; <span class="title">getCarName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _name;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::string _name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bmw</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Bmw</span>(<span class="type">const</span> std::string&amp; name)</span><br><span class="line">		:<span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆宝马汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Audi</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Audi</span>(<span class="type">const</span> std::string&amp; name) : <span class="built_in">Car</span>(name)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;获取到一辆奥迪汽车!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Light</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BmwLight</span> : <span class="keyword">public</span> Light&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;bmwLight!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AudiLight</span> : <span class="keyword">public</span> Light &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;audiLight!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractFactory</span> &#123; <span class="comment">// 抽象工厂(对有一组关联关系的产品簇提供产品对象的统一创建)</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> Car* <span class="title">createCar</span><span class="params">(<span class="type">const</span> std::string&amp; name)</span> </span>= <span class="number">0</span>; <span class="comment">// 工厂方法</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> Light* <span class="title">createLight</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 抽象工厂的缺点:如果子类中有一个特殊成员，其他没有的也要实现,不然就是抽象类</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BmwFactory</span> : <span class="keyword">public</span> AbstractFactory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function">Car* <span class="title">createCar</span><span class="params">(<span class="type">const</span> std::string&amp; name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Bmw</span>(name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">Light* <span class="title">createLight</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">BmwLight</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AudiFactory</span> : <span class="keyword">public</span> AbstractFactory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function">Car* <span class="title">createCar</span><span class="params">(<span class="type">const</span> std::string&amp; name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Audi</span>(name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">Light* <span class="title">createLight</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">AudiLight</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 产品簇(有关联关系的系列产品)</span></span><br><span class="line">	<span class="function">std::unique_ptr&lt;AbstractFactory&gt; <span class="title">bmwFactory</span><span class="params">(<span class="keyword">new</span> BmwFactory)</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;AbstractFactory&gt; <span class="title">audiFactory</span><span class="params">(<span class="keyword">new</span> AudiFactory)</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Car&gt; <span class="title">p1</span><span class="params">(bmwFactory-&gt;createCar(<span class="string">&quot;X5&quot;</span>))</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Car&gt; <span class="title">p2</span><span class="params">(audiFactory-&gt;createCar(<span class="string">&quot;Q7&quot;</span>))</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Light&gt; <span class="title">p1Lighte</span><span class="params">(bmwFactory-&gt;createLight())</span></span>;</span><br><span class="line">	p1-&gt;<span class="built_in">show</span>();</span><br><span class="line">	p2-&gt;<span class="built_in">show</span>();</span><br><span class="line">	p1Lighte-&gt;<span class="built_in">show</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">简单工厂:将对象创建封装在一个接口函数里面,通过传入不同的标识,返回创建的对象。不符合开闭原则</span><br><span class="line">工厂方法:基类提供纯虚函数(创建产品),定义派生类(具体产品的工厂)创建具体的产品，可以扩展和修改，实际上很多产品是有关联的产品簇，且工厂类太多了。</span><br><span class="line">抽象工厂:把有关联关系的,属于一个产品簇的放在一个工厂里面。</span><br></pre></td></tr></table></figure>

<h5 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">代理模式proxy模式：通过代理类来控制实际对象的访问权限</span></span><br><span class="line"><span class="comment">客户	助理proxy	老板</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 基类(公共抽象类)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VidoSite</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">freeMovie</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">vipMovie</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ticketMovie</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 委托类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FixBugVideoSite</span>: <span class="keyword">public</span> VidoSite &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">freeMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;freeMovie&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">vipMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;vipMovie&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ticketMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;ticketMovie&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//代理类，代理FixBugVideoSite</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FreeVideoSiteProxy</span> : <span class="keyword">public</span> VidoSite &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">FreeVideoSiteProxy</span>() &#123;</span><br><span class="line">		vs = <span class="keyword">new</span> <span class="built_in">FixBugVideoSite</span>();</span><br><span class="line">	&#125;;</span><br><span class="line">	~<span class="built_in">FreeVideoSiteProxy</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> vs;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">freeMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		vs-&gt;<span class="built_in">freeMovie</span>();</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">vipMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;没有VIP权限&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ticketMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;没有优惠券了&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	VidoSite* vs;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VIPVideoSiteProxy</span> : <span class="keyword">public</span> VidoSite &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">VIPVideoSiteProxy</span>() &#123;</span><br><span class="line">		vs = <span class="keyword">new</span> <span class="built_in">FixBugVideoSite</span>();</span><br><span class="line">	&#125;;</span><br><span class="line">	~<span class="built_in">VIPVideoSiteProxy</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> vs;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">freeMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;VIP您好!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">vipMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;VIP您好!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ticketMovie</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;没有优惠券了&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	VidoSite* vs;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">watchMoive</span><span class="params">(<span class="type">const</span> std::unique_ptr&lt;VidoSite&gt; &amp;v1)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 通用的API接口</span></span><br><span class="line">	v1-&gt;<span class="built_in">freeMovie</span>();</span><br><span class="line">	v1-&gt;<span class="built_in">vipMovie</span>();</span><br><span class="line">	v1-&gt;<span class="built_in">ticketMovie</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;VidoSite&gt;  <span class="title">v1</span><span class="params">(<span class="keyword">new</span> FreeVideoSiteProxy())</span></span>;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;VidoSite&gt;  <span class="title">v2</span><span class="params">(<span class="keyword">new</span> VIPVideoSiteProxy())</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//需要权限鉴别</span></span><br><span class="line">	<span class="built_in">watchMoive</span>(v1);</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">	<span class="built_in">watchMoive</span>(v2);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">代理器模式:抽象类,委托类,代理类(持有委托类对象)   					解决委托类的权限问题</span><br><span class="line"></span><br><span class="line">装饰器:主要是增加现有类的功能。</span><br><span class="line">但是增加现有类的功能还有一个方法就是增加子类,但是代码中有太多的子类添加进来了。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">装饰器Decorator</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123; <span class="comment">// 抽象基类</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3个抽象基类。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bmw</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;这是宝马&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Audi</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;这是奥迪&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Benz</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;这是奔驰&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CarDecorator01</span> :<span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CarDecorator01</span>(Car * p):<span class="built_in">pcar</span>(p) &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		pcar-&gt;<span class="built_in">show</span>();</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;自动刹车&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CarDecorator01</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> pcar;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Car* pcar;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CarDecorator02</span> :<span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CarDecorator02</span>(Car* p) :<span class="built_in">pcar</span>(p) &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CarDecorator02</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> pcar;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		pcar-&gt;<span class="built_in">show</span>();</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;定速巡航&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Car* pcar;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Car* p1 = <span class="keyword">new</span> <span class="built_in">CarDecorator01</span>(<span class="keyword">new</span> <span class="built_in">Bmw</span>());</span><br><span class="line">	p1 = <span class="keyword">new</span> <span class="built_in">CarDecorator02</span>(p1);</span><br><span class="line">	Car* p2 = <span class="keyword">new</span> <span class="built_in">CarDecorator02</span>(<span class="keyword">new</span> <span class="built_in">Audi</span>());</span><br><span class="line">	p1-&gt;<span class="built_in">show</span>();</span><br><span class="line">	std::cout &lt;&lt; std::endl;</span><br><span class="line">	p2-&gt;<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这是宝马</span></span><br><span class="line"><span class="comment">自动刹车</span></span><br><span class="line"><span class="comment">定速巡航</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">这是奥迪</span></span><br><span class="line"><span class="comment">定速巡航</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">装饰器Decorator</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123; <span class="comment">// 抽象基类</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">virtual</span> ~<span class="built_in">Car</span>() = <span class="keyword">default</span>;  <span class="comment">// 添加虚析构函数,基类指针没有虚构函数会导致派生类不调用析构函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3个抽象基类。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bmw</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;这是宝马&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Audi</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;这是奥迪&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Benz</span> : <span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;这是奔驰&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CarDecorator01</span> :<span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CarDecorator01</span>(Car * p):<span class="built_in">pcar</span>(p) &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		pcar-&gt;<span class="built_in">show</span>();</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;自动刹车&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CarDecorator01</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> pcar;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Car* pcar;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CarDecorator02</span> :<span class="keyword">public</span> Car &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">CarDecorator02</span>(Car* p) :<span class="built_in">pcar</span>(p) &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	~<span class="built_in">CarDecorator02</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> pcar;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		pcar-&gt;<span class="built_in">show</span>();</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;定速巡航&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Car* pcar;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">std::unique_ptr&lt;Car&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> CarDecorator01(<span class="keyword">new</span> Bmw()))</span></span>;</span><br><span class="line">	p<span class="number">1.</span><span class="built_in">reset</span>(<span class="keyword">new</span> <span class="built_in">CarDecorator02</span>(p<span class="number">1.</span><span class="built_in">release</span>()));</span><br><span class="line">	p1-&gt;<span class="built_in">show</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这是宝马</span></span><br><span class="line"><span class="comment">自动刹车</span></span><br><span class="line"><span class="comment">定速巡航</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 适配器模式:让不兼容的接口可以在一起工作</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VGA</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HDMI</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TV01</span> :<span class="keyword">public</span> VGA &#123;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;TV01 VGA Singal&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TV02</span> :<span class="keyword">public</span> HDMI &#123;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;TV02 HDMI Singal&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 由于电脑只支持VGA接口,所以该方法的参数也只支持VGA</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">playVideo</span><span class="params">(VGA* vga)</span> </span>&#123;</span><br><span class="line">		vga-&gt;<span class="built_in">play</span>();</span><br><span class="line">		<span class="keyword">delete</span> vga;</span><br><span class="line">		vga = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Computer* cp1 = <span class="keyword">new</span> <span class="built_in">Computer</span>();</span><br><span class="line">	cp1-&gt;<span class="built_in">playVideo</span>(<span class="keyword">new</span> <span class="built_in">TV01</span>());</span><br><span class="line">	<span class="keyword">delete</span> cp1;</span><br><span class="line"></span><br><span class="line">	Computer* cp2 = <span class="keyword">new</span> <span class="built_in">Computer</span>();</span><br><span class="line">	<span class="comment">//  cp2-&gt;playVideo(new TV02()); // 不支持HDMI</span></span><br><span class="line">	<span class="comment">// 接口不兼容</span></span><br><span class="line">	<span class="keyword">delete</span> cp2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 适配器模式:让不兼容的接口可以在一起工作</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VGA</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HDMI</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TV01</span> :<span class="keyword">public</span> VGA &#123;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;TV01 VGA Singal&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TV02</span> :<span class="keyword">public</span> HDMI &#123;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;TV02 HDMI Singal&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VGAtoHDMI</span> :<span class="keyword">public</span> VGA&#123; <span class="comment">// 适配器</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">VGAtoHDMI</span>(HDMI* hdmi):_hdmi(hdmi) &#123;&#125;;</span><br><span class="line">	~<span class="built_in">VGAtoHDMI</span>() &#123;</span><br><span class="line">		<span class="keyword">delete</span> _hdmi;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		_hdmi-&gt;<span class="built_in">play</span>();</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	HDMI* _hdmi;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">// 由于电脑只支持VGA接口,所以该方法的参数也只支持VGA</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">playVideo</span><span class="params">(VGA* vga)</span> </span>&#123;</span><br><span class="line">		vga-&gt;<span class="built_in">play</span>();</span><br><span class="line">		<span class="keyword">delete</span> vga;</span><br><span class="line">		vga = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Computer</span>() &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Computer* cp1 = <span class="keyword">new</span> <span class="built_in">Computer</span>();</span><br><span class="line">	cp1-&gt;<span class="built_in">playVideo</span>(<span class="keyword">new</span> <span class="built_in">TV01</span>());</span><br><span class="line">	<span class="keyword">delete</span> cp1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//  cp2-&gt;playVideo(new TV02()); // 不支持HDMI</span></span><br><span class="line">	<span class="comment">// 接口不兼容</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		1.方法1:换电脑，进行代码重构</span></span><br><span class="line"><span class="comment">		2.方法2:买一个转换头,添加适配器</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	Computer* cp2 = <span class="keyword">new</span> <span class="built_in">Computer</span>();</span><br><span class="line">	cp2-&gt;<span class="built_in">playVideo</span>(<span class="keyword">new</span> <span class="built_in">VGAtoHDMI</span>(<span class="keyword">new</span> <span class="built_in">TV02</span>()));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span> cp2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 观察者/监听模式:主要关注对象之间的通信</span></span><br><span class="line"><span class="comment">* 即发布-订阅模式,主要关注的是一对多的关系</span></span><br><span class="line"><span class="comment">* 多个对象都依赖以一个对象,当该对象状态改变时,其他对象都能够收到响应通知。</span></span><br><span class="line"><span class="comment">* 当数据对象改变时,所有对象应该及时的收到相应的通知。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123; <span class="comment">// 观察者抽象类</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">handler</span><span class="params">(<span class="type">int</span> msgid)</span> </span>= <span class="number">0</span>; <span class="comment">//  处理消息的接口</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer1</span> :<span class="keyword">public</span> Observer &#123; <span class="comment">// 观察者1</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">handler</span><span class="params">(<span class="type">int</span> msgid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (msgid) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;Observer1 1类消息&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;Observer1 3类消息&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;Observer1 无法处理&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer2</span> :<span class="keyword">public</span> Observer &#123; <span class="comment">//  // 观察者2</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">handler</span><span class="params">(<span class="type">int</span> msgid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (msgid) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;Observer2 2类消息&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;无法处理&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer3</span> :<span class="keyword">public</span> Observer &#123;  <span class="comment">// 观察者3</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">handler</span><span class="params">(<span class="type">int</span> msgid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (msgid) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;Observer3 2类消息&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;Observer3 3类消息&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;无法处理&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span> &#123;  <span class="comment">// 主题检测</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">addObserver</span><span class="params">(Observer* obser, <span class="type">int</span> msgid)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//_subMap[msgid].push_back(obser);可以实现没有就插入有就不插入,功能如下使用</span></span><br><span class="line">		<span class="keyword">auto</span> it = _subMap.<span class="built_in">find</span>(msgid);</span><br><span class="line">		<span class="keyword">if</span> (it != _subMap.<span class="built_in">end</span>()) &#123;</span><br><span class="line">			it-&gt;second.<span class="built_in">push_back</span>(obser);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			std::list&lt;Observer*&gt; lst;</span><br><span class="line">			lst.<span class="built_in">push_back</span>(obser);</span><br><span class="line">			_subMap.<span class="built_in">insert</span>(&#123;msgid, lst&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">dispatch</span><span class="params">(<span class="type">int</span> msgid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">auto</span> it = _subMap.<span class="built_in">find</span>(msgid);</span><br><span class="line">		<span class="keyword">if</span> (it != _subMap.<span class="built_in">end</span>()) &#123;</span><br><span class="line">			<span class="keyword">for</span> (Observer* pobsever : it-&gt;second) &#123;</span><br><span class="line">				pobsever-&gt;<span class="built_in">handler</span>(msgid);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			std::cout &lt;&lt; <span class="string">&quot;未定义事件,不处理&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::unordered_map&lt;<span class="type">int</span>, std::list&lt;Observer*&gt;&gt; _subMap;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Subject* subject = <span class="keyword">new</span> <span class="built_in">Subject</span>();</span><br><span class="line">	subject-&gt;<span class="built_in">dispatch</span>(<span class="number">12</span>);</span><br><span class="line">	Observer* observer1 = <span class="keyword">new</span> Observer1;</span><br><span class="line">	Observer* observer2 = <span class="keyword">new</span> Observer2;</span><br><span class="line">	Observer* observer3 = <span class="keyword">new</span> Observer3;</span><br><span class="line">	subject-&gt;<span class="built_in">addObserver</span>(observer1,<span class="number">3</span>);</span><br><span class="line">	subject-&gt;<span class="built_in">addObserver</span>(observer3, <span class="number">3</span>);</span><br><span class="line">	subject-&gt;<span class="built_in">dispatch</span>(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="深度遍历搜索迷宫路径"><a href="#深度遍历搜索迷宫路径" class="headerlink" title="深度遍历搜索迷宫路径"></a>深度遍历搜索迷宫路径</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义迷宫每一个节点的四个方向</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> RIGHT = <span class="number">0</span>;<span class="comment">//右 </span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> DOWN = <span class="number">1</span>;<span class="comment">//下 </span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> LEFT = <span class="number">2</span>;<span class="comment">//左 </span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> UP = <span class="number">3</span>;<span class="comment">//上 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//迷宫每一个节点方向的数量</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> WAY_NUM = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义节点行走状态</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> YES = <span class="number">4</span>;<span class="comment">//当前方向可以走 </span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> NO = <span class="number">5</span>;<span class="comment">//当前方向不能走 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//迷宫</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Maze</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//初始化迷宫，根据用户输入的行列数，生成存储迷宫路径信息的二维数组</span></span><br><span class="line">	<span class="built_in">Maze</span>(<span class="type">int</span> row, <span class="type">int</span> col)</span><br><span class="line">		:_row(row)</span><br><span class="line">		, _col(col)</span><br><span class="line">	&#123;</span><br><span class="line">		_pMaze = <span class="keyword">new</span> Node * [_row];<span class="comment">//注意元素类型是Node </span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; _row; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			_pMaze[i] = <span class="keyword">new</span> Node[_col];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化迷宫路径节点信息</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">initNode</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		_pMaze[x][y]._x = x;</span><br><span class="line">		_pMaze[x][y]._y = y;</span><br><span class="line">		_pMaze[x][y]._val = val;</span><br><span class="line">		<span class="comment">//节点四个方向默认的初始化都为不能走 </span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; WAY_NUM; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			_pMaze[x][y]._state[i] = NO;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化迷宫0节点四个方向的行走状态信息 当前节点右下左上，如果是0，改成可以走 </span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setNodeState</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; _row; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; _col; ++j)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (_pMaze[i][j]._val == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">continue</span>;<span class="comment">//不用调整了，因为走不到值为1的节点 </span></span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="comment">//j不能取到最后一列，不然就判断越界了 </span></span><br><span class="line">				<span class="keyword">if</span> (j &lt; _col - <span class="number">1</span> &amp;&amp; _pMaze[i][j + <span class="number">1</span>]._val == <span class="number">0</span>)</span><br><span class="line">					<span class="comment">//逻辑&amp;，是先计算左边的表达式，左边如果是false，右边就不用计算了 </span></span><br><span class="line">				&#123;</span><br><span class="line">					_pMaze[i][j]._state[RIGHT] = YES;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (i &lt; _row - <span class="number">1</span> &amp;&amp; _pMaze[i + <span class="number">1</span>][j]._val == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					_pMaze[i][j]._state[DOWN] = YES;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="comment">//j不用取第一类，因为本身就不能走 </span></span><br><span class="line">				<span class="keyword">if</span> (j &gt; <span class="number">0</span> &amp;&amp; _pMaze[i][j - <span class="number">1</span>]._val == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					_pMaze[i][j]._state[LEFT] = YES;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; _pMaze[i - <span class="number">1</span>][j]._val == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					_pMaze[i][j]._state[UP] = YES;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//深度搜索迷宫路径</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">searchMazePath</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (_pMaze[<span class="number">0</span>][<span class="number">0</span>]._val == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		_stack.<span class="built_in">push</span>(_pMaze[<span class="number">0</span>][<span class="number">0</span>]);<span class="comment">//左上角节点入栈 </span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (!_stack.<span class="built_in">empty</span>())<span class="comment">//栈不为空 </span></span><br><span class="line">		&#123;</span><br><span class="line">			Node top = _stack.<span class="built_in">top</span>();</span><br><span class="line">			<span class="type">int</span> x = top._x;</span><br><span class="line">			<span class="type">int</span> y = top._y;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//已经找到右下角出口得迷宫路径</span></span><br><span class="line">			<span class="keyword">if</span> (x == _row - <span class="number">1</span> &amp;&amp; y == _col - <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//往右方向寻找</span></span><br><span class="line">			<span class="keyword">if</span> (_pMaze[x][y]._state[RIGHT] == YES)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._state[RIGHT] = NO;</span><br><span class="line">				_pMaze[x][y + <span class="number">1</span>]._state[LEFT] = NO;</span><br><span class="line">				_stack.<span class="built_in">push</span>(_pMaze[x][y + <span class="number">1</span>]);</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//往下方向寻找</span></span><br><span class="line">			<span class="keyword">if</span> (_pMaze[x][y]._state[DOWN] == YES)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._state[DOWN] = NO;</span><br><span class="line">				_pMaze[x + <span class="number">1</span>][y]._state[UP] = NO;</span><br><span class="line">				_stack.<span class="built_in">push</span>(_pMaze[x + <span class="number">1</span>][y]);</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//往左方向寻找</span></span><br><span class="line">			<span class="keyword">if</span> (_pMaze[x][y]._state[LEFT] == YES)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._state[LEFT] = NO;</span><br><span class="line">				_pMaze[x][y - <span class="number">1</span>]._state[RIGHT] = NO;</span><br><span class="line">				_stack.<span class="built_in">push</span>(_pMaze[x][y - <span class="number">1</span>]);</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//往上方向寻找</span></span><br><span class="line">			<span class="keyword">if</span> (_pMaze[x][y]._state[UP] == YES)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._state[UP] = NO;</span><br><span class="line">				_pMaze[x - <span class="number">1</span>][y]._state[DOWN] = NO;</span><br><span class="line">				_stack.<span class="built_in">push</span>(_pMaze[x - <span class="number">1</span>][y]);</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			_stack.<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//打印迷宫路径搜索结果</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showMazePath</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (_stack.<span class="built_in">empty</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;不存在一条迷宫路径！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">while</span> (!_stack.<span class="built_in">empty</span>())<span class="comment">//栈不为空，取出节点坐标，相应值调整为* </span></span><br><span class="line">			&#123;</span><br><span class="line">				Node top = _stack.<span class="built_in">top</span>();</span><br><span class="line">				_pMaze[top._x][top._y]._val = <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">				_stack.<span class="built_in">pop</span>();</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; _row; ++i)<span class="comment">//打印迷宫</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; _col; ++j)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">if</span> (_pMaze[i][j]._val == <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						cout &lt;&lt; <span class="string">&quot;* &quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						cout &lt;&lt; _pMaze[i][j]._val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				cout &lt;&lt; endl;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">//定义迷宫节点路径信息</span></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> _x;<span class="comment">//节点的横坐标 </span></span><br><span class="line">		<span class="type">int</span> _y;<span class="comment">//节点的纵坐标 </span></span><br><span class="line">		<span class="type">int</span> _val;<span class="comment">//节点的值</span></span><br><span class="line">		<span class="type">int</span> _state[WAY_NUM];<span class="comment">//记录节点四个方向的状态(左右上下)</span></span><br><span class="line">		<span class="comment">//4个元素位置(左右上下)，存储yes或者no </span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	Node** _pMaze;<span class="comment">//动态生成迷宫路径(动态开辟二维数组) </span></span><br><span class="line">	<span class="type">int</span> _row;<span class="comment">//迷宫的行 </span></span><br><span class="line">	<span class="type">int</span> _col;<span class="comment">//迷宫的列 </span></span><br><span class="line">	stack&lt;Node&gt; _stack;<span class="comment">//栈结构，辅助深度搜索迷宫路径</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入迷宫的行列数(例如：10 10):&quot;</span>;</span><br><span class="line">	<span class="type">int</span> row, col, data;</span><br><span class="line">	cin &gt;&gt; row &gt;&gt; col;</span><br><span class="line"></span><br><span class="line">	<span class="function">Maze <span class="title">maze</span><span class="params">(row, col)</span></span>;<span class="comment">//创建迷宫对象</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入迷宫的路径信息(0表示可以走，1表示不能走):&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; row; ++i)<span class="comment">//只能获取i,j和data值，节点的4个方向的行走状态还不能初始化 </span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; col; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			cin &gt;&gt; data;</span><br><span class="line">			<span class="comment">//可以初始化迷宫节点的基本信息</span></span><br><span class="line">			maze.<span class="built_in">initNode</span>(i, j, data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//开始设置所有节点的四个方向的状态</span></span><br><span class="line">	maze.<span class="built_in">setNodeState</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//开始从左上角搜索迷宫的路径信息了</span></span><br><span class="line">	maze.<span class="built_in">searchMazePath</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//打印迷宫路径搜索的结果</span></span><br><span class="line">	maze.<span class="built_in">showMazePath</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="广度优先搜索遍历寻找最短路径"><a href="#广度优先搜索遍历寻找最短路径" class="headerlink" title="广度优先搜索遍历寻找最短路径"></a>广度优先搜索遍历寻找最短路径</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">深度遍历:递归或者栈</span><br><span class="line"></span><br><span class="line">广度优先遍历:层层扩张(队列):把一个节点的四个方向全部走一遍,当把这个队列的开始的结点的四个方向里面所有元素遍历完后出队，四个方向都走(队列不记录路径信息只能找最短的路径,需要开辟额外的空间)</span><br><span class="line">使用二维数组记录,取最大值:row * col; 将一维数组映射到二维数组(x*rol + y;)</span><br><span class="line">从最后一个开始存,每个节点记录自己从哪里来的。</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义方向</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> RIGHT = <span class="number">0</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> DOWN = <span class="number">1</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> LEFT = <span class="number">2</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> UP = <span class="number">3</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> WAY_NUM = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义行走状态</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> YES = <span class="number">4</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> NO = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//迷宫</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Maze</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Maze</span>(<span class="type">int</span> row, <span class="type">int</span> col)</span><br><span class="line">		:_row(row)</span><br><span class="line">		, _col(col)</span><br><span class="line">	&#123;</span><br><span class="line">		_pMaze = <span class="keyword">new</span> Node*[_row];<span class="comment">//开辟迷宫二维数组 </span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; _row; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			_pMaze[i] = <span class="keyword">new</span> Node[_col];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//node._x*_row + node._y</span></span><br><span class="line">		_pPath.<span class="built_in">resize</span>(_row * _col);<span class="comment">//辅助数组开辟空间 </span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">initNode</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> val)</span><span class="comment">//初始化为No </span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		_pMaze[x][y]._x = x;</span><br><span class="line">		_pMaze[x][y]._y = y;</span><br><span class="line">		_pMaze[x][y]._val = val;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; WAY_NUM; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			_pMaze[x][y]._state[i] = NO;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setNodeState</span><span class="params">()</span><span class="comment">//设置迷宫行走状态 </span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; _row; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; _col; ++j)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (_pMaze[i][j]._val == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">continue</span>;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (j &lt; _col - <span class="number">1</span> &amp;&amp; _pMaze[i][j + <span class="number">1</span>]._val == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					_pMaze[i][j]._state[RIGHT] = YES;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (i &lt; _row - <span class="number">1</span> &amp;&amp; _pMaze[i + <span class="number">1</span>][j]._val == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					_pMaze[i][j]._state[DOWN] = YES;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (j &gt; <span class="number">0</span> &amp;&amp; _pMaze[i][j - <span class="number">1</span>]._val == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					_pMaze[i][j]._state[LEFT] = YES;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; _pMaze[i - <span class="number">1</span>][j]._val == <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					_pMaze[i][j]._state[UP] = YES;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">searchMazePath</span><span class="params">()</span><span class="comment">//广度优先遍历搜索 </span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (_pMaze[<span class="number">0</span>][<span class="number">0</span>]._val == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		_queue.<span class="built_in">push</span>(_pMaze[<span class="number">0</span>][<span class="number">0</span>]);<span class="comment">//入口节点入队 </span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (!_queue.<span class="built_in">empty</span>())<span class="comment">//队列不为空 </span></span><br><span class="line">		&#123;</span><br><span class="line">			Node front = _queue.<span class="built_in">front</span>();<span class="comment">//获取队头元素 </span></span><br><span class="line">			<span class="type">int</span> x = front._x;</span><br><span class="line">			<span class="type">int</span> y = front._y;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//右方向</span></span><br><span class="line">			<span class="keyword">if</span> (_pMaze[x][y]._state[RIGHT] == YES)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._state[RIGHT] = NO;</span><br><span class="line">				_pMaze[x][y + <span class="number">1</span>]._state[LEFT] = NO;</span><br><span class="line">				<span class="comment">//在辅助数组中记录一下节点的行走信息</span></span><br><span class="line">				_pPath[x*_row + y + <span class="number">1</span>] = _pMaze[x][y];</span><br><span class="line">				_queue.<span class="built_in">push</span>(_pMaze[x][y + <span class="number">1</span>]);</span><br><span class="line">				<span class="keyword">if</span> (<span class="built_in">check</span>(_pMaze[x][y + <span class="number">1</span>]))</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//下方向</span></span><br><span class="line">			<span class="keyword">if</span> (_pMaze[x][y]._state[DOWN] == YES)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._state[DOWN] = NO;</span><br><span class="line">				_pMaze[x + <span class="number">1</span>][y]._state[UP] = NO;</span><br><span class="line">				_pPath[(x + <span class="number">1</span>)*_row + y] = _pMaze[x][y];</span><br><span class="line">				_queue.<span class="built_in">push</span>(_pMaze[x + <span class="number">1</span>][y]);</span><br><span class="line">				<span class="keyword">if</span> (<span class="built_in">check</span>(_pMaze[x + <span class="number">1</span>][y]))</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//左方向</span></span><br><span class="line">			<span class="keyword">if</span> (_pMaze[x][y]._state[LEFT] == YES)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._state[LEFT] = NO;</span><br><span class="line">				_pMaze[x][y - <span class="number">1</span>]._state[RIGHT] = NO;</span><br><span class="line">				_pPath[x*_row + y - <span class="number">1</span>] = _pMaze[x][y];</span><br><span class="line">				_queue.<span class="built_in">push</span>(_pMaze[x][y - <span class="number">1</span>]);</span><br><span class="line">				<span class="keyword">if</span> (<span class="built_in">check</span>(_pMaze[x][y - <span class="number">1</span>]))</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//上方向</span></span><br><span class="line">			<span class="keyword">if</span> (_pMaze[x][y]._state[UP] == YES)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._state[UP] = NO;</span><br><span class="line">				_pMaze[x - <span class="number">1</span>][y]._state[DOWN] = NO;</span><br><span class="line">				_pPath[(x - <span class="number">1</span>)*_row + y] = _pMaze[x][y];</span><br><span class="line">				_queue.<span class="built_in">push</span>(_pMaze[x - <span class="number">1</span>][y]);</span><br><span class="line">				<span class="keyword">if</span> (<span class="built_in">check</span>(_pMaze[x - <span class="number">1</span>][y]))</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//当前节点出队列</span></span><br><span class="line">			_queue.<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showMazePath</span><span class="params">()</span><span class="comment">//打印迷宫 </span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (_queue.<span class="built_in">empty</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;不存在一条迷宫路径！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//回溯寻找迷宫路径节点</span></span><br><span class="line">			<span class="type">int</span> x = _row - <span class="number">1</span>;</span><br><span class="line">			<span class="type">int</span> y = _col - <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span> (;;)</span><br><span class="line">			&#123;</span><br><span class="line">				_pMaze[x][y]._val = <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">				<span class="keyword">if</span> (x == <span class="number">0</span> &amp;&amp; y == <span class="number">0</span>)</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				Node node = _pPath[x*_row + y];</span><br><span class="line">				x = node._x;</span><br><span class="line">				y = node._y;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; _row; ++i)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; _col; ++j)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">if</span> (_pMaze[i][j]._val == <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						cout &lt;&lt; <span class="string">&quot;* &quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						cout &lt;&lt; _pMaze[i][j]._val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				cout &lt;&lt; endl;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">//定义迷宫节点路径信息</span></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> _x;</span><br><span class="line">		<span class="type">int</span> _y;</span><br><span class="line">		<span class="type">int</span> _val;<span class="comment">//节点的值</span></span><br><span class="line">		<span class="type">int</span> _state[WAY_NUM];<span class="comment">//记录节点四个方向的状态</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//检查是否是右下角的迷宫出口节点</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(Node &amp;node)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> node._x == _row - <span class="number">1</span> &amp;&amp; node._y == _col - <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	Node **_pMaze;<span class="comment">//动态开辟二维数组 </span></span><br><span class="line">	<span class="type">int</span> _row;<span class="comment">//行 </span></span><br><span class="line">	<span class="type">int</span> _col;<span class="comment">//列 </span></span><br><span class="line">	queue&lt;Node&gt; _queue;<span class="comment">//广度遍历依赖的队列结构</span></span><br><span class="line">	vector&lt;Node&gt; _pPath;<span class="comment">//记录广度优先遍历时，节点的行走信息，辅助数组 </span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入迷宫的行列数(例如：10 10):&quot;</span>;</span><br><span class="line">	<span class="type">int</span> row, col, data;</span><br><span class="line">	cin &gt;&gt; row &gt;&gt; col;</span><br><span class="line"></span><br><span class="line">	<span class="function">Maze <span class="title">maze</span><span class="params">(row, col)</span></span>;<span class="comment">//创建迷宫对象</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请输入迷宫的路径信息(0表示可以走，1表示不能走):&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; row; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; col; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			cin &gt;&gt; data;</span><br><span class="line">			<span class="comment">//可以初始化迷宫节点的基本信息</span></span><br><span class="line">			maze.<span class="built_in">initNode</span>(i, j, data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//开始设置所有节点的四个方向的状态</span></span><br><span class="line">	maze.<span class="built_in">setNodeState</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//开始从左上角搜索迷宫的路径信息了</span></span><br><span class="line">	maze.<span class="built_in">searchMazePath</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//打印迷宫路径搜索的结果</span></span><br><span class="line">	maze.<span class="built_in">showMazePath</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="大数加减法"><a href="#大数加减法" class="headerlink" title="大数加减法"></a>大数加减法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用字符存储大的整数,因为整数有限。</span><br><span class="line">1.符号;</span><br><span class="line">2.头部去0</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BigIntStr</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">BigIntStr</span>(<span class="type">const</span> std::string&amp; str) </span><br><span class="line">	:_str(str)&#123;</span><br><span class="line">		length = str.<span class="built_in">length</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getLength</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> length;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">resize</span><span class="params">(<span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		_str = std::<span class="built_in">string</span>(size, <span class="string">&#x27;0&#x27;</span>) + _str;</span><br><span class="line">		length += size;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="function"><span class="type">const</span> std::string&amp; <span class="title">getStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _str;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	std::string _str;</span><br><span class="line">	<span class="type">int</span> length;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">makeSameLength</span><span class="params">(BigIntStr&amp; bis1, BigIntStr&amp; bis2)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 在常量对象上调用非常量成员函数是不允许的，而且待会要改</span></span><br><span class="line">	<span class="type">int</span> length1 = bis<span class="number">1.</span><span class="built_in">getLength</span>();</span><br><span class="line">	<span class="type">int</span> length2 = bis<span class="number">2.</span><span class="built_in">getLength</span>();</span><br><span class="line">	<span class="type">int</span> addsize = length1 - length2;</span><br><span class="line">	<span class="keyword">if</span> (addsize &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		bis<span class="number">2.</span><span class="built_in">resize</span>(addsize);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		bis<span class="number">1.</span><span class="built_in">resize</span>(-addsize);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> bis<span class="number">1.</span><span class="built_in">getLength</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	std::string str1 = &quot;1249&quot;;</span></span><br><span class="line"><span class="comment">	std::string str2 = &quot;27103&quot;;	</span></span><br><span class="line"><span class="comment">	std::string _result = &quot;28352&quot;;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	</span><br><span class="line">	std::string str1 = <span class="string">&quot;99999&quot;</span>;</span><br><span class="line">	std::string str2 = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">	std::string _result = <span class="string">&quot;100000&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">BigIntStr <span class="title">bis1</span><span class="params">(str1)</span></span>;</span><br><span class="line">	<span class="function">BigIntStr <span class="title">bis2</span><span class="params">(str2)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> length = <span class="built_in">makeSameLength</span>(bis1, bis2);</span><br><span class="line">	std::string result;</span><br><span class="line">	result.<span class="built_in">resize</span>(length<span class="number">+1</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; bis<span class="number">1.</span><span class="built_in">getStr</span>() &lt;&lt; std::endl;</span><br><span class="line">	std::cout&lt;&lt; bis<span class="number">2.</span><span class="built_in">getStr</span>() &lt;&lt; std::endl;</span><br><span class="line">	<span class="type">int</span> step = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> num1 = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> num2 = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> addnum = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = length; i &gt; <span class="number">-1</span>; --i) &#123;</span><br><span class="line">		<span class="keyword">if</span> (i<span class="number">-1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">			 num1 = bis<span class="number">1.</span><span class="built_in">getStr</span>()[i - <span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">			 num2 = bis<span class="number">2.</span><span class="built_in">getStr</span>()[i - <span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			num1 = num2 = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> temp = num1 + num2 + step;</span><br><span class="line">		<span class="keyword">if</span> (temp &lt; <span class="number">10</span>) &#123;</span><br><span class="line">			result[i] = temp + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">			step = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			addnum = temp % <span class="number">10</span>;</span><br><span class="line">			step = <span class="number">1</span>;</span><br><span class="line">			result[i] = addnum + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	std::cout &lt;&lt; result &lt;&lt; std::endl;</span><br><span class="line">	<span class="keyword">if</span> (result[<span class="number">0</span>] - <span class="string">&#x27;0&#x27;</span> == <span class="number">0</span>) &#123;</span><br><span class="line">		result.<span class="built_in">erase</span>(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	std::cout &lt;&lt; result &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="海量数据查重"><a href="#海量数据查重" class="headerlink" title="海量数据查重"></a>海量数据查重</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">海量数据的求TOP K和查重/去重。</span><br><span class="line">查重:</span><br><span class="line">	1.hash表(50亿个整数),空间换时间,费空间(5亿数据,5G，占用20+20=40G)</span><br><span class="line">	2.分治思想:</span><br><span class="line">	3.Bloom Filter:布隆过滤器</span><br><span class="line">	4.字符串类型:TireTree字典树(前缀树)</span><br></pre></td></tr></table></figure>

<h5 id="哈希表查重"><a href="#哈希表查重" class="headerlink" title="哈希表查重"></a>哈希表查重</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> size = <span class="number">1000</span>;</span><br><span class="line">	<span class="type">int</span> arr[size] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">		arr[i] = std::<span class="built_in">rand</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//在上面size上面数据中查找谁重复了</span></span><br><span class="line">	std::unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; imap;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> val: arr) &#123;</span><br><span class="line">		imap[val]++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> pair:imap) &#123;</span><br><span class="line">		<span class="keyword">if</span> (pair.second &gt; <span class="number">1</span>) &#123;</span><br><span class="line">			std::cout &lt;&lt; pair.first &lt;&lt; <span class="string">&quot;: &quot;</span>&lt;&lt;pair.second &lt;&lt; std::endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="分治思想"><a href="#分治思想" class="headerlink" title="分治思想"></a>分治思想</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">有一个文件有大量数据,有内存限制。将大文件划分为小文件,使得每个小文件都可以被加载到内存中</span><br><span class="line">大文件的内存 / 限制的内存  = 文件个数</span><br><span class="line">遍历大文件元素时,把每一个元素根据哈希映射函数,存放到对应序号的小文件中:</span><br><span class="line">	data % fileCount = file_index;</span><br><span class="line">值相同的,通过一样的哈希映射函数一定放在同一个小文件中。</span><br></pre></td></tr></table></figure>

<h5 id="布隆过滤器"><a href="#布隆过滤器" class="headerlink" title="布隆过滤器"></a>布隆过滤器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="海量数据求topK"><a href="#海量数据求topK" class="headerlink" title="海量数据求topK"></a>海量数据求topK</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">海量数据求topK问题:</span></span><br><span class="line"><span class="comment">1.求最大/最小的前K个元素</span></span><br><span class="line"><span class="comment">2.求最大/最小的第K个元素</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">解法:</span></span><br><span class="line"><span class="comment">1.大根堆/小根堆 (优先级队列prority_queue)</span></span><br><span class="line"><span class="comment">2.快排分割</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1000个整数,找值前10大的元素</span></span><br><span class="line"><span class="comment">先用前10个整数创建一个小根堆(最小值就在堆顶),然后遍历剩下的元素，</span></span><br><span class="line"><span class="comment">如果整数大于堆顶元素，删除堆顶元素(出堆),然后整数入堆，遍历完就是前10大的数</span></span><br><span class="line"><span class="comment">如果找的是第K小的(大根堆的堆顶)或第K大的(小根堆的堆顶)，只需要访问堆顶元素</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">大根堆=&gt; 找top K小的</span></span><br><span class="line"><span class="comment">小根堆=&gt; 找top K大的</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">快排分割:第k小的</span></span><br><span class="line"><span class="comment">比如数列: 16 23 5 13 67 32 41 45</span></span><br><span class="line"><span class="comment">求第4小的？把23拿出来,比23小的放左边，比23大的放右边，</span></span><br><span class="line"><span class="comment">所以:16 5 13 23 67 32 41 45 所以23是第四小的</span></span><br><span class="line"><span class="comment">经过快排分割函数，能够在o(lgn)时间内,把小于基准数的整数移到左边，把大于基准数的</span></span><br><span class="line"><span class="comment">函数调整到右边，基准数(index)就是第index+1个最小的数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">如果有一个大文件,里面放的是整数,内存限制200M，求前10大的数</span></span><br><span class="line"><span class="comment">	先分割成小文件，哈希映射出index,再求topK</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;你好&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="海量数据的综合运用"><a href="#海量数据的综合运用" class="headerlink" title="海量数据的综合运用"></a>海量数据的综合运用</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">海量数据求查重和topK问题:</span></span><br><span class="line"><span class="comment">查重:数据是否有重复以及重复的次数</span></span><br><span class="line"><span class="comment">topK:元素的值前K大/小，第K大/小</span></span><br><span class="line"><span class="comment">题目:求重复次数最大/最小的数据的的前K个或者第K个</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">哈希统计(map) + 堆/快排分割</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">有一个大文件，内存限制400M,求重复次数最大/最小的数据的的前K个或者第K个</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;你好&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="使用mark-shared替代shared-ptr"><a href="#使用mark-shared替代shared-ptr" class="headerlink" title="使用mark_shared替代shared_ptr"></a>使用mark_shared替代shared_ptr</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">智能指针:</span><br><span class="line">	unique_ptr</span><br><span class="line">	</span><br><span class="line">	shared_ptr / weak_ptr</span><br><span class="line">	</span><br><span class="line">C++11提供了make_shared</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Test</span>() &#123;&#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">std::shared_ptr&lt;<span class="type">int</span>&gt; <span class="title">spi1</span><span class="params">(<span class="keyword">new</span> <span class="type">int</span>(<span class="number">10</span>))</span></span>;</span><br><span class="line">	<span class="function">std::shared_ptr&lt;Test&gt; <span class="title">spt1</span><span class="params">(<span class="keyword">new</span> Test())</span></span>;</span><br><span class="line">	<span class="comment">/* spi1内存</span></span><br><span class="line"><span class="comment">			int* ptr;	ptr指向new int(10)</span></span><br><span class="line"><span class="comment">			RefCnt* ref; ref指向的东西包括uses和weaks(如果shared_ptr对象生成失败了，资源泄漏就有风险)</span></span><br><span class="line"><span class="comment">			存在缺陷，开辟了两块内存,</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	std::shared_ptr&lt;<span class="type">int</span>&gt; spi2 = std::<span class="built_in">make_shared</span>&lt;<span class="type">int</span>&gt;(<span class="number">10</span>);</span><br><span class="line">	*spi2 = <span class="number">20</span>;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		spi2的内存:</span></span><br><span class="line"><span class="comment">			int *ptr:</span></span><br><span class="line"><span class="comment">			RefCnt *ref:</span></span><br><span class="line"><span class="comment">			makeshared_ptr将需要托管的内存资源和存储引用计数的内存资源一起开辟在一块内存上。</span></span><br><span class="line"><span class="comment">			开辟了一块内存,要么都成功，要么都失败。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			优点:</span></span><br><span class="line"><span class="comment">				1.内存分配效率高</span></span><br><span class="line"><span class="comment">				2.防止资源泄漏的风险</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			缺点:</span></span><br><span class="line"><span class="comment">				1.无法自定义删除器(处理不了文件)</span></span><br><span class="line"><span class="comment">				2.导致托管的资源延迟释放(因为开辟在同一块内存上，即使没有shared_ptr使用资源依旧不能释放)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">auto</span> spi3 = std::<span class="built_in">make_shared</span>&lt;<span class="type">int</span>&gt;(<span class="number">20</span>);</span><br><span class="line">	<span class="function"><span class="keyword">auto</span> <span class="title">spi4</span><span class="params">(std::make_shared&lt;Test&gt;(<span class="number">20</span>))</span></span>;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	unique_ptr</span></span><br><span class="line"><span class="comment">	C++14 make_uniqued</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="C-STL容器的emplace"><a href="#C-STL容器的emplace" class="headerlink" title="C++STL容器的emplace"></a>C++STL容器的emplace</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a,<span class="type">int</span> b) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int, int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(const Test&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(Test&amp;&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(Test&amp;&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Test <span class="title">t1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">	std::vector&lt;Test&gt; vect;</span><br><span class="line">	vect.<span class="built_in">reserve</span>(<span class="number">10</span>);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	vect.<span class="built_in">push_back</span>(t1); <span class="comment">// 左值的拷贝构造</span></span><br><span class="line">	vect.<span class="built_in">emplace_back</span>(t1);<span class="comment">// 左值的拷贝构造</span></span><br><span class="line"><span class="comment">/* 插入已经存在的对象两个没有区别</span></span><br><span class="line"><span class="comment">Test(int)</span></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"><span class="comment">Test(const Test&amp;)</span></span><br><span class="line"><span class="comment">Test(const Test&amp;)</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a,<span class="type">int</span> b) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int, int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(const Test&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(Test&amp;&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(Test&amp;&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Test <span class="title">t1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">	std::vector&lt;Test&gt; vect;</span><br><span class="line">	vect.<span class="built_in">reserve</span>(<span class="number">10</span>);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	vect.<span class="built_in">push_back</span>(<span class="built_in">Test</span>(<span class="number">10</span>)); <span class="comment">// 存放临时对象,右值拷贝构造</span></span><br><span class="line">	vect.<span class="built_in">emplace_back</span>(<span class="built_in">Test</span>(<span class="number">10</span>));<span class="comment">// 存放临时对象,右值拷贝构造</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	插入临时对象和普通对象二者没有区别</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a,<span class="type">int</span> b) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int, int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(const Test&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(Test&amp;&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(Test&amp;&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;Test&gt; vect;</span><br><span class="line">	vect.<span class="built_in">reserve</span>(<span class="number">10</span>);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	vect.<span class="built_in">push_back</span>(<span class="number">10</span>); <span class="comment">// 右值的拷贝构造</span></span><br><span class="line">	vect.<span class="built_in">emplace_back</span>(<span class="number">10</span>); <span class="comment">// 只传入所需对象的参数即可</span></span><br><span class="line">	vect.<span class="built_in">emplace_back</span>(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Test(int): 临时对象Test(10)</span></span><br><span class="line"><span class="comment">Test(Test&amp;&amp;): 对临时对象拷贝</span></span><br><span class="line"><span class="comment">~Test(): 析构临时对象</span></span><br><span class="line"><span class="comment">Test(int): 直接调用构造函数</span></span><br><span class="line"><span class="comment">Test(int, int): 直接调用构造函数</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;int, std::string&gt; m;</span><br><span class="line">m.emplace_back(std::make_paired(10,&quot;zxx&quot;))</span><br><span class="line">改为</span><br><span class="line">m.emplace_back(10,&quot;zxx&quot;);</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a,<span class="type">int</span> b) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int, int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(const Test&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(Test&amp;&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(Test&amp;&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	std::vector&lt;Test&gt; vect;</span><br><span class="line">	vect.<span class="built_in">reserve</span>(<span class="number">10</span>);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	vect.<span class="built_in">push_back</span>(<span class="number">10</span>); <span class="comment">// 右值的拷贝构造</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		push_back这里只能接受一个对象或者可以调用 Test(int) 构造函数的单个参数</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	vect.<span class="built_in">emplace_back</span>(<span class="number">10</span>);</span><br><span class="line">	vect.<span class="built_in">emplace_back</span>(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Test(int): 临时对象Test(10)</span></span><br><span class="line"><span class="comment">Test(Test&amp;&amp;): 对临时对象拷贝</span></span><br><span class="line"><span class="comment">~Test(): 析构临时对象</span></span><br><span class="line"><span class="comment">Test(int): 直接调用构造函数</span></span><br><span class="line"><span class="comment">Test(int, int): 直接调用构造函数</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">~Test()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MyAllocator</span> &#123;</span><br><span class="line">	<span class="function">T* <span class="title">allocate</span><span class="params">(<span class="type">size_t</span> size)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (T*)<span class="built_in">malloc</span>(size * <span class="built_in">sizeof</span>(T));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Types&gt;</span></span><br><span class="line"><span class="function">	<span class="type">void</span> <span class="title">construct</span><span class="params">(T* ptr, Types&amp;&amp;... args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> (ptr)<span class="built_in">T</span>(std::forward&lt;Types&gt;(args)...);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T,<span class="keyword">typename</span> Alloc = MyAllocator&lt;T&gt;&gt;</span><br><span class="line"><span class="keyword">class</span> MyVector &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">MyVector</span>()</span><br><span class="line">		:_vec(<span class="literal">nullptr</span>), _size(<span class="number">0</span>), _index(<span class="number">0</span>) &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">void</span> <span class="built_in">reserve</span>(<span class="type">size_t</span> size) &#123;</span><br><span class="line">		_vec = _allocator.<span class="built_in">allocate</span>(size);</span><br><span class="line">		_size = size;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//push_back</span></span><br><span class="line">	<span class="comment">// T是Test，容器已经指定了，会发生构造所以会调用构造函数</span></span><br><span class="line">	<span class="comment">/*void push_back(const T&amp; val) &#123;  </span></span><br><span class="line"><span class="comment">		_allocator.construct(_vec + _index, val);</span></span><br><span class="line"><span class="comment">		_index++;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	void push_back(T&amp;&amp; val) &#123;</span></span><br><span class="line"><span class="comment">		_allocator.construct(_vec+_index, std::move(val));</span></span><br><span class="line"><span class="comment">		_index++;</span></span><br><span class="line"><span class="comment">	&#125;*/</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">template</span>&lt;<span class="keyword">typename</span> Types&gt;</span><br><span class="line">	<span class="comment">// Types是传入的参数的数据类型</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">push_back</span><span class="params">(Types&amp;&amp; val)</span> </span>&#123;</span><br><span class="line">		_allocator.<span class="built_in">construct</span>(_vec + _index, std::forward&lt;Types&gt;(val));</span><br><span class="line">		_index++; <span class="comment">// 实现和</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// emplace_back</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	引用折叠:</span></span><br><span class="line"><span class="comment">		Types&amp;&amp;... args,如果实参是左值，那形参也是左值，如果是右值，那形参也是右值</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Types&gt;</span></span><br><span class="line"><span class="function">	<span class="type">void</span> <span class="title">emplace_back</span><span class="params">(Types&amp;&amp;... args)</span> </span>&#123;<span class="comment">//可以自动推导左值还是右值</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//不管是左值引用变量还是右值引用变量的本质还是一个左值，需要保持args的引用类型,使用类型完美转发</span></span><br><span class="line">		_allocator.<span class="built_in">construct</span>(_vec + _index,std::forward&lt;Types&gt; (args)...);</span><br><span class="line">		_index++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	T* _vec;</span><br><span class="line">	<span class="type">int</span> _size;</span><br><span class="line">	<span class="type">int</span> _index;</span><br><span class="line">	Alloc _allocator;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">int</span> a,<span class="type">int</span> b) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(int, int)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(<span class="type">const</span> Test&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(const Test&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	<span class="built_in">Test</span>(Test&amp;&amp;) &#123; std::cout &lt;&lt; <span class="string">&quot;Test(Test&amp;&amp;)&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">	~<span class="built_in">Test</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	MyVector&lt;Test&gt; vect;</span><br><span class="line">	vect.<span class="built_in">reserve</span>(<span class="number">10</span>);</span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;------&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	vect.<span class="built_in">push_back</span>(<span class="number">10</span>); </span><br><span class="line">	vect.<span class="built_in">emplace_back</span>(<span class="number">10</span>);</span><br><span class="line">	vect.<span class="built_in">emplace_back</span>(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2026/01/10/cpp%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/">http://example.com/2026/01/10/cpp%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/01/10/unity/" title="unity"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">unity</div></div><div class="info-2"><div class="info-item-1">unity安装121.安装unityhub(长期支持版本LTS),unityHub管理unity版本2.安装unity编辑器LTS版本,勾选安卓和ios支持,文档和简体中文  项目文件夹1234567Assets:工程文件资源文件夹,存放美术音频资源和脚本等(最重要的文件夹)Library: 库文件夹,unity自动管理Logs: 日志文件夹,unity自动管理obj: 编译产生的中间文件Packages: 包文件夹,unity自动管理ProjectSetting: 工程设置文件夹,unity自动管理UserSetting: 用户设置文件夹,  unity界面窗口12345678910111213141516171819202122232425262728293031layout选择(左上角): 2 by 3hierarchy(层级窗口): 包含一个场景中的所有对象，创建对象，管理对象。 scene(场景窗口): 物体位置的旋转和缩放 1.渲染方式: 着色器模式, 面片... 2.视图模式: 2D视图, 3D视图 3.是否开启光源,音效特效等, 4.辅助线显示 5.辅助功能 6....</div></div></div></a><a class="pagination-related" href="/2026/01/10/csharp/" title="csharp"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">csharp</div></div><div class="info-2"><div class="info-item-1">环境安装1vs中安装C#,unity,vs扩展  注释123// 一行注释/* 多行注释 *////:三杆注释会自动补全  1234567891011121314151617181920namespace ConsoleApp1&#123;    /// &lt;summary&gt;    ///     /// &lt;/summary&gt;    ///     /*     多行注释     */    internal class Program    &#123;        static void Main(string[] args)        &#123;            int a = 10;            //注释            Console.WriteLine(a);        &#125;    &#125;&#125;  代码块12345678910111213141516using system; // vs2026默认自动使用了namespace ConsoleApp1 // 工具包&#123;    //命名空...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">John Doe</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">C++核心编程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.</span> <span class="toc-text">内存分区模型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8C%BA"><span class="toc-number">1.2.</span> <span class="toc-text">代码区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#new"><span class="toc-number">1.3.</span> <span class="toc-text">new</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">引用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F%E5%BC%95%E7%94%A8"><span class="toc-number">1.5.</span> <span class="toc-text">常量引用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">1.6.</span> <span class="toc-text">函数默认值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8D%A0%E4%BD%8D%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.</span> <span class="toc-text">函数占位参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD"><span class="toc-number">1.8.</span> <span class="toc-text">函数重载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.9.</span> <span class="toc-text">类与对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-number">1.10.</span> <span class="toc-text">封装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%83%E9%99%90"><span class="toc-number">1.11.</span> <span class="toc-text">权限</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#struct%E5%92%8Cclass%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.12.</span> <span class="toc-text">struct和class的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#private"><span class="toc-number">1.13.</span> <span class="toc-text">private</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E5%88%86%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="toc-number">1.14.</span> <span class="toc-text">类的分文件编写</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.15.</span> <span class="toc-text">构造函数和析构函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB%E4%B8%8E%E8%B0%83%E7%94%A8"><span class="toc-number">1.16.</span> <span class="toc-text">构造函数的分类与调用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E8%B0%83%E7%94%A8%E6%97%B6%E6%9C%BA"><span class="toc-number">1.17.</span> <span class="toc-text">拷贝构造函数的调用时机</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E8%B0%83%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">1.18.</span> <span class="toc-text">构造函数的调用规则</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">1.19.</span> <span class="toc-text">深拷贝和浅拷贝</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%88%97%E8%A1%A8"><span class="toc-number">1.20.</span> <span class="toc-text">初始化列表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E7%B1%BB%E7%9A%84%E6%88%90%E5%91%98"><span class="toc-number">1.21.</span> <span class="toc-text">类对象作为类的成员</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"><span class="toc-number">1.22.</span> <span class="toc-text">静态成员</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E5%92%8C%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E5%88%86%E5%BC%80%E5%AD%98%E5%82%A8"><span class="toc-number">1.23.</span> <span class="toc-text">成员变量和成员函数分开存储</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#this%E6%8C%87%E9%92%88"><span class="toc-number">1.24.</span> <span class="toc-text">this指针</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A9%BA%E6%8C%87%E9%92%88%E6%9D%A5%E8%AE%BF%E9%97%AE%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">1.25.</span> <span class="toc-text">使用空指针来访问成员函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#const%E4%BF%AE%E9%A5%B0%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">1.26.</span> <span class="toc-text">const修饰成员函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8B%E5%85%83"><span class="toc-number">1.27.</span> <span class="toc-text">友元</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E5%81%9A%E5%8F%8B%E5%85%83"><span class="toc-number">1.28.</span> <span class="toc-text">类做友元</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E5%81%9A%E5%8F%8B%E5%85%83"><span class="toc-number">1.29.</span> <span class="toc-text">成员函数做友元</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">1.30.</span> <span class="toc-text">运算符重载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%B7%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">1.31.</span> <span class="toc-text">+号运算符重载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A6%E7%A7%BB%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">1.32.</span> <span class="toc-text">左移运算符重载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%A2%9E%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">1.33.</span> <span class="toc-text">自增运算符重载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">1.34.</span> <span class="toc-text">赋值运算符重载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E5%9C%A8"><span class="toc-number">1.35.</span> <span class="toc-text">关系运算符重在</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">1.36.</span> <span class="toc-text">函数调用运算符重载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">1.37.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F"><span class="toc-number">1.38.</span> <span class="toc-text">继承方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E4%B8%AD%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.39.</span> <span class="toc-text">继承中构造和析构的顺序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E4%B8%AD%E5%90%8C%E5%90%8D%E7%9A%84%E6%88%90%E5%91%98%E5%A4%84%E7%90%86"><span class="toc-number">1.40.</span> <span class="toc-text">继承中同名的成员处理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E4%B8%AD%E9%9D%99%E6%80%81%E5%90%8C%E5%90%8D%E5%B1%9E%E6%80%A7"><span class="toc-number">1.41.</span> <span class="toc-text">继承中静态同名属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E7%BB%A7%E6%89%BF%E8%AF%AD%E6%B3%95"><span class="toc-number">1.42.</span> <span class="toc-text">多继承语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8F%B1%E5%BD%A2%E7%BB%A7%E6%89%BF"><span class="toc-number">1.43.</span> <span class="toc-text">菱形继承</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E6%80%81"><span class="toc-number">1.44.</span> <span class="toc-text">多态</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%A4%9A%E6%80%81%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">1.45.</span> <span class="toc-text">动态多态的原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E6%80%81%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">1.46.</span> <span class="toc-text">多态的好处</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0%E5%92%8C%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">1.47.</span> <span class="toc-text">纯虚函数和抽象类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E6%9E%90%E6%9E%84%E5%92%8C%E7%BA%AF%E8%99%9A%E6%9E%90%E6%9E%84"><span class="toc-number">1.48.</span> <span class="toc-text">虚析构和纯虚析构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">1.49.</span> <span class="toc-text">文件操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E5%86%99%E6%96%87%E4%BB%B6"><span class="toc-number">1.50.</span> <span class="toc-text">文本写文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E8%AF%BB%E6%96%87%E4%BB%B6"><span class="toc-number">1.51.</span> <span class="toc-text">文本读文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%86%99%E6%96%87%E4%BB%B6"><span class="toc-number">1.52.</span> <span class="toc-text">二进制写文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%AF%BB%E6%96%87%E4%BB%B6"><span class="toc-number">1.53.</span> <span class="toc-text">二进制读文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.54.</span> <span class="toc-text">模板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.55.</span> <span class="toc-text">函数模板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0%E5%92%8C%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.56.</span> <span class="toc-text">普通函数和函数模板的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0%E4%B8%8E%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E7%9A%84%E8%B0%83%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">1.57.</span> <span class="toc-text">普通函数与函数模板的调用规则</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7"><span class="toc-number">1.58.</span> <span class="toc-text">函数模板的局限性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.59.</span> <span class="toc-text">类模板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E5%92%8C%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.60.</span> <span class="toc-text">类模板和函数模板的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%9B%E5%BB%BA%E6%97%B6%E6%9C%BA"><span class="toc-number">1.61.</span> <span class="toc-text">类模板中的成员函数的创建时机</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E5%AF%B9%E8%B1%A1%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">1.62.</span> <span class="toc-text">类模板对象做函数参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%BB%A7%E6%89%BF"><span class="toc-number">1.63.</span> <span class="toc-text">类模板和继承</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E7%9A%84%E7%B1%BB%E5%A4%96%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.64.</span> <span class="toc-text">类模板成员函数的类外实现</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6%E5%88%86%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="toc-number">1.65.</span> <span class="toc-text">类模板文件分文件编写</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E5%8F%8B%E5%85%83"><span class="toc-number">1.66.</span> <span class="toc-text">类模板与友元</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%81%E4%BD%8F%E6%95%B0%E7%BB%84%E7%B1%BB"><span class="toc-number">1.67.</span> <span class="toc-text">封住数组类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#STL%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.68.</span> <span class="toc-text">STL基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector"><span class="toc-number">1.69.</span> <span class="toc-text">vector</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector%E5%AD%98%E6%94%BE%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.70.</span> <span class="toc-text">vector存放自定义数据类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E4%B8%AD%E5%B5%8C%E5%A5%97%E5%AE%B9%E5%99%A8"><span class="toc-number">1.71.</span> <span class="toc-text">容器中嵌套容器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#string"><span class="toc-number">1.72.</span> <span class="toc-text">string</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#string%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.73.</span> <span class="toc-text">string构造函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#string%E8%B5%8B%E5%80%BC"><span class="toc-number">1.74.</span> <span class="toc-text">string赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#string%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5"><span class="toc-number">1.75.</span> <span class="toc-text">string字符串拼接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#string%E6%9F%A5%E6%89%BE%E5%92%8C%E6%9B%BF%E6%8D%A2"><span class="toc-number">1.76.</span> <span class="toc-text">string查找和替换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="toc-number">1.77.</span> <span class="toc-text">字符串比较</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%AD%98%E5%8F%96"><span class="toc-number">1.78.</span> <span class="toc-text">字符存取</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%8F%92%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA"><span class="toc-number">1.79.</span> <span class="toc-text">字符插入和输出</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#string%E5%AD%90%E4%B8%B2"><span class="toc-number">1.80.</span> <span class="toc-text">string子串</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector-1"><span class="toc-number">1.81.</span> <span class="toc-text">vector</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.82.</span> <span class="toc-text">vector的构造函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector%E8%B5%8B%E5%80%BC"><span class="toc-number">1.83.</span> <span class="toc-text">vector赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector%E5%A4%A7%E5%B0%8F"><span class="toc-number">1.84.</span> <span class="toc-text">vector大小</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector%E6%8F%92%E5%85%A5%E5%92%8C%E5%88%A0%E9%99%A4"><span class="toc-number">1.85.</span> <span class="toc-text">vector插入和删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector%E6%95%B0%E6%8D%AE%E5%AD%98%E5%8F%96"><span class="toc-number">1.86.</span> <span class="toc-text">vector数据存取</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector%E4%BA%92%E6%8D%A2%E5%AE%B9%E5%99%A8"><span class="toc-number">1.87.</span> <span class="toc-text">vector互换容器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vector%E9%A2%84%E7%95%99%E7%A9%BA%E9%97%B4"><span class="toc-number">1.88.</span> <span class="toc-text">vector预留空间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#deque%E5%AE%B9%E5%99%A8"><span class="toc-number">1.89.</span> <span class="toc-text">deque容器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#deque%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.90.</span> <span class="toc-text">deque构造函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#deque%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.91.</span> <span class="toc-text">deque赋值操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#deque%E5%AE%B9%E5%99%A8%E7%9A%84%E5%A4%A7%E5%B0%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">1.92.</span> <span class="toc-text">deque容器的大小操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#deque%E6%8F%92%E5%85%A5%E5%92%8C%E5%88%A0%E9%99%A4"><span class="toc-number">1.93.</span> <span class="toc-text">deque插入和删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#deque%E6%95%B0%E6%8D%AE%E5%AD%98%E5%8F%96"><span class="toc-number">1.94.</span> <span class="toc-text">deque数据存取</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#deque%E6%8E%92%E5%BA%8F"><span class="toc-number">1.95.</span> <span class="toc-text">deque排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">1.96.</span> <span class="toc-text">练习</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#stack%E5%AE%B9%E5%99%A8"><span class="toc-number">1.97.</span> <span class="toc-text">stack容器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#queue%E5%AE%B9%E5%99%A8"><span class="toc-number">1.98.</span> <span class="toc-text">queue容器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#list%E5%AE%B9%E5%99%A8"><span class="toc-number">1.99.</span> <span class="toc-text">list容器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#list%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.100.</span> <span class="toc-text">list构造函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#list%E8%B5%8B%E5%80%BC%E5%92%8C%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.101.</span> <span class="toc-text">list赋值和交换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#list%E5%A4%A7%E5%B0%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">1.102.</span> <span class="toc-text">list大小操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#list%E6%8F%92%E5%85%A5%E5%92%8C%E5%88%A0%E9%99%A4"><span class="toc-number">1.103.</span> <span class="toc-text">list插入和删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#list%E6%95%B0%E6%8D%AE%E5%AD%98%E5%8F%96"><span class="toc-number">1.104.</span> <span class="toc-text">list数据存取</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#list%E5%8F%8D%E8%BD%AC%E5%92%8C%E6%8E%92%E5%BA%8F"><span class="toc-number">1.105.</span> <span class="toc-text">list反转和排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set%E5%92%8Cmutiset%E5%AE%B9%E5%99%A8"><span class="toc-number">1.106.</span> <span class="toc-text">set和mutiset容器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9E%84%E9%80%A0%E5%92%8C%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.107.</span> <span class="toc-text">set容器的构造和赋值操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set%E7%9A%84%E5%A4%A7%E5%B0%8F%E6%93%8D%E4%BD%9C%E5%92%8C%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.108.</span> <span class="toc-text">set的大小操作和交换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set%E6%8F%92%E5%85%A5%E4%B8%8E%E5%88%A0%E9%99%A4"><span class="toc-number">1.109.</span> <span class="toc-text">set插入与删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9F%A5%E6%89%BE%E5%92%8C%E7%BB%9F%E8%AE%A1"><span class="toc-number">1.110.</span> <span class="toc-text">set容器的查找和统计</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set%E5%92%8Cmultiset%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.111.</span> <span class="toc-text">set和multiset的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#pair%E5%AF%B9%E7%BB%84%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.112.</span> <span class="toc-text">pair对组的创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set%E5%AE%B9%E5%99%A8%E7%9A%84%E6%8E%92%E5%BA%8F"><span class="toc-number">1.113.</span> <span class="toc-text">set容器的排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map%E5%92%8Cmultimap"><span class="toc-number">1.114.</span> <span class="toc-text">map和multimap</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E8%B5%8B%E5%80%BC"><span class="toc-number">1.115.</span> <span class="toc-text">map的构造函数和赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map%E5%AE%B9%E5%99%A8%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%92%8C%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.116.</span> <span class="toc-text">map容器的大小和交换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map%E7%9A%84%E6%8F%92%E5%85%A5%E5%92%8C%E5%88%A0%E9%99%A4"><span class="toc-number">1.117.</span> <span class="toc-text">map的插入和删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map%E5%AE%B9%E5%99%A8%E7%9A%84%E7%BB%9F%E8%AE%A1%E5%92%8C%E6%9F%A5%E6%89%BE"><span class="toc-number">1.118.</span> <span class="toc-text">map容器的统计和查找</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map%E6%8E%92%E5%BA%8F"><span class="toc-number">1.119.</span> <span class="toc-text">map排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.120.</span> <span class="toc-text">函数对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%93%E8%AF%8D"><span class="toc-number">1.121.</span> <span class="toc-text">谓词</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.122.</span> <span class="toc-text">内建函数对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E4%BB%BF%E5%87%BD%E6%95%B0"><span class="toc-number">1.123.</span> <span class="toc-text">算术仿函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E4%BB%BF%E5%87%BD%E6%95%B0"><span class="toc-number">1.124.</span> <span class="toc-text">关系仿函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E4%BB%BF%E5%87%BD%E6%95%B0"><span class="toc-number">1.125.</span> <span class="toc-text">逻辑仿函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95"><span class="toc-number">1.126.</span> <span class="toc-text">常用算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E7%AE%97%E6%B3%95"><span class="toc-number">1.127.</span> <span class="toc-text">遍历算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#for-each"><span class="toc-number">1.128.</span> <span class="toc-text">for_each</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#transform"><span class="toc-number">1.129.</span> <span class="toc-text">transform</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95"><span class="toc-number">1.130.</span> <span class="toc-text">常用的查找算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#find"><span class="toc-number">1.131.</span> <span class="toc-text">find</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#find-if"><span class="toc-number">1.132.</span> <span class="toc-text">find_if</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#adjacent-find"><span class="toc-number">1.133.</span> <span class="toc-text">adjacent_find</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#binary-search"><span class="toc-number">1.134.</span> <span class="toc-text">binary_search</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#count"><span class="toc-number">1.135.</span> <span class="toc-text">count</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#count-if"><span class="toc-number">1.136.</span> <span class="toc-text">count_if</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95"><span class="toc-number">1.137.</span> <span class="toc-text">常用排序算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sort"><span class="toc-number">1.138.</span> <span class="toc-text">sort</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#random-shuffle"><span class="toc-number">1.139.</span> <span class="toc-text">random_shuffle</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#merge"><span class="toc-number">1.140.</span> <span class="toc-text">merge</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#reverse"><span class="toc-number">1.141.</span> <span class="toc-text">reverse</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95"><span class="toc-number">1.142.</span> <span class="toc-text">常用的拷贝和替换算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#copy"><span class="toc-number">1.143.</span> <span class="toc-text">copy</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#replace"><span class="toc-number">1.144.</span> <span class="toc-text">replace</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#replace-if"><span class="toc-number">1.145.</span> <span class="toc-text">replace_if</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#swap"><span class="toc-number">1.146.</span> <span class="toc-text">swap</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E7%AE%97%E6%9C%AF%E7%94%9F%E6%88%90%E7%AE%97%E6%B3%95"><span class="toc-number">1.147.</span> <span class="toc-text">常用的算术生成算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#accumulate"><span class="toc-number">1.148.</span> <span class="toc-text">accumulate</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fill"><span class="toc-number">1.149.</span> <span class="toc-text">fill</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E7%AE%97%E6%B3%95"><span class="toc-number">1.150.</span> <span class="toc-text">集合算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set-intersection"><span class="toc-number">1.151.</span> <span class="toc-text">set_intersection</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set-union"><span class="toc-number">1.152.</span> <span class="toc-text">set_union</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set-difference"><span class="toc-number">1.153.</span> <span class="toc-text">set_difference</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BA%94%E7%94%A8%E4%BC%98%E5%8C%96"><span class="toc-number">1.154.</span> <span class="toc-text">对象的应用优化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-number">1.155.</span> <span class="toc-text">&amp;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E5%8C%961"><span class="toc-number">1.156.</span> <span class="toc-text">优化1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%97%AE%E9%A2%982"><span class="toc-number">1.157.</span> <span class="toc-text">问题2</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8%E4%B8%8E%E5%B7%A6%E5%80%BC%E5%BC%95%E7%94%A8"><span class="toc-number">1.158.</span> <span class="toc-text">右值引用与左值引用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.159.</span> <span class="toc-text">临时对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CMString%E5%9C%A8Vector%E4%B8%8A%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.160.</span> <span class="toc-text">CMString在Vector上的使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#std-move%E5%92%8Cstd-forword"><span class="toc-number">1.161.</span> <span class="toc-text">std::move和std::forword</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88"><span class="toc-number">1.162.</span> <span class="toc-text">简单的智能指针</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%B8%A6%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8%E6%8C%87%E9%92%88"><span class="toc-number">1.163.</span> <span class="toc-text">不带引用计数的引用指针</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#auto-ptr"><span class="toc-number">1.164.</span> <span class="toc-text">auto_ptr</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#scoped-ptr"><span class="toc-number">1.165.</span> <span class="toc-text">scoped_ptr</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#unique-ptr"><span class="toc-number">1.166.</span> <span class="toc-text">unique_ptr</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#shared-ptr"><span class="toc-number">1.167.</span> <span class="toc-text">shared_ptr</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#weak-ptr"><span class="toc-number">1.168.</span> <span class="toc-text">weak_ptr</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8"><span class="toc-number">1.169.</span> <span class="toc-text">使用智能指针实现线程安全</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E7%9A%84%E5%88%A0%E9%99%A4%E5%99%A8"><span class="toc-number">1.170.</span> <span class="toc-text">智能指针的删除器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E5%99%A8%E5%92%8C%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.171.</span> <span class="toc-text">绑定器和函数对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C-11STL%E4%B8%AD%E7%9A%84bind1st%E5%92%8Cbind2nd"><span class="toc-number">1.172.</span> <span class="toc-text">C++11STL中的bind1st和bind2nd</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#function"><span class="toc-number">1.173.</span> <span class="toc-text">function</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AE%8C%E5%85%A8%E7%89%B9%E4%BE%8B%E5%8C%96%E5%92%8C%E9%9D%9E%E5%AE%8C%E5%85%A8-%E9%83%A8%E5%88%86-%E7%89%B9%E4%BE%8B%E5%8C%96"><span class="toc-number">1.174.</span> <span class="toc-text">模板的完全特例化和非完全(部分)特例化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AE%9E%E5%8F%82%E6%8E%A8%E6%BC%94"><span class="toc-number">1.175.</span> <span class="toc-text">模板的实参推演</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">1.176.</span> <span class="toc-text">函数对象类型的实现原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#c-11%E7%9A%84bind"><span class="toc-number">1.177.</span> <span class="toc-text">c++11的bind</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#modu%E6%BA%90%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%ADbind%E5%92%8Cfunction%E6%9C%BA%E5%88%B6"><span class="toc-number">1.178.</span> <span class="toc-text">modu源码文件中bind和function机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.179.</span> <span class="toc-text">lambda表达式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%B7%A8%E8%AF%AD%E5%8F%A5%E4%BD%BF%E7%94%A8"><span class="toc-number">1.180.</span> <span class="toc-text">lambda表达式跨语句使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C-11%E6%A0%87%E5%87%86"><span class="toc-number">1.181.</span> <span class="toc-text">C++11标准</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C-%E8%AF%AD%E8%A8%80%E7%BA%A7%E5%88%AB%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B"><span class="toc-number">1.182.</span> <span class="toc-text">C++语言级别的多线程编程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#mutex%E9%94%81"><span class="toc-number">1.183.</span> <span class="toc-text">mutex锁</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B-%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6"><span class="toc-number">1.184.</span> <span class="toc-text">C++多线程编程-线程通信同步机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#unique-str%E5%92%8Ccondition-variable"><span class="toc-number">1.185.</span> <span class="toc-text">unique_str和condition_variable</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#c-11%E5%8E%9F%E5%AD%90%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.186.</span> <span class="toc-text">c++11原子类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A0%86%E4%B8%8A%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.187.</span> <span class="toc-text">堆上数据的处理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.188.</span> <span class="toc-text">单例模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E6%87%92%E6%B1%89%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.189.</span> <span class="toc-text">线程安全的懒汉模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.190.</span> <span class="toc-text">工厂模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82"><span class="toc-number">1.191.</span> <span class="toc-text">简单工厂</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95"><span class="toc-number">1.192.</span> <span class="toc-text">工厂方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82"><span class="toc-number">1.193.</span> <span class="toc-text">抽象工厂</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.194.</span> <span class="toc-text">代理模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.195.</span> <span class="toc-text">装饰器模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.196.</span> <span class="toc-text">适配器模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.197.</span> <span class="toc-text">观察者模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E9%81%8D%E5%8E%86%E6%90%9C%E7%B4%A2%E8%BF%B7%E5%AE%AB%E8%B7%AF%E5%BE%84"><span class="toc-number">1.198.</span> <span class="toc-text">深度遍历搜索迷宫路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%E9%81%8D%E5%8E%86%E5%AF%BB%E6%89%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84"><span class="toc-number">1.199.</span> <span class="toc-text">广度优先搜索遍历寻找最短路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%A7%E6%95%B0%E5%8A%A0%E5%87%8F%E6%B3%95"><span class="toc-number">1.200.</span> <span class="toc-text">大数加减法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E6%9F%A5%E9%87%8D"><span class="toc-number">1.201.</span> <span class="toc-text">海量数据查重</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%93%88%E5%B8%8C%E8%A1%A8%E6%9F%A5%E9%87%8D"><span class="toc-number">1.202.</span> <span class="toc-text">哈希表查重</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E6%B2%BB%E6%80%9D%E6%83%B3"><span class="toc-number">1.203.</span> <span class="toc-text">分治思想</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">1.204.</span> <span class="toc-text">布隆过滤器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E6%B1%82topK"><span class="toc-number">1.205.</span> <span class="toc-text">海量数据求topK</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E7%BB%BC%E5%90%88%E8%BF%90%E7%94%A8"><span class="toc-number">1.206.</span> <span class="toc-text">海量数据的综合运用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8mark-shared%E6%9B%BF%E4%BB%A3shared-ptr"><span class="toc-number">1.207.</span> <span class="toc-text">使用mark_shared替代shared_ptr</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#C-STL%E5%AE%B9%E5%99%A8%E7%9A%84emplace"><span class="toc-number">1.208.</span> <span class="toc-text">C++STL容器的emplace</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/10/cpp%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/" title="CPP核心">CPP核心</a><time datetime="2026-01-10T03:52:10.213Z" title="Created 2026-01-10 11:52:10">2026-01-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/10/unity/" title="unity">unity</a><time datetime="2026-01-10T03:52:10.213Z" title="Created 2026-01-10 11:52:10">2026-01-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/10/csharp/" title="csharp">csharp</a><time datetime="2026-01-10T03:52:10.203Z" title="Created 2026-01-10 11:52:10">2026-01-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/10/hello-world/" title="Hello World">Hello World</a><time datetime="2026-01-10T03:33:53.410Z" title="Created 2026-01-10 11:33:53">2026-01-10</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By John Doe</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>